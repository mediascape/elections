function foo(){var e=1,t="bar";return alert(t+e),null}function _a1(e,t){this.count=e,this._fc=t,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("_dm",function(){return this._fc})}function _a2(e,t,n){this._bm=e,n?this._do=new Array(t,n):this._do=new Array(t),this.__defineGetter__("_bo",function(){return this._bm}),this.__defineGetter__("_dn",function(){return this._bm*this._fo}),this.__defineGetter__("_fo",function(){var e=0;for(var t=0;t<this._do.length;t++)e+=this._do[t].length;return e}),this._fb=function(){return this._do}}function _a3(e,t,n,r,i,s){this._bs=e,this._ar=t,this._do=new Array(n,r,i,s);var o=0,u=n._bo,a=n._fb();for(var f=0;f<a.length;f++){var l=a[f];o+=l.Count*(l._dm+u)}this._br=o,this.__defineGetter__("_fd",function(){return this._bs}),this.__defineGetter__("_as",function(){return this._ar}),this.__defineGetter__("_dp",function(){return this._br}),this.__defineGetter__("_cr",function(){return 17+4*this._bs}),this._aq=function(){var e=this._cr,t=new _ac(e);t._bq(0,0,9,9),t._bq(e-8,0,8,9),t._bq(0,e-8,9,8);var n=this._ar.length;for(var r=0;r<n;r++){var i=this._ar[r]-2;for(var s=0;s<n;s++){if(r==0&&(s==0||s==n-1)||r==n-1&&s==0)continue;t._bq(this._ar[s]-2,i,5,5)}}return t._bq(6,9,1,e-17),t._bq(9,6,e-17,1),this._bs>6&&(t._bq(e-11,0,3,6),t._bq(0,e-11,6,3)),t},this._bu=function(e){return this._do[e.ordinal()]}}function _ay(){return new Array(new _a3(1,new Array,new _a2(7,new _a1(1,19)),new _a2(10,new _a1(1,16)),new _a2(13,new _a1(1,13)),new _a2(17,new _a1(1,9))),new _a3(2,new Array(6,18),new _a2(10,new _a1(1,34)),new _a2(16,new _a1(1,28)),new _a2(22,new _a1(1,22)),new _a2(28,new _a1(1,16))),new _a3(3,new Array(6,22),new _a2(15,new _a1(1,55)),new _a2(26,new _a1(1,44)),new _a2(18,new _a1(2,17)),new _a2(22,new _a1(2,13))),new _a3(4,new Array(6,26),new _a2(20,new _a1(1,80)),new _a2(18,new _a1(2,32)),new _a2(26,new _a1(2,24)),new _a2(16,new _a1(4,9))),new _a3(5,new Array(6,30),new _a2(26,new _a1(1,108)),new _a2(24,new _a1(2,43)),new _a2(18,new _a1(2,15),new _a1(2,16)),new _a2(22,new _a1(2,11),new _a1(2,12))),new _a3(6,new Array(6,34),new _a2(18,new _a1(2,68)),new _a2(16,new _a1(4,27)),new _a2(24,new _a1(4,19)),new _a2(28,new _a1(4,15))),new _a3(7,new Array(6,22,38),new _a2(20,new _a1(2,78)),new _a2(18,new _a1(4,31)),new _a2(18,new _a1(2,14),new _a1(4,15)),new _a2(26,new _a1(4,13),new _a1(1,14))),new _a3(8,new Array(6,24,42),new _a2(24,new _a1(2,97)),new _a2(22,new _a1(2,38),new _a1(2,39)),new _a2(22,new _a1(4,18),new _a1(2,19)),new _a2(26,new _a1(4,14),new _a1(2,15))),new _a3(9,new Array(6,26,46),new _a2(30,new _a1(2,116)),new _a2(22,new _a1(3,36),new _a1(2,37)),new _a2(20,new _a1(4,16),new _a1(4,17)),new _a2(24,new _a1(4,12),new _a1(4,13))),new _a3(10,new Array(6,28,50),new _a2(18,new _a1(2,68),new _a1(2,69)),new _a2(26,new _a1(4,43),new _a1(1,44)),new _a2(24,new _a1(6,19),new _a1(2,20)),new _a2(28,new _a1(6,15),new _a1(2,16))),new _a3(11,new Array(6,30,54),new _a2(20,new _a1(4,81)),new _a2(30,new _a1(1,50),new _a1(4,51)),new _a2(28,new _a1(4,22),new _a1(4,23)),new _a2(24,new _a1(3,12),new _a1(8,13))),new _a3(12,new Array(6,32,58),new _a2(24,new _a1(2,92),new _a1(2,93)),new _a2(22,new _a1(6,36),new _a1(2,37)),new _a2(26,new _a1(4,20),new _a1(6,21)),new _a2(28,new _a1(7,14),new _a1(4,15))),new _a3(13,new Array(6,34,62),new _a2(26,new _a1(4,107)),new _a2(22,new _a1(8,37),new _a1(1,38)),new _a2(24,new _a1(8,20),new _a1(4,21)),new _a2(22,new _a1(12,11),new _a1(4,12))),new _a3(14,new Array(6,26,46,66),new _a2(30,new _a1(3,115),new _a1(1,116)),new _a2(24,new _a1(4,40),new _a1(5,41)),new _a2(20,new _a1(11,16),new _a1(5,17)),new _a2(24,new _a1(11,12),new _a1(5,13))),new _a3(15,new Array(6,26,48,70),new _a2(22,new _a1(5,87),new _a1(1,88)),new _a2(24,new _a1(5,41),new _a1(5,42)),new _a2(30,new _a1(5,24),new _a1(7,25)),new _a2(24,new _a1(11,12),new _a1(7,13))),new _a3(16,new Array(6,26,50,74),new _a2(24,new _a1(5,98),new _a1(1,99)),new _a2(28,new _a1(7,45),new _a1(3,46)),new _a2(24,new _a1(15,19),new _a1(2,20)),new _a2(30,new _a1(3,15),new _a1(13,16))),new _a3(17,new Array(6,30,54,78),new _a2(28,new _a1(1,107),new _a1(5,108)),new _a2(28,new _a1(10,46),new _a1(1,47)),new _a2(28,new _a1(1,22),new _a1(15,23)),new _a2(28,new _a1(2,14),new _a1(17,15))),new _a3(18,new Array(6,30,56,82),new _a2(30,new _a1(5,120),new _a1(1,121)),new _a2(26,new _a1(9,43),new _a1(4,44)),new _a2(28,new _a1(17,22),new _a1(1,23)),new _a2(28,new _a1(2,14),new _a1(19,15))),new _a3(19,new Array(6,30,58,86),new _a2(28,new _a1(3,113),new _a1(4,114)),new _a2(26,new _a1(3,44),new _a1(11,45)),new _a2(26,new _a1(17,21),new _a1(4,22)),new _a2(26,new _a1(9,13),new _a1(16,14))),new _a3(20,new Array(6,34,62,90),new _a2(28,new _a1(3,107),new _a1(5,108)),new _a2(26,new _a1(3,41),new _a1(13,42)),new _a2(30,new _a1(15,24),new _a1(5,25)),new _a2(28,new _a1(15,15),new _a1(10,16))),new _a3(21,new Array(6,28,50,72,94),new _a2(28,new _a1(4,116),new _a1(4,117)),new _a2(26,new _a1(17,42)),new _a2(28,new _a1(17,22),new _a1(6,23)),new _a2(30,new _a1(19,16),new _a1(6,17))),new _a3(22,new Array(6,26,50,74,98),new _a2(28,new _a1(2,111),new _a1(7,112)),new _a2(28,new _a1(17,46)),new _a2(30,new _a1(7,24),new _a1(16,25)),new _a2(24,new _a1(34,13))),new _a3(23,new Array(6,30,54,74,102),new _a2(30,new _a1(4,121),new _a1(5,122)),new _a2(28,new _a1(4,47),new _a1(14,48)),new _a2(30,new _a1(11,24),new _a1(14,25)),new _a2(30,new _a1(16,15),new _a1(14,16))),new _a3(24,new Array(6,28,54,80,106),new _a2(30,new _a1(6,117),new _a1(4,118)),new _a2(28,new _a1(6,45),new _a1(14,46)),new _a2(30,new _a1(11,24),new _a1(16,25)),new _a2(30,new _a1(30,16),new _a1(2,17))),new _a3(25,new Array(6,32,58,84,110),new _a2(26,new _a1(8,106),new _a1(4,107)),new _a2(28,new _a1(8,47),new _a1(13,48)),new _a2(30,new _a1(7,24),new _a1(22,25)),new _a2(30,new _a1(22,15),new _a1(13,16))),new _a3(26,new Array(6,30,58,86,114),new _a2(28,new _a1(10,114),new _a1(2,115)),new _a2(28,new _a1(19,46),new _a1(4,47)),new _a2(28,new _a1(28,22),new _a1(6,23)),new _a2(30,new _a1(33,16),new _a1(4,17))),new _a3(27,new Array(6,34,62,90,118),new _a2(30,new _a1(8,122),new _a1(4,123)),new _a2(28,new _a1(22,45),new _a1(3,46)),new _a2(30,new _a1(8,23),new _a1(26,24)),new _a2(30,new _a1(12,15),new _a1(28,16))),new _a3(28,new Array(6,26,50,74,98,122),new _a2(30,new _a1(3,117),new _a1(10,118)),new _a2(28,new _a1(3,45),new _a1(23,46)),new _a2(30,new _a1(4,24),new _a1(31,25)),new _a2(30,new _a1(11,15),new _a1(31,16))),new _a3(29,new Array(6,30,54,78,102,126),new _a2(30,new _a1(7,116),new _a1(7,117)),new _a2(28,new _a1(21,45),new _a1(7,46)),new _a2(30,new _a1(1,23),new _a1(37,24)),new _a2(30,new _a1(19,15),new _a1(26,16))),new _a3(30,new Array(6,26,52,78,104,130),new _a2(30,new _a1(5,115),new _a1(10,116)),new _a2(28,new _a1(19,47),new _a1(10,48)),new _a2(30,new _a1(15,24),new _a1(25,25)),new _a2(30,new _a1(23,15),new _a1(25,16))),new _a3(31,new Array(6,30,56,82,108,134),new _a2(30,new _a1(13,115),new _a1(3,116)),new _a2(28,new _a1(2,46),new _a1(29,47)),new _a2(30,new _a1(42,24),new _a1(1,25)),new _a2(30,new _a1(23,15),new _a1(28,16))),new _a3(32,new Array(6,34,60,86,112,138),new _a2(30,new _a1(17,115)),new _a2(28,new _a1(10,46),new _a1(23,47)),new _a2(30,new _a1(10,24),new _a1(35,25)),new _a2(30,new _a1(19,15),new _a1(35,16))),new _a3(33,new Array(6,30,58,86,114,142),new _a2(30,new _a1(17,115),new _a1(1,116)),new _a2(28,new _a1(14,46),new _a1(21,47)),new _a2(30,new _a1(29,24),new _a1(19,25)),new _a2(30,new _a1(11,15),new _a1(46,16))),new _a3(34,new Array(6,34,62,90,118,146),new _a2(30,new _a1(13,115),new _a1(6,116)),new _a2(28,new _a1(14,46),new _a1(23,47)),new _a2(30,new _a1(44,24),new _a1(7,25)),new _a2(30,new _a1(59,16),new _a1(1,17))),new _a3(35,new Array(6,30,54,78,102,126,150),new _a2(30,new _a1(12,121),new _a1(7,122)),new _a2(28,new _a1(12,47),new _a1(26,48)),new _a2(30,new _a1(39,24),new _a1(14,25)),new _a2(30,new _a1(22,15),new _a1(41,16))),new _a3(36,new Array(6,24,50,76,102,128,154),new _a2(30,new _a1(6,121),new _a1(14,122)),new _a2(28,new _a1(6,47),new _a1(34,48)),new _a2(30,new _a1(46,24),new _a1(10,25)),new _a2(30,new _a1(2,15),new _a1(64,16))),new _a3(37,new Array(6,28,54,80,106,132,158),new _a2(30,new _a1(17,122),new _a1(4,123)),new _a2(28,new _a1(29,46),new _a1(14,47)),new _a2(30,new _a1(49,24),new _a1(10,25)),new _a2(30,new _a1(24,15),new _a1(46,16))),new _a3(38,new Array(6,32,58,84,110,136,162),new _a2(30,new _a1(4,122),new _a1(18,123)),new _a2(28,new _a1(13,46),new _a1(32,47)),new _a2(30,new _a1(48,24),new _a1(14,25)),new _a2(30,new _a1(42,15),new _a1(32,16))),new _a3(39,new Array(6,26,54,82,110,138,166),new _a2(30,new _a1(20,117),new _a1(4,118)),new _a2(28,new _a1(40,47),new _a1(7,48)),new _a2(30,new _a1(43,24),new _a1(22,25)),new _a2(30,new _a1(10,15),new _a1(67,16))),new _a3(40,new Array(6,30,58,86,114,142,170),new _a2(30,new _a1(19,118),new _a1(6,119)),new _a2(28,new _a1(18,47),new _a1(31,48)),new _a2(30,new _a1(34,24),new _a1(34,25)),new _a2(30,new _a1(20,15),new _a1(61,16))))}function _ae(e,t,n,r,i,s,o,u,a){this.a11=e,this.a12=r,this.a13=o,this.a21=t,this.a22=i,this.a23=u,this.a31=n,this.a32=s,this.a33=a,this._ad=function(e){var t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,u=this.a23,a=this.a31,f=this.a32,l=this.a33;for(var c=0;c<t;c+=2){var h=e[c],p=e[c+1],d=i*h+u*p+l;e[c]=(n*h+s*p+a)/d,e[c+1]=(r*h+o*p+f)/d}},this._fp=function(e,t){var n=e.length;for(var r=0;r<n;r++){var i=e[r],s=t[r],o=this.a13*i+this.a23*s+this.a33;e[r]=(this.a11*i+this.a21*s+this.a31)/o,t[r]=(this.a12*i+this.a22*s+this.a32)/o}},this._fr=function(){return new _ae(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(e){return new _ae(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}function _bg(e,t){this.bits=e,this.points=t}function Detector(e){this.image=e,this._am=null,this._bi=function(e,t,n,r){var i=Math.abs(r-t)>Math.abs(n-e);if(i){var s=e;e=t,t=s,s=n,n=r,r=s}var o=Math.abs(n-e),u=Math.abs(r-t),a=-o>>1,f=t<r?1:-1,l=e<n?1:-1,c=0;for(var h=e,p=t;h!=n;h+=l){var d=i?p:h,v=i?h:p;c==1?this.image[d+v*qrcode.width]&&c++:this.image[d+v*qrcode.width]||c++;if(c==3){var m=h-e,g=p-t;return Math.sqrt(m*m+g*g)}a+=u;if(a>0){if(p==r)break;p+=f,a-=o}}var y=n-e,b=r-t;return Math.sqrt(y*y+b*b)},this._bh=function(e,t,n,r){var i=this._bi(e,t,n,r),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=qrcode.width&&(s=(qrcode.width-1-e)/(o-e),o=qrcode.width-1);var u=Math.floor(t-(r-t)*s);return s=1,u<0?(s=t/(t-u),u=0):u>=qrcode.height&&(s=(qrcode.height-1-t)/(u-t),u=qrcode.height-1),o=Math.floor(e+(o-e)*s),i+=this._bi(e,t,o,u),i-1},this._bj=function(e,t){var n=this._bh(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y)),r=this._bh(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},this._bk=function(e,t,n){return(this._bj(e,t)+this._bj(e,n))/2},this.distance=function(e,t){return xDiff=e.X-t.X,yDiff=e.Y-t.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)},this._bx=function(e,t,n,r){var i=Math.round(this.distance(e,t)/r),s=Math.round(this.distance(e,n)/r),o=(i+s>>1)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw"Error"}return o},this._bl=function(e,t,n,r){var i=Math.floor(r*e),s=Math.max(0,t-i),o=Math.min(qrcode.width-1,t+i);if(o-s<e*3)throw"Error";var u=Math.max(0,n-i),a=Math.min(qrcode.height-1,n+i),f=new _ak(this.image,s,u,o-s,a-u,e,this._am);return f.find()},this.createTransform=function(e,t,n,r,i){var s=i-3.5,o,u,a,f;r!=null?(o=r.X,u=r.Y,a=f=s-3):(o=t.X-e.X+n.X,u=t.Y-e.Y+n.Y,a=f=s);var l=_ae._ag(3.5,3.5,s,3.5,a,f,3.5,s,e.X,e.Y,t.X,t.Y,o,u,n.X,n.Y);return l},this._bz=function(e,t,n){var r=_aa;return r._af(e,n,t)},this._cd=function(e){var t=e._gq,n=e._gs,r=e._gp,i=this._bk(t,n,r);if(i<1)throw"Error";var s=this._bx(t,n,r,i),o=_a3._at(s),u=o._cr-7,a=null;if(o._as.length>0){var f=n.X-t.X+r.X,l=n.Y-t.Y+r.Y,c=1-3/u,h=Math.floor(t.X+c*(f-t.X)),p=Math.floor(t.Y+c*(l-t.Y));for(var d=4;d<=16;d<<=1){a=this._bl(i,h,p,d);break}}var v=this.createTransform(t,n,r,a,s),m=this._bz(this.image,v,s),g;return a==null?g=new Array(r,t,n):g=new Array(r,t,n,a),new _bg(m,g)},this.detect=function(){var e=(new _cc)._ce(this.image);return this._cd(e)}}function _ax(e){this._cf=_cg.forBits(e>>3&3),this._fe=e&7,this.__defineGetter__("_cg",function(){return this._cf}),this.__defineGetter__("_dx",function(){return this._fe}),this.GetHashCode=function(){return this._cf.ordinal()<<3|_fe},this.Equals=function(e){var t=e;return this._cf==t._cf&&this._fe==t._fe}}function _cg(e,t,n){this._ff=e,this.bits=t,this.name=n,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this._ff}}function _ac(e,t){t||(t=e);if(e<1||t<1)throw"Both dimensions must be greater than 0";this.width=e,this.height=t;var n=e>>5;(e&31)!=0&&n++,this.rowSize=n,this.bits=new Array(n*t);for(var r=0;r<this.bits.length;r++)this.bits[r]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this._ds=function(e,t){var n=t*this.rowSize+(e>>5);return(_ew(this.bits[n],e&31)&1)!=0},this._dq=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]|=1<<(e&31)},this.flip=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]^=1<<(e&31)},this.clear=function(){var e=this.bits.length;for(var t=0;t<e;t++)this.bits[t]=0},this._bq=function(e,t,n,r){if(t<0||e<0)throw"Left and top must be nonnegative";if(r<1||n<1)throw"Height and width must be at least 1";var i=e+n,s=t+r;if(s>this.height||i>this.width)throw"The region must fit inside the matrix";for(var o=t;o<s;o++){var u=o*this.rowSize;for(var a=e;a<i;a++)this.bits[u+(a>>5)]|=1<<(a&31)}}}function _dl(e,t){this._dv=e,this._dw=t,this.__defineGetter__("_du",function(){return this._dv}),this.__defineGetter__("Codewords",function(){return this._dw})}function _cl(e){var t=e.Dimension;if(t<21||(t&3)!=1)throw"Error _cl";this._au=e,this._cp=null,this._co=null,this._dk=function(e,t,n){return this._au._ds(e,t)?n<<1|1:n<<1},this._cm=function(){if(this._co!=null)return this._co;var e=0;for(var t=0;t<6;t++)e=this._dk(t,8,e);e=this._dk(7,8,e),e=this._dk(8,8,e),e=this._dk(8,7,e);for(var n=5;n>=0;n--)e=this._dk(8,n,e);this._co=_ax._ci(e);if(this._co!=null)return this._co;var r=this._au.Dimension;e=0;var i=r-8;for(var t=r-1;t>=i;t--)e=this._dk(t,8,e);for(var n=r-7;n<r;n++)e=this._dk(8,n,e);this._co=_ax._ci(e);if(this._co!=null)return this._co;throw"Error _cm"},this._cq=function(){if(this._cp!=null)return this._cp;var e=this._au.Dimension,t=e-17>>2;if(t<=6)return _a3._av(t);var n=0,r=e-11;for(var i=5;i>=0;i--)for(var s=e-9;s>=r;s--)n=this._dk(s,i,n);this._cp=_a3._aw(n);if(this._cp!=null&&this._cp._cr==e)return this._cp;n=0;for(var s=5;s>=0;s--)for(var i=e-9;i>=r;i--)n=this._dk(s,i,n);this._cp=_a3._aw(n);if(this._cp!=null&&this._cp._cr==e)return this._cp;throw"Error _cq"},this._gk=function(){var e=this._cm(),t=this._cq(),n=_dx._gl(e._dx),r=this._au.Dimension;n._dj(this._au,r);var i=t._aq(),s=!0,o=new Array(t._dp),u=0,a=0,f=0;for(var l=r-1;l>0;l-=2){l==6&&l--;for(var c=0;c<r;c++){var h=s?r-1-c:c;for(var p=0;p<2;p++)i._ds(l-p,h)||(f++,a<<=1,this._au._ds(l-p,h)&&(a|=1),f==8&&(o[u++]=a,f=0,a=0))}s^=!0}if(u!=t._dp)throw"Error _gk";return o}}function _fg(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){return(e+t&1)==0}}function _fh(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){return(e&1)==0}}function _fi(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){return t%3==0}}function _fj(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){return(e+t)%3==0}}function _fk(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){return(_ew(e,1)+t/3&1)==0}}function _fl(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){var n=e*t;return(n&1)+n%3==0}}function _fm(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){var n=e*t;return((n&1)+n%3&1)==0}}function _fn(){this._dj=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this._fw(n,r)&&e.flip(r,n)},this._fw=function(e,t){return((e+t&1)+e*t%3&1)==0}}function _db(e){this._fa=e,this.decode=function(e,t){var n=new _bp(this._fa,e),r=new Array(t);for(var i=0;i<r.length;i++)r[i]=0;var s=!1,o=!0;for(var i=0;i<t;i++){var u=n.evaluateAt(this._fa.exp(s?i+1:i));r[r.length-1-i]=u,u!=0&&(o=!1)}if(o)return;var a=new _bp(this._fa,r),f=this._eb(this._fa._ba(t,1),a,t),l=f[0],c=f[1],h=this._ey(l),p=this._di(c,h,s);for(var i=0;i<h.length;i++){var d=e.length-1-this._fa.log(h[i]);if(d<0)throw"ReedSolomonException Bad error location";e[d]=_az._bd(e[d],p[i])}},this._eb=function(e,t,n){if(e._ec<t._ec){var r=e;e=t,t=r}var i=e,s=t,o=this._fa.One,u=this._fa.Zero,a=this._fa.Zero,f=this._fa.One;while(s._ec>=Math.floor(n/2)){var l=i,c=o,h=a;i=s,o=u,a=f;if(i.Zero)throw"r_{i-1} was zero";s=l;var p=this._fa.Zero,d=i._ex(i._ec),v=this._fa.inverse(d);while(s._ec>=i._ec&&!s.Zero){var m=s._ec-i._ec,g=this._fa.multiply(s._ex(s._ec),v);p=p._bd(this._fa._ba(m,g)),s=s._bd(i._dc(m,g))}u=p.multiply1(o)._bd(c),f=p.multiply1(a)._bd(h)}var y=f._ex(0);if(y==0)throw"ReedSolomonException sigmaTilde(0) was zero";var b=this._fa.inverse(y),w=f.multiply2(b),E=s.multiply2(b);return new Array(w,E)},this._ey=function(e){var t=e._ec;if(t==1)return new Array(e._ex(1));var n=new Array(t),r=0;for(var i=1;i<256&&r<t;i++)e.evaluateAt(i)==0&&(n[r]=this._fa.inverse(i),r++);if(r!=t)throw"Error locator degree does not match number of roots";return n},this._di=function(e,t,n){var r=t.length,i=new Array(r);for(var s=0;s<r;s++){var o=this._fa.inverse(t[s]),u=1;for(var a=0;a<r;a++)s!=a&&(u=this._fa.multiply(u,_az._bd(1,this._fa.multiply(t[a],o))));i[s]=this._fa.multiply(e.evaluateAt(o),this._fa.inverse(u)),n&&(i[s]=this._fa.multiply(i[s],o))}return i}}function _bp(e,t){if(t==null||t.length==0)throw"bad arguments";this._fa=e;var n=t.length;if(n>1&&t[0]==0){var r=1;while(r<n&&t[r]==0)r++;if(r==n)this._dd=e.Zero._dd;else{this._dd=new Array(n-r);for(var i=0;i<this._dd.length;i++)this._dd[i]=0;for(var s=0;s<this._dd.length;s++)this._dd[s]=t[r+s]}}else this._dd=t;this.__defineGetter__("Zero",function(){return this._dd[0]==0}),this.__defineGetter__("_ec",function(){return this._dd.length-1}),this.__defineGetter__("Coefficients",function(){return this._dd}),this._ex=function(e){return this._dd[this._dd.length-1-e]},this.evaluateAt=function(e){if(e==0)return this._ex(0);var t=this._dd.length;if(e==1){var n=0;for(var r=0;r<t;r++)n=_az._bd(n,this._dd[r]);return n}var i=this._dd[0];for(var r=1;r<t;r++)i=_az._bd(this._fa.multiply(e,i),this._dd[r]);return i},this._bd=function(t){if(this._fa!=t._fa)throw"GF256Polys do not have same _az _fa";if(this.Zero)return t;if(t.Zero)return this;var n=this._dd,r=t._dd;if(n.length>r.length){var i=n;n=r,r=i}var s=new Array(r.length),o=r.length-n.length;for(var u=0;u<o;u++)s[u]=r[u];for(var a=o;a<r.length;a++)s[a]=_az._bd(n[a-o],r[a]);return new _bp(e,s)},this.multiply1=function(e){if(this._fa!=e._fa)throw"GF256Polys do not have same _az _fa";if(this.Zero||e.Zero)return this._fa.Zero;var t=this._dd,n=t.length,r=e._dd,i=r.length,s=new Array(n+i-1);for(var o=0;o<n;o++){var u=t[o];for(var a=0;a<i;a++)s[o+a]=_az._bd(s[o+a],this._fa.multiply(u,r[a]))}return new _bp(this._fa,s)},this.multiply2=function(e){if(e==0)return this._fa.Zero;if(e==1)return this;var t=this._dd.length,n=new Array(t);for(var r=0;r<t;r++)n[r]=this._fa.multiply(this._dd[r],e);return new _bp(this._fa,n)},this._dc=function(e,t){if(e<0)throw"bad arguments";if(t==0)return this._fa.Zero;var n=this._dd.length,r=new Array(n+e);for(var i=0;i<r.length;i++)r[i]=0;for(var i=0;i<n;i++)r[i]=this._fa.multiply(this._dd[i],t);return new _bp(this._fa,r)},this.divide=function(e){if(this._fa!=e._fa)throw"GF256Polys do not have same _az _fa";if(e.Zero)throw"Divide by 0";var t=this._fa.Zero,n=this,r=e._ex(e._ec),i=this._fa.inverse(r);while(n._ec>=e._ec&&!n.Zero){var s=n._ec-e._ec,o=this._fa.multiply(n._ex(n._ec),i),u=e._dc(s,o),a=this._fa._ba(s,o);t=t._bd(a),n=n._bd(u)}return new Array(t,n)}}function _az(e){this._gh=new Array(256),this._gi=new Array(256);var t=1;for(var n=0;n<256;n++)this._gh[n]=t,t<<=1,t>=256&&(t^=e);for(var n=0;n<255;n++)this._gi[this._gh[n]]=n;var r=new Array(1);r[0]=0,this.zero=new _bp(this,new Array(r));var i=new Array(1);i[0]=1,this.one=new _bp(this,new Array(i)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this._ba=function(e,t){if(e<0)throw"bad arguments";if(t==0)return zero;var n=new Array(e+1);for(var r=0;r<n.length;r++)n[r]=0;return n[0]=t,new _bp(this,n)},this.exp=function(e){return this._gh[e]},this.log=function(e){if(e==0)throw"bad arguments";return this._gi[e]},this.inverse=function(e){if(e==0)throw"System.ArithmeticException";return this._gh[255-this._gi[e]]},this.multiply=function(e,t){return e==0||t==0?0:e==1?t:t==1?e:this._gh[(this._gi[e]+this._gi[t])%255]}}function _ew(e,t){return e>=0?e>>t:(e>>t)+(2<<~t)}function _cz(e,t,n){this.x=e,this.y=t,this.count=1,this._aj=n,this.__defineGetter__("_ei",function(){return this._aj}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this._ek=function(){this.count++},this._ev=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this._aj);return r<=1||r/this._aj<=1}return!1}}function _es(e){this._go=e[0],this._gu=e[1],this._gr=e[2],this.__defineGetter__("_gp",function(){return this._go}),this.__defineGetter__("_gq",function(){return this._gu}),this.__defineGetter__("_gs",function(){return this._gr})}function _cc(){this.image=null,this._cv=[],this._ge=!1,this._al=new Array(0,0,0,0,0),this._am=null,this.__defineGetter__("_da",function(){return this._al[0]=0,this._al[1]=0,this._al[2]=0,this._al[3]=0,this._al[4]=0,this._al}),this._ao=function(e){var t=0;for(var n=0;n<5;n++){var r=e[n];if(r==0)return!1;t+=r}if(t<7)return!1;var i=Math.floor((t<<_el)/7),s=Math.floor(i/2);return Math.abs(i-(e[0]<<_el))<s&&Math.abs(i-(e[1]<<_el))<s&&Math.abs(3*i-(e[2]<<_el))<3*s&&Math.abs(i-(e[3]<<_el))<s&&Math.abs(i-(e[4]<<_el))<s},this._an=function(e,t){return t-e[4]-e[3]-e[2]/2},this._ap=function(e,t,n,r){var i=this.image,s=qrcode.height,o=this._da,u=e;while(u>=0&&i[t+u*qrcode.width])o[2]++,u--;if(u<0)return NaN;while(u>=0&&!i[t+u*qrcode.width]&&o[1]<=n)o[1]++,u--;if(u<0||o[1]>n)return NaN;while(u>=0&&i[t+u*qrcode.width]&&o[0]<=n)o[0]++,u--;if(o[0]>n)return NaN;u=e+1;while(u<s&&i[t+u*qrcode.width])o[2]++,u++;if(u==s)return NaN;while(u<s&&!i[t+u*qrcode.width]&&o[3]<n)o[3]++,u++;if(u==s||o[3]>=n)return NaN;while(u<s&&i[t+u*qrcode.width]&&o[4]<n)o[4]++,u++;if(o[4]>=n)return NaN;var a=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(a-r)>=2*r?NaN:this._ao(o)?this._an(o,u):NaN},this._ej=function(e,t,n,r){var i=this.image,s=qrcode.width,o=this._da,u=e;while(u>=0&&i[u+t*qrcode.width])o[2]++,u--;if(u<0)return NaN;while(u>=0&&!i[u+t*qrcode.width]&&o[1]<=n)o[1]++,u--;if(u<0||o[1]>n)return NaN;while(u>=0&&i[u+t*qrcode.width]&&o[0]<=n)o[0]++,u--;if(o[0]>n)return NaN;u=e+1;while(u<s&&i[u+t*qrcode.width])o[2]++,u++;if(u==s)return NaN;while(u<s&&!i[u+t*qrcode.width]&&o[3]<n)o[3]++,u++;if(u==s||o[3]>=n)return NaN;while(u<s&&i[u+t*qrcode.width]&&o[4]<n)o[4]++,u++;if(o[4]>=n)return NaN;var a=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(a-r)>=r?NaN:this._ao(o)?this._an(o,u):NaN},this._cu=function(e,t,n){var r=e[0]+e[1]+e[2]+e[3]+e[4],i=this._an(e,n),s=this._ap(t,Math.floor(i),e[2],r);if(!isNaN(s)){i=this._ej(Math.floor(i),Math.floor(s),e[2],r);if(!isNaN(i)){var o=r/7,u=!1,a=this._cv.length;for(var f=0;f<a;f++){var l=this._cv[f];if(l._ev(o,s,i)){l._ek(),u=!0;break}}if(!u){var c=new _cz(i,s,o);this._cv.push(c),this._am!=null&&this._am._ep(c)}return!0}}return!1},this._ee=function(){var e=this._cv.length;if(e<3)throw"Couldn't find enough finder patterns";if(e>3){var t=0,n=0;for(var r=0;r<e;r++){var i=this._cv[r]._ei;t+=i,n+=i*i}var s=t/e;this._cv.sort(function(e,t){var n=Math.abs(t._ei-s),r=Math.abs(e._ei-s);return n<r?-1:n==r?0:1});var o=Math.sqrt(n/e-s*s),u=Math.max(.2*s,o);for(var r=0;r<this._cv.length&&this._cv.length>3;r++){var a=this._cv[r];Math.abs(a._ei-s)>u&&(this._cv.remove(r),r--)}}return this._cv.length>3&&this._cv.sort(function(e,t){return e.count>t.count?-1:e.count<t.count?1:0}),new Array(this._cv[0],this._cv[1],this._cv[2])},this._eq=function(){var e=this._cv.length;if(e<=1)return 0;var t=null;for(var n=0;n<e;n++){var r=this._cv[n];if(r.Count>=_eg){if(t!=null)return this._ge=!0,Math.floor((Math.abs(t.X-r.X)-Math.abs(t.Y-r.Y))/2);t=r}}return 0},this._cx=function(){var e=0,t=0,n=this._cv.length;for(var r=0;r<n;r++){var i=this._cv[r];i.Count>=_eg&&(e++,t+=i._ei)}if(e<3)return!1;var s=t/n,o=0;for(var r=0;r<n;r++)i=this._cv[r],o+=Math.abs(i._ei-s);return o<=.05*t},this._ce=function(e){var t=!1;this.image=e;var n=qrcode.height,r=qrcode.width,i=Math.floor(3*n/(4*_eh));if(i<_gf||t)i=_gf;var s=!1,o=new Array(5);for(var u=i-1;u<n&&!s;u+=i){o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0;var a=0;for(var f=0;f<r;f++)if(e[f+u*qrcode.width])(a&1)==1&&a++,o[a]++;else if((a&1)==0)if(a==4)if(this._ao(o)){var l=this._cu(o,u,f);if(l){i=2;if(this._ge)s=this._cx();else{var c=this._eq();c>o[2]&&(u+=c-o[2]-i,f=r-1)}}else{do f++;while(f<r&&!e[f+u*qrcode.width]);f--}a=0,o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0}else o[0]=o[2],o[1]=o[3],o[2]=o[4],o[3]=1,o[4]=0,a=3;else o[++a]++;else o[a]++;if(this._ao(o)){var l=this._cu(o,u,r);l&&(i=o[0],this._ge&&(s=_cx()))}}var h=this._ee();return qrcode._er(h),new _es(h)}}function _ai(e,t,n){this.x=e,this.y=t,this.count=1,this._aj=n,this.__defineGetter__("_ei",function(){return this._aj}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this._ek=function(){this.count++},this._ev=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this._aj);return r<=1||r/this._aj<=1}return!1}}function _ak(e,t,n,r,i,s,o){this.image=e,this._cv=new Array,this.startX=t,this.startY=n,this.width=r,this.height=i,this._ef=s,this._al=new Array(0,0,0),this._am=o,this._an=function(e,t){return t-e[2]-e[1]/2},this._ao=function(e){var t=this._ef,n=t/2;for(var r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},this._ap=function(e,t,n,r){var i=this.image,s=qrcode.height,o=this._al;o[0]=0,o[1]=0,o[2]=0;var u=e;while(u>=0&&i[t+u*qrcode.width]&&o[1]<=n)o[1]++,u--;if(u<0||o[1]>n)return NaN;while(u>=0&&!i[t+u*qrcode.width]&&o[0]<=n)o[0]++,u--;if(o[0]>n)return NaN;u=e+1;while(u<s&&i[t+u*qrcode.width]&&o[1]<=n)o[1]++,u++;if(u==s||o[1]>n)return NaN;while(u<s&&!i[t+u*qrcode.width]&&o[2]<=n)o[2]++,u++;if(o[2]>n)return NaN;var a=o[0]+o[1]+o[2];return 5*Math.abs(a-r)>=2*r?NaN:this._ao(o)?this._an(o,u):NaN},this._cu=function(e,t,n){var r=e[0]+e[1]+e[2],i=this._an(e,n),s=this._ap(t,Math.floor(i),2*e[1],r);if(!isNaN(s)){var o=(e[0]+e[1]+e[2])/3,u=this._cv.length;for(var a=0;a<u;a++){var f=this._cv[a];if(f._ev(o,s,i))return new _ai(i,s,o)}var l=new _ai(i,s,o);this._cv.push(l),this._am!=null&&this._am._ep(l)}return null},this.find=function(){var t=this.startX,i=this.height,s=t+r,o=n+(i>>1),u=new Array(0,0,0);for(var a=0;a<i;a++){var l=o+((a&1)==0?a+1>>1:-(a+1>>1));u[0]=0,u[1]=0,u[2]=0;var c=t;while(c<s&&!e[c+qrcode.width*l])c++;var h=0;while(c<s){if(e[c+l*qrcode.width])if(h==1)u[h]++;else if(h==2){if(this._ao(u)){var p=this._cu(u,l,c);if(p!=null)return p}u[0]=u[2],u[1]=1,u[2]=0,h=1}else u[++h]++;else h==1&&h++,u[h]++;c++}if(this._ao(u)){var p=this._cu(u,l,s);if(p!=null)return p}}if(this._cv.length!=0)return this._cv[0];throw"Couldn't find enough alignment patterns"}}function QRCodeDataBlockReader(e,t,n){this._ed=0,this._cw=7,this.dataLength=0,this.blocks=e,this._en=n,t<=9?this.dataLengthMode=0:t>=10&&t<=26?this.dataLengthMode=1:t>=27&&t<=40&&(this.dataLengthMode=2),this._gd=function(e){var t=0;if(e<this._cw+1){var n=0;for(var r=0;r<e;r++)n+=1<<r;return n<<=this._cw-e+1,t=(this.blocks[this._ed]&n)>>this._cw-e+1,this._cw-=e,t}if(e<this._cw+1+8){var i=0;for(var r=0;r<this._cw+1;r++)i+=1<<r;return t=(this.blocks[this._ed]&i)<<e-(this._cw+1),this._ed++,t+=this.blocks[this._ed]>>8-(e-(this._cw+1)),this._cw=this._cw-e%8,this._cw<0&&(this._cw=8+this._cw),t}if(e<this._cw+1+16){var i=0,s=0;for(var r=0;r<this._cw+1;r++)i+=1<<r;var o=(this.blocks[this._ed]&i)<<e-(this._cw+1);this._ed++;var u=this.blocks[this._ed]<<e-(this._cw+1+8);this._ed++;for(var r=0;r<e-(this._cw+1+8);r++)s+=1<<r;s<<=8-(e-(this._cw+1+8));var a=(this.blocks[this._ed]&s)>>8-(e-(this._cw+1+8));return t=o+u+a,this._cw=this._cw-(e-8)%8,this._cw<0&&(this._cw=8+this._cw),t}return 0},this.NextMode=function(){return this._ed>this.blocks.length-this._en-2?0:this._gd(4)},this.getDataLength=function(e){var t=0;for(;;){if(e>>t==1)break;t++}return this._gd(qrcode._eo[this.dataLengthMode][t])},this.getRomanAndFigureString=function(e){var t=e,n=0,r="",i=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do if(t>1){n=this._gd(11);var s=Math.floor(n/45),o=n%45;r+=i[s],r+=i[o],t-=2}else t==1&&(n=this._gd(6),r+=i[n],t-=1);while(t>0);return r},this.getFigureString=function(e){var t=e,n=0,r="";do t>=3?(n=this._gd(10),n<100&&(r+="0"),n<10&&(r+="0"),t-=3):t==2?(n=this._gd(7),n<10&&(r+="0"),t-=2):t==1&&(n=this._gd(4),t-=1),r+=n;while(t>0);return r},this.get8bitByteArray=function(e){var t=e,n=0,r=new Array;do n=this._gd(8),r.push(n),t--;while(t>0);return r},this.getKanjiString=function(e){var t=e,n=0,r="";do{n=_gd(13);var i=n%192,s=n/192,o=(s<<8)+i,u=0;o+33088<=40956?u=o+33088:u=o+49472,r+=String.fromCharCode(u),t--}while(t>0);return r},this.__defineGetter__("DataByte",function(){var e=new Array,t=1,n=2,r=4,i=8;do{var s=this.NextMode();if(s==0){if(e.length>0)break;throw"Empty data block"}if(s!=t&&s!=n&&s!=r&&s!=i)throw"Invalid mode: "+s+" in (block:"+this._ed+" bit:"+this._cw+")";dataLength=this.getDataLength(s);if(dataLength<1)throw"Invalid data length: "+dataLength;switch(s){case t:var o=this.getFigureString(dataLength),u=new Array(o.length);for(var a=0;a<o.length;a++)u[a]=o.charCodeAt(a);e.push(u);break;case n:var o=this.getRomanAndFigureString(dataLength),u=new Array(o.length);for(var a=0;a<o.length;a++)u[a]=o.charCodeAt(a);e.push(u);break;case r:var f=this.get8bitByteArray(dataLength);e.push(f);break;case i:var o=this.getKanjiString(dataLength);e.push(o)}}while(!0);return e})}var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var r in e)if(t(e,r)&&n(e[r],r))break}function U(e,n,r,i){return n&&B(n,function(n,s){if(r||!t(e,s))i&&"object"==typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[s]||(e[s]={}),U(e[s],n,r,i)):e[s]=n}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var r,i,s,o,u,a,f,l,t=t&&t.split("/"),c=A.map,h=c&&c["*"];if(e){e=e.split("/"),i=e.length-1,A.nodeIdCompat&&Q.test(e[i])&&(e[i]=e[i].replace(Q,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e;for(s=0;s<i.length;s++)(o=i[s],"."===o)?(i.splice(s,1),s-=1):".."===o&&0!==s&&(1!==s||".."!==i[2])&&".."!==i[s-1]&&0<s&&(i.splice(s-1,2),s-=2);e=e.join("/")}if(n&&c&&(t||h)){i=e.split("/"),s=i.length;e:for(;0<s;s-=1){u=i.slice(0,s).join("/");if(t)for(o=t.length;0<o;o-=1)if(n=m(c,t.slice(0,o).join("/")))if(n=m(n,u)){r=n,a=s;break e}!f&&h&&m(h,u)&&(f=m(h,u),l=s)}!r&&f&&(r=f,a=l),r&&(i.splice(0,a,r),e=i.join("/"))}return(r=m(A.pkgs,e))?r:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a=null,f=t?t.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(q+=1)),e=s(e),a=e[0],e=e[1],a&&(a=n(a,f,i),u=m(j,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),e=s(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(W+=1):"",{prefix:a,name:h,parentMap:t,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(O,t);return n||(n=O[t]=new x.Module(e)),n}function f(e,n,r){var i=e.id,s=m(O,i);t(j,i)&&(!s||s.defineEmitComplete)?"defined"===n&&r(j[i]):(s=a(e),s.error&&"error"===n)?r(s.error):s.on(n,r)}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(v(n,function(t){if(t=m(O,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&g.onError(e)}function c(){R.length&&(ha.apply(P,[P.length,0].concat(R)),R=[])}function h(e){delete O[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,i){var s=r.id,o=m(O,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,j[s]),e.check()):p(o,t,n))}),n[r]=!0)}function d(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),s=[],o=[],u=!1,a=!0;if(!E){E=!0,B(_,function(e){var f=e.map,l=f.id;if(e.enabled&&(f.isDefine||o.push(e),!e.error))if(!e.inited&&n)i(l)?u=t=!0:(s.push(l),r(l));else if(!e.inited&&e.fetched&&f.isDefine&&(u=!0,!f.prefix))return a=!1});if(n&&s.length)return e=C("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,l(e);a&&v(o,function(e){p(e,{},{})}),(!n||t)&&u&&(z||ea)&&!L&&(L=setTimeout(function(){L=0,d()},50)),E=!1}}function y(e){t(j,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(c();P.length;){e=P.shift();if(null===e[0])return l(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}}var E,S,x,k,L,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},_={},D={},P=[],j={},F={},I={},q=1,W=1;return k={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(D,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(i)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(j[n]=r,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,r=e.id,i=o(e.prefix);this.depMaps.push(i),f(i,"defined",u(this,function(i){var s,c;c=m(I,this.map.id);var p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(i.normalize&&(p=i.normalize(p,function(e){return n(e,d,!0)})||""),i=o(e.prefix+"!"+p,this.map.parentMap),f(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=m(O,i.id))this.depMaps.push(i),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable()}else c?(this.map.url=x.nameToUrl(c),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),l(e)}),s.fromText=u(this,function(n,i){var u=e.name,f=o(u),c=M;i&&(n=i),c&&(M=!1),a(f),t(A.config,r)&&(A.config[u]=A.config[r]);try{g.exec(n)}catch(h){return l(C("fromtexteval","fromText eval for "+r+" failed: "+h,h,[r]))}c&&(M=!0),this.depMaps.push(f),x.completeLoad(u),v([u],s)}),i.load(e.name,v,s,A))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var r,i;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e;if(r=m(k,e.id)){this.depExports[n]=r(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.undefed||(this.defineDep(n,e),this.check())})),this.errback?f(e,"error",u(this,this.errback)):this.events.error&&f(e,"error",u(this,function(e){this.emit("error",e)}))}r=e.id,i=O[r],!t(k,r)&&i&&!i.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(O,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:O,defined:j,urlFetched:F,defQueue:P,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(I[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t,null,!0))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(i,s){function u(n,r,f){var c,h;return s.enableBuildCallback&&r&&G(r)&&(r.__requireJsBuild=!0),"string"==typeof n?G(r)?l(C("requireargs","Invalid require call"),f):i&&t(k,n)?k[n](O[i.id]):g.get?g.get(x,n,i,u):(c=o(n,i,!1,!0),c=c.id,t(j,c)?j[c]:l(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(w(),x.nextTick(function(){w(),h=a(o(null,i)),h.skipMap=s.skipMap,h.init(n,r,f,{enabled:!0}),d()}),u)}return s=s||{},U(u,{isBrowser:z,toUrl:function(e){var t,r=e.lastIndexOf("."),s=e.split("/")[0];return-1!==r&&("."!==s&&".."!==s||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return t(j,o(e,i,!1,!0).id)},specified:function(e){return e=o(e,i,!1,!0).id,t(j,e)||t(O,e)}}),i||(u.undef=function(e){c();var t=o(e,i,!0),n=m(O,e);n.undefed=!0,r(e),delete j[e],delete F[t.url],delete D[e],T(P,function(t,n){t[0]===e&&P.splice(n,1)}),n&&(n.events.defined&&(D[e]=n.events),h(e))}),u},enable:function(e){m(O,e.id)&&a(e).enable()},completeLoad:function(e){var n,r,s=m(A.shim,e)||{},o=s.exports;for(c();P.length;){r=P.shift();if(null===r[0]){r[0]=e;if(n)break;n=!0}else r[0]===e&&(n=!0);y(r)}r=m(O,e);if(!n&&!t(j,e)&&r&&!r.inited){if(A.enforceDefine&&(!o||!da(o)))return i(e)?void 0:l(C("nodefine","No define call for "+e,null,[e]));y([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,s;(r=m(A.pkgs,e))&&(e=r);if(r=m(I,e))return x.nameToUrl(r,t,n);if(g.jsExtRegExp.test(e))r=e+(t||"");else{r=A.paths,e=e.split("/");for(i=e.length;0<i;i-=1)if(s=e.slice(0,i).join("/"),s=m(r,s)){H(s)&&(s=s[0]),e.splice(0,i,s);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+A.urlArgs):r},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!i(t.id))return l(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z="undefined"!=typeof window&&"undefined"!=typeof navigator&&!!window.document,ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,r){var i,s="_";return!H(e)&&"string"!=typeof e&&(i=e,H(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=g.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.18",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=g.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,J=r,D?y.insertBefore(r,D):y.appendChild(r),J=null,r;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){y||(y=e.parentNode);if(I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((r=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),r=N),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}})(this),define("requireLib",function(){}),define("mediascape/Sharedstate/sharedstate",["socketio"],function(e){var t=function(t,n){var r=null,s={},o=Object.freeze({CONNECTING:"connecting",OPEN:"open",CLOSED:"closed"}),u={change:[],remove:[],readystatechange:[],presence:[]},a={},f={},l=!1,c={},h=function(e,t){n.logToConsole===!0&&console.info(e,t)},p=function(e,t){n.logToConsole===!0&&console.error(e,t)};n=n||{},n instanceof String&&(n={}),n.reconnection!==!1&&(n.reconnection=!0),n.agentid||(h("SHAREDSTATE - agentID undefined, generating one for this session"),n.agentid=(Math.random()*999999999).toFixed(0)),n.getOnInit!==!1&&(n.getOnInit=!0),n.autoPresence!==!1&&(n.autoPresence=!0),n.autoClean!==!0&&(n.autoClean=!1),n.forceNew=!0,n.multiplex=!1,t=t||{},n.logStateInterval===!0&&setInterval(function(){h("SharedSate("+t+"):",a)},5e3);var d=function(){r=e(t,n),r.on("connect",m),r.on("disconnect",b),r.on("joined",E),r.on("status",y),r.on("changeState",w),r.on("initState",S),r.on("ssError",v),M.set("connecting"),r.connected===!0&&m()},v=function(e){p("SharedState-error",e)},m=function(){if(r.connected===!0){M.set("connecting");var e={agentID:n.agentid};n.userId&&(e.userId=n.userId),T("join",e)}},g=function(e,t,n){if(!u.hasOwnProperty(e))throw"Unsupported event "+e;var r;for(i=0;i<u[e].length;i++){r=u[e][i];if(n===undefined){if(r._immediate_pending)continue}else{if(r!==n)continue;n._immediate_pending=!1}try{r._ctx?r.call(r._ctx,t):r.call(s,t)}catch(t){p("Error in "+e+": "+r+": "+t)}}},y=function(e){h('SHAREDSTATE - got "status"',e);for(var t=0;t<e.presence.length;t++)if(e.presence[t].key&&JSON.stringify(f[e.presence[t].key])!=JSON.stringify(e.presence[t].value||!f[e.presence[t].key])){var n={key:e.presence[t].key,value:e.presence[t].value||undefined};f[e.presence[t].key]=e.presence[t].value,g("presence",n)}else h('SHAREDSTATE - reveived "presence" already saved or something wrong',e.presence[t])},b=function(){M.set("connecting"),h('SHAREDSTATE - got "disconnected"')},w=function(e){h('SHAREDSTATE - got "changeState"',e),e=e||{};for(var t=0;t<e.length;t++)if(e[t].type=="set")if(e[t].key&&JSON.stringify(a[e[t].key])!=JSON.stringify(e[t].value)){var n={key:e[t].key,value:e[t].value,type:"add"};a[e[t].key]&&(n.type="update"),a[e[t].key]=e[t].value,g("change",n)}else h('SHAREDSTATE - reveived "set" already saved or something wrong',e[t]);else if(e[t].type=="remove"&&e[t].key&&a[e[t].key]){var n={key:e[t].key,value:a[e[t].key],type:"delete"};delete a[e[t].key],g("remove",n)}},E=function(e){h('SHAREDSTATE - got "joined"',e);if(e.agentID==n.agentid)if(n.getOnInit===!0){var e=[];T("getInitState",e)}else M.set("open"),n.autoPresence===!0&&P("online");n.autoClean&&setInterval(function(){for(var e in a)if(a.hasOwnProperty(e)&&e.indexOf("__meta__")==0){var t=e.substr(8);f[t]||x(t)}},15e3)},S=function(e){h("INITSTATE",e);for(var t=0,r=e.length;t<r;t++)if(e[t].type=="set"&&e[t].key&&e[t].value&&JSON.stringify(a[e[t].key])!=JSON.stringify(e[t].value)){var i={key:e[t].key,value:e[t].value,type:"add"};a[e[t].key]=e[t].value,g("change",i)}M.set("open"),n.autoPresence===!0&&P("online")},x=function(e){if(!n.autoClean)return;h("*** Cleaning agent ",e);for(var t in a)a.hasOwnProperty(t)&&t.indexOf("__")==0&&t.indexOf("__"+e)>-1&&s.removeItem(t)},T=function(e,t){h("SHAREDSTATE - sending",t),r.emit(e,t)},N=function(e,t,n){if(l){var r={type:"set",key:e,value:t};c[e]=r}else{if(M.get()!==o.OPEN)throw"SHAREDSTATE - setItem not possible - connection status:"+M.get();if(!e)throw"SHAREDSTATE - params with error - key:"+e+"value:"+t;var i=[{type:"set",key:e,value:t}];T("changeState",i)}return s},C=function(e,t){if(l){var n={type:"remove",key:e};c[e]=n}else{if(M.get()!=o.OPEN)throw"SHAREDSTATE - removeItem not possible - connection status:"+M.get();if(!a[e])throw"SHAREDSTATE - key with error - key:"+e;var r=[{type:"remove",key:e}];T("changeState",r)}return s},k=function(){return l=!0,s},L=function(){if(M.get()!=o.OPEN)throw"SHAREDSTATE - send not possible - connection status:"+M.get();l=!1;if(Object.keys(c).length>0){var e=[],t=Object.keys(c);for(var n=0;n<t.length;n++)e.push(c[t[n]]);T("changeState",e),c={}}return s},A=function(e,t){if(e===undefined||e===null){var n=[];T("getState",n);return}e+="";if(a[e])return JSON.parse(JSON.stringify(a[e]));return},O=function(){return Object.keys(a)},M=function(){var e=o.CONNECTING;return{set:function(t){found=!1;for(key in o){if(!o.hasOwnProperty(key))continue;o[key]===t&&(found=!0)}if(!found)throw"Illegal state value "+t;if(e===o.CLOSED)return;t!==e&&(e=t,g("readystatechange",t))},get:function(){return e}}}(),_=function(e,t,n){if(!t||typeof t!="function")throw"Illegal handler";if(!u.hasOwnProperty(e))throw"Unsupported event "+e;n&&(t._ctx=n);var r=u[e].indexOf(t);return r===-1&&(u[e].push(t),t._immediate_pending=!0,setTimeout(function(){switch(e){case"change":var n=Object.keys(a);if(n.length===0)t._immediate_pending=!1;else for(var r=0,i=n.length;r<i;r++){var s={key:n[r],value:a[n[r]],type:"update"};g("change",s,t)}break;case"presence":var n=Object.keys(f);if(n.length===0)t._immediate_pending=!1;else for(var r=0,i=n.length;r<i;r++){var o={key:n[r],value:f[n[r]]};g("presence",o,t)}break;case"remove":t._immediate_pending=!1;break;case"readystatechange":g("readystatechange",M.get(),t)}},0)),s},D=function(e,t){if(u[e]!==undefined){var n=u[e].indexOf(t);n>-1&&u[e].splice(n,1)}return s},P=function(e){if(M.get()!=o.OPEN)throw"SHAREDSTATE - send not possible - connection status:"+M.get();if(!e)throw"SHAREDSTATE - params with error - state:"+e;var t={agentID:n.agentid,presence:e};return T("changePresence",t),s};return s.__defineGetter__("readyState",M.get),s.__defineGetter__("STATE",function(){return o}),s.__defineGetter__("agentid",function(){return n.agentid}),s.setItem=N,s.removeItem=C,s.request=k,s.send=L,s.getItem=A,s.keys=O,s.on=_,s.off=D,s.setPresence=P,d(),s};return t.__moduleName="sharedState",t}),define("mediascape/Agentcontext/agentcontext",[""],function(){var t=function(){var t={},n={},r=[],s={},o=[],u=function(){for(var e=0;e<o.length;e++)try{o[e].call(t)}catch(n){console.log("Error in meta-update",n)}},a=function(e,n){s[e]=n,u(),c.call(t,"keychange",e)},f=function(e){for(var r in e){if(!e.hasOwnProperty(r))continue;n[r]={currentValue:e[r].val||"undefined",callbacks:[],on:e[r].on,off:e[r].off},e[r].init?e[r].init.call(t):c.call(t,"keychange",r)}return u(),t},l=function(){var e=[];for(k in n)e.push(k);return e},c=function(e,i,s){if(e==="keychange"){for(var o=0;o<r.length;o++)try{r[o].call(t,i)}catch(u){console.log("Error in keychange handler:"+i)}return}if(!n.hasOwnProperty(e))throw"Unsupported event "+e;var a;for(var o=0;o<n[e].callbacks.length;o++){a=n[e].callbacks[o];if(s===undefined){if(a._immediate_pending)continue}else{if(a!==s)continue;s._immediate_pending=!1}try{a.call(t,i)}catch(i){console.log("Error in "+e+": "+a+": "+i)}}},h=function(i,s){if(i==="keychange"){r.splice(r.indexOf(s),e);return}if(i==="agentchange"){if(o.indexOf(s)==-1)throw"Callback not registered";o.splice(agent_update_handlers.indexOf(s),1);return}if(!n.hasOwnProperty(i))throw"Unknown parameter "+i;if(n[i].callbacks!==undefined){var u=n[i].callbacks.indexOf(s);u>-1&&n[i].callbacks.splice(u,1),n[i].callbacks.length===0&&n[i].off&&(console.log("Turning "+i+" off"),n[i].off.call(t))}return t},p=function(e,i,s){if(e==="keychange"){r.push(i),i.call(l());return}if(e==="agentchange"){console.log("*** Registered agentchange"),o.push(i);try{i.call(t)}catch(u){console.log("Error in agentchange handler",u)}return}if(!i||typeof i!="function")throw"Illegal handler";if(!n.hasOwnProperty(e))throw"Unsupported event "+e;var a=n[e].callbacks.indexOf(i);return a===-1&&(n[e].callbacks==0&&t.requestHandler.call(t,e,s||"self")===!0&&n[e].on&&(console.log("Turning "+e+" on"),n[e].on.call(t)),n[e].callbacks.push(i),i._immediate_pending=!0,setTimeout(function(){c(e,{key:e,value:n[e].currentValue},i)},0)),t},d=function(e,r){return n.hasOwnProperty(e)||(i=[],i[e]={val:r},f(i)),n[e].currentValue=r,c(e,{key:e,value:r}),t},v=function(e){if(!n.hasOwnProperty(e))throw"Unknown item "+e;return n[e].currentValue};return t.loadContextElements=f,t.load=f,t.keys=l,t.on=p,t.off=h,t.setCapability=a,t.getCapability=function(e){return s[e]},t.capabilities=function(){return s},t.setItem=d,t.getItem=v,t.requestHandler=function(e,t){return console.log("Allowing "+e+" by "+t),!0},t};return t.__moduleName="agentContext",t}),define("mediascape/Applicationcontext/applicationcontext",["mediascape/Sharedstate/sharedstate","mediascape/Agentcontext/agentcontext"],function(){function e(t){if(null==t||"object"!=typeof t)return t;var n=t.constructor();for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var t=function(t,n){if(!mediascape.agentContext)throw"Missing Mediascape agentContext, please load the correct js files";var r=mediascape.agentContext;n=n||{};var i={},s={};if(mediascape.sharedState===undefined)throw"Missing Mediascape shared state, please include the correct js files";var o=function(t){var n={},r={agentchange:[]};n.agentid=t;var i=[];w.on("change",function(e){if(e.key.indexOf("__val__"+n.agentid)==0&&r[e.key]&&r[e.key].length>0)for(var t=0;t<r[e.key].length;t++)try{r[e.key][t].call(n.publicAPI,e)}catch(i){console.log("Error in callback: "+what)}});var s=function(){var e=w.getItem("__meta__"+n.agentid);return e?e.keys:[]},o=function(){var e=w.getItem("__meta__"+n.agentid);return e?e.capabilities:[]},u=function(e,t){if(e=="agentchange"){r.agentchange.push(t);return}if(s().indexOf(e)==-1)throw"Unknown parameter "+e;var i=w.getItem("__metasub__"+w.agentid)||[],o=n.agentid+"_"+e;i.indexOf(o)==-1&&(i.push(o),w.setItem("__metasub__"+w.agentid,i)),r[e]===undefined&&(r[e]=[]),r[e].push(t);var u=w.getItem("__val__"+o);u&&t.call(n.publicAPI,e,u)},a=function(t,i){if(t=="agentchange"){r[t].splice(r[t].indexOf(i),1);return}if(s().indexOf(t)==-1)throw"Unknown parameter "+t;var o=e(w.getItem("__metasub__"+w.agentid)),u=n.agentid+"_"+t;if(!(o.indexOf(u)>-1))throw"Not subscribed to "+t;o.splice(o.indexOf(u),1),w.setItem("__metasub__"+w.agentid,o);if(!r[t]){console.log("*** Warning: Missing handler for "+t);return}r[t].splice(r[t].indexOf(u),1)},f=function(e){var t={added:{},altered:{},removed:[]};for(var s in i)e.capabilities[s]===undefined&&t.removed.push(s);for(var s in e.capabilities)i[s]===undefined?t.added[s]=e.capabilities[s]:i[s]!=e.capabilities[s]&&(t.altered[s]=e.capabilities[s]);i=e.capabilities;for(var o=0;o<r.agentchange.length;o++)try{r.agentchange[o].call(n.publicAPI,{diff:t})}catch(u){console.log("Error in meta-update",u)}},l=function(e,t,i){if(r[t]===undefined)return;for(var s=0;s<r[t].length;s++)try{r[t][s].call(n.publicAPI,t,i)}catch(o){console.log("Error in update: ",o)}},c=function(e,t){w.setItem("__val__"+n.agentid+"_"+e,t)};return n.update_value=l,n.handlers=r,n.update_meta=f,publicAPI={},publicAPI.agentid=n.agentid,publicAPI.keys=s,publicAPI.on=u,publicAPI.off=a,publicAPI.setItem=c,publicAPI.capabilities=o,n.publicAPI=publicAPI,n},u={},a={},f={},l={},c={},h={},p=function(e,t){if(E(e)==undefined){console.log("Subscription update for unknown node",e);return}t=t||w.getItem("__metasub__"+e);if(!t)return;var n=E(e).handlers,i=a[e]||[];for(var s=0;s<t.length;s++){var o=t[s].substr(0,t[s].indexOf("_")),l=t[s].substr(t[s].indexOf("_")+1);if(o===w.agentid){if(i.indexOf(l)>-1)continue;u[l]===undefined&&(u[l]=[]),u[l].push(e);if(!f[l]||f[l].length==0)f[l]=function(e){w.setItem("__val__"+w.agentid+"_"+e.key,e.value)};r.on(l,f[l])}}for(var s=0;s<i.length;s++)if(u.indexOf(i[s])==-1){var o=i[s].substr(0,i[s].indexOf("_")),l=i[s].substr(i[s].indexOf("_")+1);if(o!=w.agentid)continue;u[l]!=undefined?(u[l].splice(u[l].indexOf(i[s]),1),u[l].length==0&&r.off(l,f[l])):console.log(" *** Warning, unsub but don't have handler")}a[e]=t},d=function(e,t,n){var r=E(e);r&&r.update_value(e,t,n)},v=[],m=[],g=function(e,t){e=="agentchange"?v.push(t):(m[e]||(m[e]=[]),m[e].push(t))},y=function(e,t){if(e=="agentchange"){if(v.indexOf(t)==-1)throw"Handler not registered";v.splice(v.indexOf(t),1)}else{if(m[e].indexOf(t)==-1)throw"Handler not registered";m[e].splice(m[e].indexOf(t),1)}},b=function(e,t){if(e=="agentchange"){t.agentContext?l[t.agentid]==undefined&&(l[t.agentid]={capabilities:{},keys:[]}):(delete l[t.agentid],console.log(l)),t.diff={capabilities:{},keys:[]};if(t.agentContext){var n=t.agentContext.capabilities();for(var r in n)n.hasOwnProperty(r)&&(l[t.agentid].capabilities||(l[t.agentid].capabilities={}),l[t.agentid].capabilities[r]!=n[r]&&(t.diff.capabilities[r]=n[r]));var s=t.agentContext.keys();for(var o=0;o<s.length;o++)l[t.agentid].keys.indexOf(s[o])==-1&&t.diff.keys.push(s[o]);l[t.agentid]={capabilities:n,keys:s}}for(var o=0;o<v.length;o++)try{v[o].call(i,t)}catch(u){console.log("Error in agentchange callback: ",u),console.log("cb:",v[o])}}else for(var o=0,a=m[e].length;o<a;o++)try{m[e][o].call(i,t)}catch(u){console.log("Error in agentchange callback: ",u),console.log("cb:",m[e][o])}};n.autoPresence=!1;var w=mediascape.sharedState(t,n).on("readystatechange",function(e){if(e===w.STATE.OPEN){w.setItem("__meta__"+w.agentid,t),w.setItem("__metasub__"+w.agentid,[]),w.setPresence("online");var t={keys:r.keys(),capabilities:r.capabilities()};r.on("keychange",function(e){var t={keys:r.keys(),capabilities:r.capabilities()};w.setItem("__meta__"+w.agentid,t)}),w.on("presence",function(e){var t=e.key,n=e.value;if(e.value=="offline")s.hasOwnProperty(t)&&(s[t]=null,delete s[t],b("agentchange",{agentid:t,agentContext:null}));else if(e.value=="online"){s[t]||(s[t]=o(t));var r={added:{},altered:{},removed:[]},i=s[t].publicAPI.capabilities();if(c[t]!=undefined)for(var u in c[t])console.log(u),i[u]===undefined&&r.removed.push(u);else c[t]=[];for(var u in i)c[t][u]===undefined?r.added[u]=i[u]:c[t][u]!=i[u]&&(r.altered[u]=i[u]);c[t]=i,p(t),b("agentchange",{agentid:t,agentContext:s[t].publicAPI,diff:r})}})}}).on("change",function(e){if(e.key.indexOf("__meta__")>-1){var t=e.key.substr(8),r=s[t];r?(r.update_meta(e.value),b("agentchange",{agentid:t,agentContext:s[t].publicAPI})):n.autoremove==1&&(w.removeItem("__meta__"+t),w.removeItem("__metasub__"+t))}else if(e.key.indexOf("__metasub__")>-1){var t=e.key.substr(11);p(t,e.value)}else if(e.key.indexOf("__val__")>-1){var t=e.key.substr(7).split("_")[0],i=e.key.substr(7).split("_")[1];d(t,i,e.value)}else if(e.key.indexOf("__global__")>-1){console.log("globalVar",e.key,e.value);var o=e.key.substr(10);m[o]&&b(o,{key:o,value:e.value})}else console.log("Unknown Change:"+JSON.stringify(e))}),E=function(e){return s[e]},S=function(){s[w.agentid]==undefined&&(s[w.agentid]=o(w.agentid));var e={self:s[w.agentid].publicAPI};for(var t in s){if(t==w.agentid)continue;s[w.agentid]&&(e[t]=s[t].publicAPI)}return e},x=function(e){if(s[e.agentid]!=undefined)throw new Error("Already have agent '"+e.agentid+"'");s[e.agentid]=e,b("agentchange",{agentid:e.agentid,agentContext:e,diff:{added:e.capabilities()}})},T=function(e){if(s[e.agentid]!=e)throw new Error("Failed to remove agent '"+e.agentid+"'");delete s[e.agentid],b("agentchange",{agentid:e.agentid,agentContext:null})},N=function(e,t){e&&t&&w.setItem("__global__"+e,t)},C=function(){var e=w.keys(),t=[];for(var n=0,r=e.length;n<r;n++)e[n].indexOf("__global__")>-1&&t.push(e[n].substr(10));return t},k=function(e){return w.getItem("__global__"+e)};return i.getAgents=S,i.on=g,i.off=y,i.setItem=N,i.getItem=k,i.keys=C,i.addAgent=x,i.removeAgent=T,i};return t.__moduleName="applicationContext",t}),define("mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/explicit",[""],function(){var e=function(){var e={},t={},n=function(e){var n=[];for(var r=0;r<t.agents.length;r++){var i=t.agents[r],s=!0;for(var o in e)if(i.capabilities[o]!=e[o]){s=!1;break}s&&n.push(i)}return n},r=function(r){var i=!0;if(r.exists.length!=t.agents.length)i=!1;else if(r.exists)for(var s=0;s<r.exists.length;s++){var o=r.exists[s],u=e.behaviour.agents[o];if(n(u).length==0){i=!1;break}}else i=!1;return i},i=function(){var t={priority:e.priority,actions:[]},i=[],s=e.behaviour.rules;for(var o=0;o<s.length;o++){var u=s[o];if(r(u.conditions)==1){for(var a in u.actions){var f=e.behaviour.agents[a],l=n(f);for(var c=0;c<l.length;c++){var h=l[c],p={agent:h.id,actions:[]},d=u.actions[a];for(var v in d)d[v].load==1?p.actions.push({type:"SHOW",component:v,config:d[v]}):p.actions.push({type:"HIDE",component:v,config:d[v]});i.push(p)}}break}}return t.actions=i,t};this.init=function(n,r){console.log("=============explicit_adaptation=== [init]================="),e=n,t=r},this.onChange=function(e,n){t=n;var r=i();return r}};return e.__moduleName="explicit",e}),define("mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/affinitymatch",[""],function(){var e=function(){console.log("=============implicit_adaptation====================");var e={},t={},n=function(e){for(var n=0;n<t.agents.length;n++)if(t.agents[n].id==e)return!0;return!1},r=function(e){for(var n=0;n<t.agents.length;n++)if(t.agents[n].id==e)return t.agents[n];return null},i=function(e,t){var n=!0;for(var r=0;r<t.length;r++)if(e[t[r].capability]!=t[r].value){n=!1;break}return n},s=function(e,t){var n=0;for(var r=0;r<t.length;r++){var i=t[r].capability,s=t[r].value;i in e&&e[i]==s&&(n+=t[r].affinity)}return n},o=function(e,n){var r=[];console.log(t.agents);for(var o=0;o<t.agents.length;o++)if(i(t.agents[o].capabilities,e)==1){var u=s(t.agents[o].capabilities,n);r.push({id:t.agents[o].id,affinity:u})}return r},u=function(e,t){var n=[];for(var r in t){var i=r,s=t[r];console.log(s);var u=o(s.requirement,s.preference);if(u.length<=0)continue;var a=u.sort(function(e,t){return t.affinity-e.affinity});n.push({component:i,agent:a[0].id})}return n},a=function(){var n={priority:config.priority,actions:[]},r=u(t.agents,e),i={};for(var s=0;s<r.length;s++){var o=r[s].component,a=r[s].agent;a in i?i[a].push({type:"SHOW",component:o}):i[a]=[{type:"SHOW",component:o}]}for(var f in i)n.actions.push({agent:f,actions:i[f]});return n};this.init=function(n,r){console.log("=============affinity_matching=== [init]================="),console.log(n),config=n,t=r;for(var i=0;i<config.behaviour.length;i++){var s=config.behaviour[i],o={requirement:[],preference:[]},u=s.requirement.trim().split(")");for(var a=0;a<u.length;a++){if(u[a].indexOf("(")<0)continue;var f=u[a].split("("),l=f[0].trim(),c=f[1].trim();o.requirement.push({capability:l,value:c})}u=s.preference.trim().split(")");for(var a=0;a<u.length;a++){if(u[a].indexOf("(")<0)continue;var f=u[a].split("("),l=f[0].trim(),c=f[1].split(",")[0].trim(),h=f[1].split(",")[1].trim();o.preference.push({capability:l,value:c,affinity:h})}e[s.componentId]=o}console.log(e)},this.onChange=function(e,n){t=n;var r=a();return r}};return e.__moduleName="affinitymatch",e}),define("mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/bestfit",[""],function(){var e=function(){function n(e,t){var n=0;if(t==="screen"){var r=e.screenSize[1],i=Math.round(Math.sqrt(Math.pow(parseFloat(r.screenX),2)+Math.pow(parseFloat(r.screenY),2)));return i}if(t==="touchable"){var s="";return e["touchScreen"].presence!=undefined?s=e.touchScreen.presence:e.touchScreen==="supported"?s=!0:s=!1,s}return!1}function r(e,t){return t.length===1?!0:e._id<t[1]._id?!0:!1}function i(e,t){if(t.adaptationBehaviour.bestfit.indexOf("biggestScreenSize")!==-1){var r=n(e.capabilities,"screen");return r>8?!0:!1}if(t.adaptationBehaviour.bestfit.indexOf("touchable")!==-1){var i=n(e.capabilities,"touchable");return i?threshold=!0:!1}return!1}console.log("=============bestfitAdaptation====================");var e={},t={};this.init=function(n,r){console.log("=============bestfit=== [init]================="),console.log(n),e=n,t=r,this.components=mediascape.AdaptationToolkit.componentManager.core.getComponents();var i=n.behaviour;this.components.forEach(function(e){i.forEach(function(t){if(t.componentId===e.getAttribute("id")){e.adaptationBehaviour={};var n=[];n.push(t.needs),e.adaptationBehaviour.bestfit=t.bestfit,e.adaptationBehaviour.needs=n,e.adaptationBehaviour.required=t.required,e.adaptationBehaviour.movable=t.movable,e.adaptationBehaviour.duplicable=t.duplicable,e.adaptationBehaviour.videoLimit=t.videoLimit}})}),console.log(this.components)},this.onChange=function(s,o){var u=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation,a=o.agents;t=o;var f={priority:e.priority,actions:[]},l=a.filter(function(e){return e.id===u.getAgentId()?!0:!1})[0];console.warn("agents",a.length);try{var c=0,h=u.getAgentId();f.actions=this.components.map(function(e){var t=a.filter(function(e){return e.id===u.getAgentId()?!1:!0}),s=!1,o=0,f=!0;f=e.adaptationBehaviour.needs.every(function(e){if(e==="none")return!0;if(e==="x86"&&navigator.appVersion.indexOf("x86")===-1)return!1;if(e.toLowerCase().indexOf("screensize")>-1&&e.operation&&e.operation==="bigger"){var t=n(l.capabilities,"screen");return t>parseInt(e.value)?!0:!1}return e.toLowerCase().indexOf("touchable")>-1?this.getCapability(l.capabilities,"touchable")?!0:!1:!0},this);if(!f)return{type:"HIDE",component:e.getAttribute("id")};var c=mediascape.AdaptationToolkit.Adaptation.UIAdaptation.getScreenSize().extra;mediascape.screenX=c[1].screenX,mediascape.screenY=c[1].screenY,myScreen=Math.round(Math.sqrt(Math.pow(parseFloat(mediascape.screenX),2)+Math.pow(parseFloat(mediascape.screenY),2))),myInteractivity=n(l.capabilities,"touchable"),t=t.filter(function(t){if(e.adaptationBehaviour.needs[0]==="none")return!0;if(e.adaptationBehaviour.needs[0]==="x86")return t.capabilities["platform"].indexOf("x86")!=-1?!0:!1}),t.forEach(function(e){e.note=0,e.screen=n(e.capabilities,"screen"),e.interactivity=n(e.capabilities,"touchable")},this);var h=[],p="";return t.length>0?(t.forEach(function(t){e.adaptationBehaviour.bestfit.indexOf("biggestScreenSize")!==-1?t.screen<myScreen?h.push("1"):t.screen>myScreen?h.push("0"):r(l,a)?h.push("11"):h.push("10"):e.adaptationBehaviour.bestfit.indexOf("smallestScreenSize")!==-1&&(t.screen<myScreen?h.push("0"):t.screen>myScreen?h.push("1"):r(l,a)?h.push("11"):h.push("11"));if(e.adaptationBehaviour.bestfit.indexOf("touchable")!==-1){!t.interactivity&&myInteractivity&&h.push("1"),t.interactivity&&!myInteractivity&&h.push("0");if(t.interactivity&&myInteractivity||!t.interactivity&&!myInteractivity)r(l,a)?h.push("11"):h.push("10")}},this),h.indexOf("0")>-1?p="0":h.indexOf("10")==-1&&h.indexOf("11")==-1?p="1":h.indexOf("10")>-1?p="10":p="11"):p=1,console.log("result",p,s,i(l,e),e.nodeName),e.adaptationBehaviour["duplicable"]!=1||e.adaptationBehaviour["required"]!=1||p!="1"&&p!="10"&&p!="11"||e.nodeName.toLowerCase()==="x-media"?e.adaptationBehaviour["duplicable"]!=0||e.adaptationBehaviour["required"]!=1||p!="1"&&p!="11"||!!s||e.nodeName.toLowerCase()==="x-media"?e.adaptationBehaviour["duplicable"]!=0||e.adaptationBehaviour["required"]!=1||p!="1"&&p!="11"||!s||e.nodeName.toLowerCase()==="x-media"?e.adaptationBehaviour["duplicable"]!=1||e.adaptationBehaviour["required"]!=0||p!="1"&&p!="10"&&p!="11"||!i(l,e)||e.nodeName.toLowerCase()==="x-media"?e.adaptationBehaviour["duplicable"]==0&&e.adaptationBehaviour["required"]==0&&(p=="1"||p=="11")&&!s&&i(l,e)&&e.nodeName.toLowerCase()!=="x-media"?{type:"SHOW",component:e.getAttribute("id")}:e.adaptationBehaviour["duplicable"]!=0||e.adaptationBehaviour["required"]!=0||p!="1"&&p!="11"||!s||e.nodeName.toLowerCase()==="x-media"?e.adaptationBehaviour["required"]!=1||e.nodeName.toLowerCase()!=="x-media"||p!="1"&&p!="11"||e.adaptationBehaviour.videoLimit.indexOf("main")===-1?e.adaptationBehaviour["required"]!=1||e.nodeName.toLowerCase()!=="x-media"||p!="1"&&p!="11"||e.adaptationBehaviour.videoLimit.indexOf("other")===-1?e.adaptationBehaviour["required"]!=1||e.nodeName.toLowerCase()!=="x-media"||p!="10"&&p!="0"||e.adaptationBehaviour.videoLimit.indexOf("other")===-1?e.adaptationBehaviour["required"]!=1||e.nodeName.toLowerCase()!=="x-media"||p!="10"&&p!="0"||e.adaptationBehaviour.videoLimit.indexOf("main")===-1?e.adaptationBehaviour["required"]!=0||e.nodeName.toLowerCase()!=="x-media"||p!="1"&&p!="11"||e.adaptationBehaviour.videoLimit.indexOf("main")===-1||!i(l,e)?e.adaptationBehaviour["required"]!=0||e.nodeName.toLowerCase()!=="x-media"||p!="1"&&p!="11"||e.adaptationBehaviour.videoLimit.indexOf("other")===-1||!i(l,e)?e.adaptationBehaviour["required"]!=0||e.nodeName.toLowerCase()!=="x-media"||p!="10"&&p!="0"||e.adaptationBehaviour.videoLimit.indexOf("main")===-1||!i(l,e)?e.adaptationBehaviour["required"]!=0||e.nodeName.toLowerCase()!=="x-media"||p!="10"&&p!="0"||e.adaptationBehaviour.videoLimit.indexOf("other")===-1||!i(l,e)?{type:"HIDE",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}:{type:"HIDE",component:e.getAttribute("id")}:{type:"HIDE",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}:{type:"HIDE",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}:{type:"HIDE",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}:{type:"HIDE",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}:{type:"HIDE",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}:{type:"SHOW",component:e.getAttribute("id")}},this)}catch(p){console.log(p)}return f.agent=h,console.log(f),f}};return e.__moduleName="bestfit",e}),define("mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/userpref",[""],function(){var e=function(){var e=[],t={},n={};this.init=function(e,r){console.log("=============personal_adaptation=== [init]================="),console.log(e),t=e,n=r},this.onChange=function(e,r){n=r;var i=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation,s=r.agents,o=s.filter(function(e){return e.id===i.getAgentId()?!0:!1})[0],u={priority:t.priority,actions:[]};if(o){var a=o.capabilities.componentsStatus;if(a&&a!=="supported")for(c in a)typeof a[c]=="object"&&a[c].customCmd.length>0&&(i.getApplicationContext().getItem("reset")==="true"?(mediascape.AdaptationToolkit.Utils.removeFromArray(a[c].customCmd,"hide"),mediascape.AdaptationToolkit.Utils.removeFromArray(a[c].customCmd,"show"),setTimeout(function(){mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getApplicationContext().setItem("reset","false")},2500)):(a[c].customCmd.lastIndexOf("show")!=-1||a[c].customCmd.lastIndexOf("hide")!=-1)&&a[c].customCmd.lastIndexOf("show")>=a[c].customCmd.lastIndexOf("hide")?u.actions.push({type:"SHOW",component:a[c].selector}):a[c].customCmd.lastIndexOf("hide")!=-1&&u.actions.push({type:"HIDE",component:a[c].selector}))}return console.log(u),u}};return e.__moduleName="userpref",e}),define("mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/mdadaptation",["jquery","mediascape/Applicationcontext/applicationcontext","mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/explicit","mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/affinitymatch","mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/bestfit","mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/plugins/userpref"],function(e,t){var n={},r=null,i=Array.prototype.slice.apply(arguments),s=2;for(s=2;s<i.length;s++){var o=i[s].__moduleName;n[o]=i[s]}var u=function(){var t=undefined,i=["show","hide"],s={agents:[]},o=!1,u,a="ui",f=[],l={},h=[],p={},d=!1,v=!0,m=[],g=[],y=function(e){for(var t=0;t<g.length;t++)try{g[t].call(self,e)}catch(n){console.log("Error in agentchange callback: ",n)}},b=function(e){var t=0,n=null;for(var r=0;r<e.length;r++)e[r].priority>t&&(t=e[r].priority,n===null?n=e[r].actions:n.forEach(function(t){e[r].actions.forEach(function(e){t.component===e.component&&(t.type=e.type)})}));return n},w=function(e,t){for(var n=0;n<e.length;n++)if(e[n].agent==t)return e[n].actions},E=function(e){for(var t=0;t<s.agents.length;t++)if(s.agents[t].id==e)return!0;return!1},S=function(e){for(var t=0;t<s.agents.length;t++)if(s.agents[t].id==e)return s.agents[t];return null},x=function(e){var n=t.getItem("order_agentid")||[];return n.lastIndexOf(e)===-1&&(n.push(e),t.setItem("order_agentid",n)),n.lastIndexOf(e)},T=function(e,t){var n=S(e);if(n){r=n.capabilities.componentsStatus;if(t.length!=r.length||r==="supported"||r==="undefined")return[];var i=mediascape.AdaptationToolkit.Utils.getObjectDiff(t,r);return i.length===0&&(i=s.lastChange.diff),i}return[]},N=function(e){var t=null;if(e.type==="AGENT_JOIN"){if(E(e.agentid)==0){var n=x(e.agentid);s.agents.push({_id:n,id:e.agentid,capabilities:[],agentContext:e.agentContext})}}else if(e.type==="VALUE_CHANGE"){var r=S(e.agentid);if(!r){var n=x(e.agentid);r={_id:n,id:e.agentid,capabilities:[],agentContext:e.agentContext},s.agents.push(r),r=S(e.agentid)}for(var i in e.capabilities)r.capabilities[i]=e.capabilities[i]}else if(e.type==="AGENT_LEFT"){console.log("existing agent is leaving"),j("left",e.agentid);for(var o=0;o<s.agents.length;o++)if(s.agents[o].id==e.agentid){console.log("remove it from the list"),s.agents.splice(o,1);break}}},C=function(e){console.log("********************* capabilities change event **********************"),console.log(e,key),e.forEach(function(e){var t=null;e.capability==="componentsStatus"&&(t=T(e.agentid,e.value)),t!=null?(e.diff&&(t=e.diff,e.capability="componentsStatus"),s.lastChange={key:e.capability,value:e.value,diff:t},s.agentid=e.agentid,t[0]&&(t[0].property==="customCmd"&&i.indexOf(t[0].newValue)===-1?a="data":a="ui")):e.capability!=="componentsStatus"&&(s.lastChange={key:e.capability,value:e.value,diff:null},s.agentid=e.agentid,a="ui");var n=S(e.agentid);n.capabilities[e.capability]=e.value})},k=function(e){var t=[];for(var n=0;n<m.length;n++){var r=m[n].onChange(e,s);r&&r.actions.length>0&&t.push(r)}console.log("before update componetsStatus",t.length,m);if(t.length>0){var i=b(t),o=i;if(o&&o.length&&o.length>0){var u={type:"FULL_UPDATE",actions:o,agentid:e.agentid};a==="ui"&&(y(u),console.log("EVENT",u));var f=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation;f.getApplicationContext().getItem("reset")&&(u.agentid=f.getAgentId()),L(u)}}},L=function(e){var t=e.actions.map(function(e){return e.type==="SHOW"?document.querySelector("#"+e.component).getAttribute("compId"):null}),n=mediascape.AdaptationToolkit.componentManager.core.getComponentsStatus(),r=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation,i=r.getLocalContext().agents.filter(function(t){return r.getAgentId()===t.id&&e.agentid===r.getAgentId()?!0:!1})[0];if(i){var o=i.capabilities.componentsStatus;if(o==="undefined"||o==="supported"||!o)o=mediascape.AdaptationToolkit.componentManager.core.getComponents();var u=o.map(function(e){e.compId=e.compId?e.compId:e.getAttribute("compId"),e.selector=e.selector?e.selector:e.getAttribute("id");if(t.indexOf(e.compId)>-1){var n={};return n.show=!0,n.compId=e.compId,n.selector=e.selector,n.customCmd=e.customCmd||[],n}var n={};return n.show=!1,n.compId=e.compId,n.selector=e.selector,n.customCmd=e.customCmd||[],n},this);u=u||[];var a=[];n.length>0&&(a=T(i.id,u));if(a&&(a.length>0||n.length===0)){mediascape.AdaptationToolkit.componentManager.core.setComponentsStatus(u);var f=new CustomEvent("onComponentsChange",{detail:{type:"localChange",cmps:u,agentid:i.id}});document.dispatchEvent(f),r.notifyUpdateContext(s,"cmp_changed",s.agentid)}}else{var l=r.getLocalContext().agents.filter(function(t){return t.id===e.agentid?!0:!1})[0],a=T(e.agentid,l.capabilities.componentsStatus),f=new CustomEvent("onComponentsChange",{detail:{type:"localChange",cmps:u,agentid:i.id}});document.dispatchEvent(f),console.log("other agent change <<<<<><")}},A=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation;e.contextType==="agentChange"&&N(e),e.contextType==="capabilityChange"&&C(e);var n=s.agents.every(function(e){return e.capabilities.hasOwnProperty("touchScreen")&&e.capabilities.hasOwnProperty("screenSize")?!0:!1});n&&E(t.getAgentId())&&(e.contextType==="capabilityChange"?k(e[0]):k(e))},O=function(e){console.log("subscribe agent capabilities",f),p[e.agentid]={contextType:"capabilityChange",time:(new Date).getTime(),changes:[],oldtime:(new Date).getTime()};var t=0;for(t=0;t<f.length;t++){var n=f[t],r=e.diff.capabilities;r.hasOwnProperty(n)==1&&(console.log("subscribe to the change of "+n+" for agent id = "+e.agentid),e.agentContext.on(n,function(t,n){console.log("capture");if(t&&n){var r={};r.type="CAPABILITY_CHANGE",r.agentid=e.agentid,r.capability=t,r.value=n,r.agentContext=e.agentContext;var i=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgentId();if(e.agentid===i&&t==="layoutEvent"&&n!=""&&n!="supported"){mediascape.AdaptationToolkit.Adaptation.UIAdaptation.useLayout(n);var s=new CustomEvent("layoutEvent",{detail:{layoutName:n}});document.dispatchEvent(s),mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgents().self.setItem("layoutEvent","")}if(l.groupCapacities){p[e.agentid].time=(new Date).getTime();var o=Math.abs(p[e.agentid].oldtime-p[e.agentid].time);if(o>600)clearTimeout(p[e.agentid].timeout),p[e.agentid].changes.contextType="capabilityChange",p[e.agentid].changes.push(r),A(p[e.agentid].changes),p[e.agentid].oldtime=(new Date).getTime(),p[e.agentid].changes=[];else{p[e.agentid].changes.push(r),p[e.agentid].changes.contextType="capabilityChange";var u=p,a=e.agentid;console.log("timeout",!p[e.agentid].timeout),p[e.agentid].timeout||function(t,n){t[n].timeout=setTimeout(function(){t[n].oldtime=(new Date).getTime(),console.log("NO STACK",t[n].changes,t[n].oldtime,t[n].timeout),A(t[n].changes),t[e.agentid].timeout=undefined},1e3)}(p,e.agentid)}}else p[e.agentid].changes.push(r),p[e.agentid].changes.contextType="capabilityChange",A(p[e.agentid].changes),p[e.agentid].changes=[]}},e.agentid))}},M=function(e){if(e.agentContext==null){P();var t={};t.type="AGENT_LEFT",t.agentid=e.agentid,t.value="left",t.contextType="agentChange",console.log("^^^^^^^^^^^^^^^^^^^^^^^"+e.agentid+"left==============="),setTimeout(function(){A(t)},500),j("left",e.agentid)}else if(e.agentContext){var t={};t.type="VALUE_CHANGE",t.agentid=e.agentid,t.value="value_change",t.key=e.key,t.contextType="agentChange",t.capabilities=e.diff.capabilities,t.agentContext=e.agentContext,A(t),O(e);var n=S(e.agentid);if(Object.keys(e.diff.capabilities).length===0&&!n.notified){var r=e.agentid;P();var i=setInterval(function(){if(n.capabilities&&n.capabilities.componentsStatus){var t=mediascape.AdaptationToolkit.componentManager.core.getComponents().length;n.capabilities.componentsStatus.length===t&&typeof n.capabilities.componentsStatus!="string"&&(clearInterval(i),n.notified=!0,d=!0,j("join",e.agentid),console.log("^^^^^^^^^^^^^^^^^^^^^^^"+e.agentid+"join==============="),mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getApplicationContext().setItem("reset","false"))}},1e3)}console.groupEnd()}},_=function(e){};this.setContext=function(e){s=e;var t=S(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgentId()),n={};n.type="CAPABILITY_CHANGE",n.agentid=t.id,n.capability="componentsStatus",n.value=t.capabilities.componentsStatus,console.log("^^^^^^^^^^^^^^^^^^^^^^^"+t.agentid+"Reset comopnentsStatus==============="),k(n)};var D=function(e){},P=function(){console.log("RESETING!!!"),t.setItem("reset","true")},H=function(e){var t=[];l=e,t.push(l.explicitRules);var r=0;for(r in l.implicitRules)t.push(l.implicitRules[r]);t.push(l.userPreferences);var i=0;for(i=0;i<t.length;i++){var o=t[i];if(o.enabled==1){var u=new n[o.name];u.init(o,s),m.push(u),console.log("initplugin1");var a=0;for(a=0;a<o.capabilities.length;a++)f.indexOf(o.capabilities[a])<0&&f.push(o.capabilities[a]);console.log("initplugin2")}}console.log("initplugin3")},B=function(n){e.ajaxSetup({cache:!0}),e.getJSON(n,function(e){if(e["userPreferences"].enabled==1){var n={};n.operation={init:function(){this.setCapability("operation","supported")}},mediascape.agentContext.load(n),console.log("=============hook adaptation contextual menu"),D(e.userPreferences.behaviour)}console.log("hementxeeee"),H(e),t.on("agentchange",M),e.applicationAttributes.forEach(function(e){t.on(e,function(e){var t=new CustomEvent("appAttributeChange",{detail:{key:e.key,value:e.value}});document.dispatchEvent(t)})})}).error(function(){alert("error parsing rule JSON")})};this.getRules=function(){return l},this.init=function(e,n){console.log("===================init adaptation engine============"),t=n||t,u=t.getAgents().self.agentid,B(e)},this.setPriority=function(e,t){},this.on=function(e,t){if(e!="actionchange")throw"incorrect callback"+e;g.push(t)},this.off=function(e,t){if(e!="actionchange")throw"incorrect callback: "+e;if(g.indexOf(t)==-1)throw"handler not registered";g.splice(g.indexOf(t),1)},this.startApplicationContext=function(){var e="Mediascape";map=mediascape.mappingService({maxTimeout:8e3}),mediascape.AdaptationToolkit.Utils.getUrlVar("group")?this.GROUP_ID=mediascape.AdaptationToolkit.Utils.getUrlVar("group"):this.GROUP_ID="mediascape"+mediascape.AdaptationToolkit.Utils.createGroupId();var n=this;map.getGroupMapping(n.GROUP_ID).then(function(e){t||(t=mediascape.applicationContext(e.group,{autoClean:!0})),u=t.getAgents().self.agentid;var n=new CustomEvent("applicationContext-ready",{detail:"application context ready"});document.dispatchEvent(n)})},this.getAgents=function(){return t.getAgents()},this.getApplicationContext=function(){return t},this.getAgentId=function(){return u},this.getLocalContext=function(){return s},this.notifyUpdateContext=function(e,t,n){var r=new CustomEvent("contextUpdate",{detail:{context:e,type:t,agentid:n}});document.dispatchEvent(r)};var j=function(e,t){setTimeout(function(){var n=S(t),r=n!=null?n.capabilities.platform:"unknown",i=new CustomEvent("agentChange",{detail:{status:e,agentid:t,profile:r}});document.dispatchEvent(i)},0)};this.changeAgentlayout=function(e,t){var n=s.agents,r=n.filter(function(t){return t.id===e?!0:!1})[0];if(!r)throw new Error("agent does not exits on remote layout change");r.agentContext.setItem("layoutEvent",t)},this.setRemoteAgentComponentStatus=function(e,t,n){var r=this,o=s.agents,u=[];if(o.length===0)throw new Error("no agent registered");var a=null;o.forEach(function(r){if(r.id===e){u=r.capabilities.componentsStatus;for(c in u)u[c].compId===t&&(a=r,u[c].customCmd.push(n),i.indexOf(n)>-1?u.eventType="ui":u.eventType="data")}});if(a!=null)if(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgents().self.agentid===e){var f=S(e);mediascape.agentContext.setItem("componentsStatus",u),u.eventType!=="data"?setTimeout(function(){A({type:"VALUE_CHANGE",agentid:e,diff:[{property:"customCmd",newValue:n,compId:t}]})},0):setTimeout(function(){s.lastChange.diff=[{property:"customCmd",newValue:n,compId:t}],mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.notifyUpdateContext(s,"cmp_changed",e),console.log("DATA",s)},0)}else a.agentContext.setItem("componentsStatus",u);else console.warn("No change made it",e,t,n)},this.setAppAttribute=function(e,n){t.setItem(e,n)}};return u.__moduleName="multiDeviceAdaptation",u}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor",[],function(){var e=function(e){this.name=e,this.onComponentsChange=function(e){},this.onOrientationChange=function(e){},this.render=function(t){},this.checkForImplementation=function(){console.group("Layout "+e);if(!this.onComponentsChange||this.onComponentsChange.getBody().trim().length<4)console.warn("You must implement onComponentsChange function");else if(!this.onOrientationChange||this.onOrientationChange.getBody().trim().length<4)console.warn("You must implement onOrientationChange function");else if(!this.render||this.render.getBody().trim().length<4)console.warn("You must implemented render function");else if(!this.onLayoutChangeEvent||this.onLayoutChangeEvent.getBody().trim().length<4)console.warn("You must implemented onLayoutChangeEvent function");else{if(!(!this.onResizeEvent||this.onResizeEvent.getBody().trim().length<4))return!this.onActivity||this.onActivity.getBody().trim().length<4?(console.warn("You could need onActivity function but it is not implemented"),console.groupEnd(),!0):(console.log("0 errors"),console.groupEnd(),!0);console.warn("You must implemented onResizeEvent function")}console.groupEnd()}};return e.__moduleName="layoutConstructor",e}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/pip",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t,n=new e("pip");n.listeners=[];var r=[];return n.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var i=0;i<t.length;i++)t[i].style.width="",t[i].style.height="",t[i].style.gridColumn="",t[i].style.gridRow="",t[i].className="",t[i].style.order="",t[i].style.position="",t[i].style.backgroundColor="",t[i].style.marginLeft="",t[i].style.marginTop="",t[i].style.float="",t[i].style.zIndex="",t[i].style.boxShadow="",t[i].style.borderLeft="",t[i].style.animationName="",t[i].style.animationDuration="",t[i].style.left="",t[i].style.transformOrigin="",t[i].style.outline="",t[i].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var i=1;i<t.length;i++)document.querySelector("#compDiv"+i)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+i));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var i=0;i<t.length;i++)document.querySelector("#name"+t[i].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[i].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var i=0;i<t.length;i++)if(document.querySelector("#swContainer").querySelector("#"+t[i].id)){var s=document.querySelector("#"+t[i].id);componentsContainer.appendChild(s)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")));var o=this,u=0;mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0),e.forEach(function(e,t){!function(i){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(r[i]);var t=this;r[i]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),n.listeners.push(s)}(t)})},n.render=function(e,n,r){document.body.style.backgroundColor="white",document.body.style.padding="";var i=document.querySelector("#componentsContainer");i.style.display="inline-block",i.style.overflowX="hidden";var s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=s-20-Math.round(.33*s),u=Math.round(s*.33),a=e.length-1,f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=[];l=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});for(var c=0;c<l.length;c++)l[c].style.position="absolute";var h=[];if(n!=1&&n!=0){t=l[0];for(var c=1;c<l.length;c++)h.push(l[c])}else{t=r;for(var c=0;c<l.length;c++)l[c].id!==r.id&&h.push(l[c])}var p=[],d=10;p.push(20);var v=!0;for(var c=0;c<a;c++){comp_height=u*h[c].lproperties.propy/h[c].lproperties.propx;if(d+comp_height+10>f-0){v=!1;break}d=d+comp_height+10,p.push(comp_height),p.push(10)}if(v===!0){p.push(f-d),t.style.marginLeft="0px",t.style.width=s+10+"px",t.style.height=f+"px",t.style.marginTop="0px",t.style.backgroundColor="white",t.style.zIndex="1",t.className="",usedHeight=0;for(var c=0;c<a;c++)h[c].style.marginLeft=o+"px",h[c].style.width=u+"px",h[c].style.height=p[2*c+1],h[c].style.marginTop=usedHeight+p[2*c]+"px",h[c].style.backgroundColor="black",h[c].style.zIndex="2",usedHeight=usedHeight+p[2*c]+p[2*c+1],h[c].className="right-content-panel"}else{var m=parseInt((f-70)/a)-10;t.style.marginLeft="0px",t.style.width=s+10+"px",t.style.height=f+"px",t.style.marginTop="0px",t.style.backgroundColor="white",t.style.zIndex="1",t.className="";for(var c=0;c<a;c++)h[c].style.marginLeft=o+"px",h[c].style.width=u+"px",h[c].style.height=m+"px",h[c].style.marginTop=20+c*m+c*10+"px",h[c].style.backgroundColor="black",h[c].style.zIndex="2",h[c].className="right-content-panel"}mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},n.onOrientationChange=function(e){console.log("test")},n.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var i=document.querySelector("#"+e[t].id);componentsContainer.appendChild(i)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery();var s=this,o=0;mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0),e.forEach(function(e,t){!function(i){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(r[i]);var t=this;r[i]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),n.listeners.push(s)}(t)})},n.onPriorizeComponent=function(e){var t=e,n=!0,r=this.cmps;this.render(r,n,t)},n.onResizeEvent=function(e){console.log("layout changed");var n=!0;for(var r=0;r<e.length;r++)e[r].style.width="",e[r].style.height="",e[r].style.gridColumn="",e[r].style.gridRow="",e[r].style.order="";document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));var i=t;this.render(e,n,i),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},n.unload=function(e){n.listeners.forEach(function(t){for(var n=0;n<e.length;n++)e[n].removeEventListener("mousemove",t,!0),e[n].removeEventListener("mousemove",t,!1),clearTimeout(r[n])},this),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!1)},n.__moduleName="pipLayout",n}),window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/menu",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("menu"),n="";return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.render=function(e,t,n){document.body.style.backgroundColor="white",document.body.style.padding="";var r=document.querySelector("#componentsContainer");r.style.display="inline-block",r.style.gridAutoFlow="",r.style.overflowX="";var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=e.length-1,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;main_comp_height=Math.round(.95*(o+10));var u=Math.round(.05*(o+10)),a=parseInt((i-20)/s),f=[];f=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});var l=document.createElement("style");l.type="text/css",l.id="layout_classes";var c=2+s*4;for(var h=0;h<s+1;h++)if(h===0)l.innerHTML=".class0 {background-color:white;object-fit:fill;width:"+(i+10)+"px; height:"+(main_comp_height+u)+"px;z-index:1;}",document.getElementsByTagName("head")[0].appendChild(l),n!=1&&n!=0&&t!=1&&t!=0&&(f[h].className="class0",f[h].style.display="block");else{var p=4*h-1;l.innerHTML=l.innerHTML+".class"+h+" {}",document.getElementsByTagName("head")[0].appendChild(l),n!=1&&n!=0&&t!=1&&t!=0&&(f[h].className="class"+h,f[h].style.display="none")}if(t===!0){for(var h=1;h<f.length;h++){var d=document.createElement("span");d.id="compDiv"+h,d.innerHTML=document.querySelector(".class"+h).getAttribute("name")||document.querySelector(".class"+h).id,d.style.width=a,d.style.height=Math.round(.05*o)+"px",d.style.marginLeft=(h-1)*parseInt(a)+10+"px",d.style.textAlign="center",d.verticalAlign="middle",d.style.lineHeight=Math.round(.05*o)+"px",d.style.fontSize=.4*u+"px",d.style.fontFamily="arial",d.style.zIndex=3,d.style.cursor="pointer",d.style.color="#fff",d.style.position="absolute",d.style.bottom=0;function v(e){e.srcElement.style.borderBottom="",e.srcElement.style.background="",e.srcElement.style.fontWeight="",e.srcElement.style.height=Math.round(.05*o)+"px"}d.addEventListener("mouseout",v,!0);function m(e){e.srcElement.style.background="#003545",e.srcElement.style.borderBottom="5px solid lightgreen",e.srcElement.style.fontWeight="bold",e.srcElement.style.height=Math.round(.05*o)-5+"px"}d.addEventListener("mouseover",m,!0),d.onclick=function(){var e=event.srcElement.id.split("compDiv")[1];document.querySelector("#compDiv"+e).innerHTML=document.querySelector(".class0").getAttribute("name")||document.querySelector(".class0").id;var t=document.querySelector(".class0").id;document.querySelector(".class"+e).className="class0",document.querySelector("#"+t).className="class"+e,document.querySelector(".class0").style.display="block",document.querySelector(".class"+e).style.display="none"},d.ontap=function(){var e=event.srcElement.id.split("compDiv")[1];document.querySelector("#compDiv"+e).innerHTML=document.querySelector(".class0").getAttribute("name")||document.querySelector(".class0").id;var t=document.querySelector(".class0").id;document.querySelector(".class"+e).className="class0",document.querySelector("#"+t).className="class"+e,document.querySelector(".class0").style.display="block",document.querySelector(".class"+e).style.display="none"},r.appendChild(d)}var g=document.createElement("div");g.style.position="absolute",g.style.width=i+10+"px",g.style.height=Math.round(.05*(o+10))+"px",g.style.zIndex=2,g.id="menu_container",g.style.background="rgb(0, 64, 80);",g.style.background="linear-gradient(#003040, #002535)",g.style.borderWidth="0 1px",g.style.bottom=0,r.appendChild(g)}},t.onOrientationChange=function(e){console.log("test")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.onResizeEvent=function(e){console.log("layout changed");var t=!0,n=!0;for(var r=0;r<e.length;r++)e[r].style.width="",e[r].style.height="",e[r].style.gridColumn="",e[r].style.gridRow="",e[r].style.order="";document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var r=1;r<e.length;r++)document.querySelector("#compDiv"+r)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+r));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container")),this.render(e,n,t),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.onActivity=function(e){var t=!0;for(var n=1;n<e.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes")),document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container")),this.render(e,t);var r=this;return this.timer=setTimeout(function(){t=!1;for(var n=1;n<e.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container")),document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes")),r.render(e,t)},3e3),this.timer},t.unload=function(e){clearTimeout(this.timer)},t.__moduleName="menuLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/horizontal",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("horizontal");return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.render=function(e){document.body.style.backgroundColor="white",document.body.style.padding="";var t=document.querySelector("#componentsContainer");t.style.display="inline-block",t.style.gridAutoFlow="",t.style.overflow="hidden",t.style.height="100%";var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=e.length;n+=10;var s=Math.round((r+10)/i),o=[];o=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});for(var u=0;u<o.length;u++)o[u].style.width=n+"px",o[u].style.height=s+"px",o[u].style.backgroundColor="black";mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.onOrientationChange=function(e){console.log("test")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.onResizeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].className="";document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes")),this.render(e),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.unload=function(e){},t.__moduleName="horizontalLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/customGrid",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("customGrid");return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")));var i=function(){document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"));for(var t=0;t<e.length;t++)e[t].style.top=e[t].offsetTop+"px",e[t].style.left=e[t].offsetLeft+"px";for(var t=0;t<e.length;t++)e[t].style.position="absolute";var n=document.createElement("drag-resize");componentsContainer.appendChild(n)},s=this,o=function(){if(document.querySelector("drag-resize")!=null){componentsContainer.removeChild(document.querySelector("drag-resize"));var t=[];for(var n=0;n<e.length;n++)e[n].lproperties.propx=e[n].style.width.split("px")[0],e[n].lproperties.propy=e[n].style.height.split("px")[0],e[n].lproperties.rwidth=e[n].style.width,e[n].style.position="",t.push(Math.sqrt(Math.pow(parseInt(e[n].style.top.split("px")[0]),2)+Math.pow(parseInt(e[n].style.left.split("px")[0]),2)));var r=new Array(t.length);for(var n=0;n<t.length;++n)r[n]=n;r.sort(function(e,n){return t[e]<t[n]?-1:t[e]>t[n]?1:0});for(var n=0;n<e.length;n++)e[r[n]].lproperties.order=n+1;s.render(e)}},u=function(){document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))};mediascape.AdaptationToolkit.uiComponents.customPanel(i,o,u)},t.render=function(e){document.body.style.backgroundColor="white",document.body.style.padding="";var t=document.querySelector("#componentsContainer");t.style.overflowX="",t.style.display="grid",t.style.gridAutoFlow="row dense";var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=Math.round(n/10),s=Math.round(r/10),o=n/i,u=r/s;t.style.gridTemplateColumns="repeat("+i+","+o+"px)",t.style.gridTemplateRows="repeat("+s+","+u+"px)";for(var a=0;a<e.length;a++)e[a].style.order=e[a].lproperties.order,e[a].style.gridColumn="span "+Math.round(parseInt(e[a].lproperties.rwidth.split("px")[0])/o),e[a].style.width=Math.round(parseInt(e[a].lproperties.rwidth.split("px")[0])/o)*o+"px",e[a].style.height=Math.round(parseInt(e[a].lproperties.rwidth.split("px")[0])/o)*o*e[a].lproperties.propy/e[a].lproperties.propx+"px",e[a].style.gridRow="span "+Math.round(parseInt(e[a].style.height.split("px")[0])/u),e[a].style.backgroundColor="black"},t.onOrientationChange=function(e){console.log("test")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")));var r=function(){document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"));for(var t=0;t<e.length;t++)e[t].style.top=e[t].offsetTop+"px",e[t].style.left=e[t].offsetLeft+"px";for(var t=0;t<e.length;t++)e[t].style.position="absolute";var n=document.createElement("drag-resize");componentsContainer.appendChild(n)},i=this,s=function(){if(document.querySelector("drag-resize")!=null){componentsContainer.removeChild(document.querySelector("drag-resize"));var t=[];for(var n=0;n<e.length;n++)e[n].lproperties.propx=e[n].style.width.split("px")[0],e[n].lproperties.propy=e[n].style.height.split("px")[0],e[n].lproperties.rwidth=e[n].style.width,e[n].style.position="",t.push(Math.sqrt(Math.pow(parseInt(e[n].style.top.split("px")[0]),2)+Math.pow(parseInt(e[n].style.left.split("px")[0]),2)));for(var n=0;n<e.length;n++)e[n].style.top="",e[n].style.left="";var r=new Array(t.length);for(var n=0;n<t.length;++n)r[n]=n;r.sort(function(e,n){return t[e]<t[n]?-1:t[e]>t[n]?1:0});for(var n=0;n<e.length;n++)e[r[n]].lproperties.order=n+1;i.render(e)}},o=function(){document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))};mediascape.AdaptationToolkit.uiComponents.customPanel(r,s,o)},t.onResizeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].className="";document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes")),this.render(e)},t.unload=function(e){},t.__moduleName="customGridLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/accordion",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("accordion");t.listeners=[];var n="",r="",i=[];return t.onComponentsChange=function(e){this.cmps=e;var n=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var r=0;r<n.length;r++)n[r].style.width="",n[r].style.height="",n[r].style.gridColumn="",n[r].style.gridRow="",n[r].className="",n[r].style.order="",n[r].style.position="",n[r].style.backgroundColor="",n[r].style.marginTop="",n[r].style.marginLeft="",n[r].style.float="",n[r].style.zIndex="",n[r].style.boxShadow="",n[r].style.borderLeft="",n[r].style.animationName="",n[r].style.animationDuration="",n[r].style.left="",n[r].style.transformOrigin="",n[r].style.outline="",n[r].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var r=1;r<n.length;r++)document.querySelector("#compDiv"+r)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+r));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container")),document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu"));for(var r=0;r<n.length;r++)document.querySelector("#name"+n[r].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+n[r].id));document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var r=0;r<n.length;r++)if(document.querySelector("#swContainer").querySelector("#"+n[r].id)){var s=document.querySelector("#"+n[r].id);componentsContainer.appendChild(s)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0),e.forEach(function(e,n){!function(r){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(i[r]);var t=this;i[r]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),t.listeners.push(s)}(n)})},t.render=function(e){document.body.style.backgroundColor="white",document.body.style.padding="";var n=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var i=0;i<n.length;i++)n[i].className="",n[i].style.width="",n[i].style.height="",n[i].style.order="";var s=document.querySelector("#componentsContainer");s.style.display="inline-block",s.style.overflowX="hidden",s.style.whiteSpace="nowrap";var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;o-=0;var u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=e.length,f=o/a;s.style.height=u;var l=[];l=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});if(l.length===1)l[0].style.position="absolute",l[0].style.width=o+"px",l[0].style.height=u-50+"px",l[0].style.backgroundColor="white",l[0].style.marginLeft=0,l[0].style.float="left",l[0].style.zIndex=1,l[0].style.boxShadow="0 0 15px 5px rgba(0, 0, 0, 0.5)",l[0].style.borderLeft="1px solid #888";else for(var i=0;i<e.length;i++){l[i].style.position="absolute",l[i].style.width=f+"px",l[i].style.height=u-50+"px",l[i].style.backgroundColor="white",l[i].style.marginLeft=f*i,l[i].style.float="left",l[i].style.zIndex=i,l[i].style.boxShadow="0 0 15px 5px rgba(0, 0, 0, 0.5)",l[i].style.borderLeft="1px solid #888",!function(n){function i(e){this.timeout&&clearTimeout(this.timeout),e.srcElement=e.srcElement||e.target,r===e.srcElement.id&&clearTimeout(this.timeout),this.id===r?clearTimeout(this.timeout):this.timeout=setTimeout(a,1500)}function u(e){clearTimeout(this.timeout)}function a(){for(var e=0;e<l.length;e++)l[e].id===l[n].id?(l[n].style.width=.6*o+"px",l[n].style.animationName="",l[n].style.animationDuration="",l[n].style.marginLeft=.4*o/(l.length-1)*e+"px",s.querySelector("#name"+l[n].id).style.width=.6*o+"px",s.querySelector("#name"+l[n].id).style.borderLeft="10px solid lightgreen",s.querySelector("#name"+l[n].id).style.left=.4*o/(l.length-1)*e-8+"px",r=l[n].id):(l[e].style.width=.4*o/(l.length-1)+"px",s.querySelector("#name"+l[e].id).style.borderLeft="",s.querySelector("#name"+l[e].id).style.width=.4*o/(l.length-1)+"px",e<n&&(l[e].style.animationName="shrink",l[e].style.animationDuration="1s",l[e].style.marginLeft=.4*o/(l.length-1)*e+"px",s.querySelector("#name"+l[e].id).style.left=.4*o/(l.length-1)*e-8+"px"),e>n&&(l[e].style.animationName="grow",l[e].style.animationDuration="1s",l[e].style.marginLeft=.4*o/(l.length-1)*(e-1)+.6*o+"px",s.querySelector("#name"+l[e].id).style.left=parseInt(l[e].style.marginLeft.split("px")[0])-8+"px"));mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()}l[n].removeEventListener("mouseover",i,!1),l[n].removeEventListener("mouseleave",u,!0),l[n].addEventListener("mouseover",i,!1),l[n].addEventListener("mouseleave",u,!0),t.listeners.push(i),t.listeners.push(u)}(i),document.querySelector("#name"+l[i].id)&&s.removeChild(document.querySelector("#name"+l[i].id));var c=document.createElement("div");c.id="name"+l[i].id,c.style.background="#003040",c.style.background="linear-gradient(#003040, #002535)",c.style.opacity="1",c.style.fontFamily="Nunito, arial, verdana",c.style.position="absolute",c.style.left=f*i-8,c.style.bottom="0",c.style.width=o+"px",c.style.textAlign="left",c.style.zIndex=i,c.style.boxShadow="0 0 15px 5px rgba(0, 0, 0, 0.5)",c.style.transition="all 0.5s",s.appendChild(c);var h=document.createElement("a");h.innerHTML=l[i].id,h.style.display="block",h.style.color="#fff",h.style.textDecoration="none",h.style.padding="20px",h.style.fontSize="16px",c.appendChild(h)}},t.onOrientationChange=function(e){console.log("test")},t.onPriorizeComponent=function(e){this.timeout&&clearTimeout(this.timeout);var t=document.querySelector("#componentsContainer"),n=[];n=this.cmps.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});var i="";for(var s=0;s<n.length;s++)n[s].id===e.id&&(i=s);var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;for(var u=0;u<n.length;u++)n[u].id===n[i].id?(n[i].style.width=.9*o+"px",n[i].style.marginLeft=.1*o/(n.length-1)*u+"px",t.querySelector("#name"+n[i].id).style.borderLeft="10px solid lightgreen",t.querySelector("#name"+n[i].id).style.width=.9*o+"px",t.querySelector("#name"+n[i].id).style.left=.1*o/(n.length-1)*u-8+"px",r=n[i].id):(n[u].style.width=.1*o/(n.length-1)+"px",t.querySelector("#name"+n[u].id).style.borderLeft="",t.querySelector("#name"+n[u].id).style.width=.1*o/(n.length-1)+"px",u<i&&(n[u].style.marginLeft=.1*o/(n.length-1)*u+"px",t.querySelector("#name"+n[u].id).style.left=.1*o/(n.length-1)*u-8+"px"),u>i&&(n[u].style.marginLeft=.1*o/(n.length-1)*(u-1)+.9*o+"px",t.querySelector("#name"+n[u].id).style.left=parseInt(n[u].style.marginLeft.split("px")[0])-8+"px"));mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.onLayoutChangeEvent=function(e){for(var n=0;n<e.length;n++)e[n].style.width="",e[n].style.height="",e[n].style.gridColumn="",e[n].style.gridRow="",e[n].className="",e[n].style.order="",e[n].style.position="",e[n].style.backgroundColor="",e[n].style.marginLeft="",e[n].style.marginTop="",e[n].style.float="",e[n].style.zIndex="",e[n].style.boxShadow="",e[n].style.borderLeft="",e[n].style.animationName="",e[n].style.animationDuration="",e[n].style.display="block",e[n].style.left="",e[n].style.transformOrigin="",e[n].style.outline="",e[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<e.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<e.length;n++)document.querySelector("#name"+e[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<e.length;n++)if(document.querySelector("#swContainer").querySelector("#"+e[n].id)){var r=document.querySelector("#"+e[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0),e.forEach(function(e,n){!function(r){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(i[r]);var t=this;i[r]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),t.listeners.push(s)}(n)})},t.onResizeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].className="";document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes")),this.render(e),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.unload=function(e){t.listeners.forEach(function(t){for(var n=0;n<e.length;n++)e[n].removeEventListener("mouseover",t,!0),e[n].removeEventListener("mouseleave",t,!0),e[n].removeEventListener("mouseover",t,!1),e[n].removeEventListener("mouseleave",t,!1),e[n].removeEventListener("mousemove",t,!0),e[n].removeEventListener("mousemove",t,!1),clearTimeout(i[n])},this),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!1)},t.__moduleName="accordionLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/verticalMenu",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("verticalMenu");t.listeners=[];var n="",r="",i="",s="";return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container")),document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.render=function(e,r,i){document.body.style.backgroundColor="white",document.body.style.padding="";var s=document.querySelector("#componentsContainer");s.style.display="inline-block",s.style.overflowX="";var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=[];f=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1}),f[0].style.width=o+"px",f[0].style.height=u+"px",n=f[0].id;for(var l=1;l<f.length;l++)f[l].style.display="none",f[l].style.width=o+"px",f[l].style.height=u+"px";var c=document.createElement("div");c.id="menu",c.style.display="none",c.style.position="absolute",c.style.fontFamily="Nunito, arial, verdana",c.style.top=0,c.style.right=0,c.style.zIndex="999";var h=document.createElement("h3"),p=document.createElement("img");p.src="../resources/images/menu.png",p.style.width="20px",p.style.marginTop="10px",p.style.marginRight="10px",h.style.margin="0",h.style.padding="0",h.appendChild(p),h.innerHTML=h.innerHTML+"Components",h.style.fontSize="16px",h.style.lineHeight="34px",h.style.padding="0 10px",h.style.background="#003040",h.style.background="linear-gradient(#003040, #002535)",c.appendChild(h),ul=document.createElement("ul"),ul.style.margin="0",ul.style.padding="0";for(var l=0;l<f.length;l++)li=document.createElement("li"),a=document.createElement("a"),f[l].id===n&&(a.style.borderLeft="5px solid red"),a.innerHTML=f[l].id,li.style.listStyleType="none",a.style.color="white",a.style.textDecoration="none",a.style.display="block",a.style.fontSize="12px",a.style.fontWeight="bold",a.style.lineHeight="27px",a.style.padding="0px 15px",a.style.transition="all 0.15s",a.style.cursor="pointer",!function(r){function i(e){r.innerHTML!==n&&(r.style.borderLeft=""),r.style.background=""}function s(e){r.style.background="#003545",r.innerHTML!==n&&(r.style.borderLeft="5px solid lightgreen")}function o(e){componentsContainer.querySelector("#"+e.srcElement.innerHTML).style.display="block",r.style.borderLeft="5px solid red",n=e.srcElement.innerHTML;for(var t=0;t<f.length;t++)f[t].id!==e.srcElement.innerHTML&&(f[t].style.display="none",document.querySelector("#menu").querySelectorAll("a")[t].style.borderLeft="")}r.addEventListener("click",o,!0),r.addEventListener("mouseout",i,!0),r.addEventListener("mouseover",s,!0),t.listeners.push(o),t.listeners.push(i),t.listeners.push(s)}(a),li.appendChild(a),ul.appendChild(li);c.style.background="#004050",c.style.width="250px",c.style.margin="auto 0 auto",c.style.color="white",c.style.boxShadow="0 5px 15px 1px rgba(0, 0, 0, 0.6), 0 0 200px 1px rgba(255, 255, 255, 0.5)",c.appendChild(ul),document.body.appendChild(c)},t.onOrientationChange=function(e){console.log("test")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.onResizeEvent=function(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;for(var r=0;r<e.length;r++)e[r].style.width=t+"px",e[r].style.height=n+"px";mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.onActivity=function(e){return document.querySelector("#menu").style.animationName="menuDown",document.querySelector("#menu").style.animationDuration="1s",this.downTimer=setTimeout(function(){document.querySelector("#menu")&&(document.querySelector("#menu").style.display="block")},1e3),this.timer=setTimeout(function(){document.querySelector("#menu").style.animationName="menuUp",document.querySelector("#menu").style.animationDuration="1s",this.upTimer=setTimeout(function(){document.querySelector("#menu").style.display="none"},500)},3e3),this.timer},t.unload=function(e){t.listeners.forEach(function(e){for(var t=0;t<document.querySelector("#menu").querySelectorAll("a").length;t++)document.querySelector("#menu").querySelectorAll("a")[t].removeEventListener("tap",e),document.querySelector("#menu").querySelectorAll("a")[t].removeEventListener("mouseover",e),document.querySelector("#menu").querySelectorAll("a")[t].removeEventListener("mouseout",e)},this),clearTimeout(this.downTimer),clearTimeout(this.upTimer),clearTimeout(this.timer)},t.__moduleName="verticalMenuLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/scrollHorizontal",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("scrollHorizontal");t.listeners=[],t.timeouts=[];var n="";return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.render=function(e){function l(e){for(var n=0;n<u.length;n++)u[n].style.animationName="",u[n].style.animationDuration="";f.idx=f.idx+1;if(f.idx<=u.length-1){u[f.idx].style.animationName="UpIn",u[f.idx].style.animationDuration="1s",u[f.idx-1].style.animationName="UpOut",u[f.idx-1].style.animationDuration="2s",u[f.idx].style.display="block";var r=setTimeout(function(){u[f.idx-1].style.display="none"},2e3);t.timeouts.push(r)}else{f.idx=0,u[f.idx].style.animationName="UpIn",u[f.idx].style.animationDuration="1s",u[u.length-1].style.animationName="UpOut",u[u.length-1].style.animationDuration="2s",u[f.idx].style.display="block";var i=setTimeout(function(){u[u.length-1].style.display="none"},2e3);t.timeouts.push(i)}}function c(e){for(var n=0;n<u.length;n++)u[n].style.animationName="",u[n].style.animationDuration="";f.idx=f.idx-1;if(f.idx>=0){u[f.idx].style.animationName="DownIn",u[f.idx].style.animationDuration="1s",u[f.idx+1].style.animationName="DownOut",u[f.idx+1].style.animationDuration="2s",u[f.idx].style.display="block";var r=setTimeout(function(){u[f.idx+1].style.display="none"},2e3);t.timeouts.push(r)}else{f.idx=u.length-1,u[f.idx].style.animationName="DownIn",u[f.idx].style.animationDuration="1s",u[0].style.animationName="DownOut",u[0].style.animationDuration="2s",u[f.idx].style.display="block";var i=setTimeout(function(){u[0].style.display="none"},2e3);t.timeouts.push(i)}}document.body.style.backgroundColor="white",document.body.style.padding="";var n=document.querySelector("#componentsContainer");n.style.display="inline-block",n.style.overflowX="",n.style.width="100%";var r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;r+=10;var s=document.createElement("img");s.id="upArrowImg",s.src="../resources/images/carousel_arrow_up.jpg",s.style.width="10%",s.style.left="45%",s.style.position="absolute",s.style.top=0,document.body.appendChild(s);var o=document.createElement("img");o.id="downArrowImg",o.src="../resources/images/carousel_arrow_down.jpg",o.style.width="10%",o.style.left="45%",o.style.position="absolute",o.style.bottom=0,document.body.appendChild(o);var u=[];u=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1}),this.idx=0;for(var a=0;a<u.length;a++)a===0?u[a].style.display="block":u[a].style.display="none",u[a].style.position="absolute",u[a].style.width=r+"px",u[a].style.height=i+"px";var f=this;o.addEventListener("click",l),t.listeners.push(l),s.addEventListener("click",c),t.listeners.push(c);for(var a=0;a<u.length;a++)!function(n){function r(e){if(e.yDirection>0){for(var n=0;n<u.length;n++)u[n].style.animationName="",u[n].style.animationDuration="";f.idx=f.idx-1;if(f.idx>=0){u[f.idx].style.animationName="DownIn",u[f.idx].style.animationDuration="1s",u[f.idx+1].style.animationName="DownOut",u[f.idx+1].style.animationDuration="2s",u[f.idx].style.display="block";var r=setTimeout(function(){u[f.idx+1].style.display="none"},2e3);t.timeouts.push(r)}else{f.idx=u.length-1,u[f.idx].style.animationName="DownIn",u[f.idx].style.animationDuration="1s",u[0].style.animationName="DownOut",u[0].style.animationDuration="2s",u[f.idx].style.display="block";var i=setTimeout(function(){u[0].style.display="none"},2e3);t.timeouts.push(i)}}else{for(var n=0;n<u.length;n++)u[n].style.animationName="",u[n].style.animationDuration="";f.idx=f.idx+1;if(f.idx<=u.length-1){u[f.idx].style.animationName="UpIn",u[f.idx].style.animationDuration="1s",u[f.idx-1].style.animationName="UpOut",u[f.idx-1].style.animationDuration="2s",u[f.idx].style.display="block";var s=setTimeout(function(){u[f.idx-1].style.display="none"},2e3);t.timeouts.push(s)}else{f.idx=0,u[f.idx].style.animationName="UpIn",u[f.idx].style.animationDuration="1s",u[u.length-1].style.animationName="UpOut",u[u.length-1].style.animationDuration="2s",u[f.idx].style.display="block";var o=setTimeout(function(){u[u.length-1].style.display="none"},2e3);t.timeouts.push(o)}}}u[n].addEventListener("trackend",r,!0),t.listeners.push(r)}(a)},t.onOrientationChange=function(e){console.log("test")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.onResizeEvent=function(e){console.log("layout changed");var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;for(var r=0;r<e.length;r++)e[r].style.position="absolute",e[r].style.width=t+"px",e[r].style.height=n+"px";mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.unload=function(e){for(var n=0;n<t.timeouts.length;n++)clearTimeout(t.timeouts[n]);t.listeners.forEach(function(t){for(var n=0;n<e.length;n++)e[n].removeEventListener("trackend",t,!0);document.querySelector("#downArrowImg").removeEventListener("tap",t,!0),document.querySelector("#upArrowImg").removeEventListener("tap",t,!0)},this)},t.__moduleName="scrollHorizontalLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/spinner",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){function u(e,t){var r=360/t.length;spinnerFig=document.querySelector("#spinnerFig"),e?n-=r:n+=r,spinnerFig.style.transform="rotateY("+n+"deg)"}var t=new e("spinner");t.listeners=[];var n=0,r="",i=[],s="",o="";return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var n=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var r=0;r<n.length;r++)n[r].style.width="",n[r].style.height="",n[r].style.gridColumn="",n[r].style.gridRow="",n[r].className="",n[r].style.order="",n[r].style.position="",n[r].style.backgroundColor="",n[r].style.marginTop="",n[r].style.marginLeft="",n[r].style.float="",n[r].style.zIndex="",n[r].style.boxShadow="",n[r].style.borderLeft="",n[r].style.animationName="",n[r].style.animationDuration="",n[r].style.left="",n[r].style.transformOrigin="",n[r].style.outline="",n[r].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var r=1;r<n.length;r++)document.querySelector("#compDiv"+r)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+r));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var r=0;r<n.length;r++)document.querySelector("#name"+n[r].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+n[r].id));document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var r=0;r<n.length;r++)if(document.querySelector("#swContainer").querySelector("#"+n[r].id)){var s=document.querySelector("#"+n[r].id);componentsContainer.appendChild(s)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0),e.forEach(function(e,n){!function(r){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(i[r]);var t=this;i[r]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),t.listeners.push(s)}(n)})},t.render=function(e){function m(t){u("-",e)}function g(t){u("",e)}document.body.style.backgroundColor="white",document.body.style.padding="";var r=document.querySelector("#componentsContainer");r.style.overflowX="",r.style.display="inline-block",r.style.backgroundColor="white";var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;r.style.width=i+"px",r.style.height=a+"px",i>=900?s="500px":i<900&&i>600?s="300px":s="200px",a>=450?o="300px":a<450&&a>380?o="200px":o="150px",r.querySelector("figure")&&r.removeChild(r.querySelector("figure"));var f=document.createElement("figure");f.id="spinnerFig",f.style.transformStyle="preserve-3d",f.style.minHeight="122px",f.style.transformOrigin="50% 50% -"+s,f.style.transition="1s",f.style.transform="rotateY("+n+"deg)",r.style.perspective="1200px",r.querySelector("#back")&&r.removeChild(r.querySelector("#back"));var l=document.createElement("img");l.id="back",l.src="../resources/images/back.png",l.style.width="6%",l.style.right="30px",l.style.position="absolute",l.style.zIndex="99999",l.style.top="30px",l.style.display="none",r.appendChild(l);var c=360/e.length;for(var h=0;h<e.length;h++)f.appendChild(e[h]),e[h].style.width="35%",e[h].style.height=o,e[h].style.position="absolute",e[h].style.left="30%",e[h].style.transformOrigin="50% 50% -"+s,e[h].style.outline="1px solid transparent",e[h].style.transform="rotateY("+(0-h*c)+"deg)";r.appendChild(f),r.querySelector("#arrows")&&r.removeChild(r.querySelector("#arrows"));var p=document.createElement("div");p.id="arrows";var d=document.createElement("img");d.src="resources/images/Previous-256.png",d.id="left",d.style.opacity="1";var v=document.createElement("img");v.src="resources/images/Next-256.png",v.id="right",v.style.marginLeft="1%",v.style.opacity="1",v.addEventListener("mouseover",function(){event.srcElement.style.opacity="0.5"}),v.addEventListener("mouseleave",function(){event.srcElement.style.opacity="1"}),d.addEventListener("mouseover",function(){event.srcElement.style.opacity="0.5"}),d.addEventListener("mouseleave",function(){event.srcElement.style.opacity="1"}),v.addEventListener("up",function(){v.style.opacity="0.5",setTimeout(function(e){v.style.opacity="1"},1e3)}),d.addEventListener("up",function(){d.style.opacity="0.5",setTimeout(function(e){d.style.opacity="1"},1e3)}),p.appendChild(d),p.appendChild(v),p.style.position="absolute",p.style.bottom="100px",p.style.width="15%",d.style.width="49%",v.style.width="50%",p.style.left="40%",d.addEventListener("click",m),v.addEventListener("click",g),t.listeners.push(m),t.listeners.push(g),r.appendChild(p),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.onPriorizeComponent=function(e){var u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=360/this.cmps.length,l="";for(var c=0;c<this.cmps.length;c++)this.cmps[c].id===e.id&&(l=c);var h=this;t.listeners.forEach(function(e){for(var t=0;t<h.cmps.length;t++)h.cmps[t].removeEventListener("mousemove",e,!0),h.cmps[t].removeEventListener("mousemove",e,!1),clearTimeout(i[t])}),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(this.cmps,!1),e.style.width=u+"px",e.style.height=a+"px",e.style.left="0%",e.style.transformOrigin="",e.style.outline="",e.style.transform="",e.style.animationName="spinnerToFullscreen",e.style.animationDuration="1s",e.style.zIndex="9999",e.style.backgroundColor="white",document.querySelector("#spinnerFig").style.transformStyle="",document.querySelector("#spinnerFig").style.minHeight="",document.querySelector("#spinnerFig").style.transformOrigin="",document.querySelector("#spinnerFig").style.width="100%",document.querySelector("#spinnerFig").style.height="100%",document.querySelector("#spinnerFig").style.margin="0",document.querySelector("#spinnerFig").style.transform="",document.querySelector("#spinnerFig").style.transition="";var p=document.querySelector("#componentsContainer");p.style.perspective="";for(var d=0;d<this.cmps.length;d++)l!==d&&(this.cmps[d].style.display="none");var v=document.querySelector("#back");v.style.display="block",clickedCmp=e,r=e;var h=this;mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery(),!function(u,a){function l(e){u.style.width="35%",u.style.height=o,u.style.left="30%",u.style.transformOrigin="50% 50% -"+s,u.style.outline="1px solid transparent",u.style.transform="rotateY("+(0-a*f)+"deg)",u.style.zIndex="",u.style.backgroundColor="";for(var c=0;c<h.cmps.length;c++)a!==c&&(h.cmps[c].style.display="block");document.querySelector("#spinnerFig").style.transformStyle="preserve-3d",document.querySelector("#spinnerFig").style.minHeight="122px",document.querySelector("#spinnerFig").style.transformOrigin="50% 50% -"+s,document.querySelector("#spinnerFig").style.transform="rotateY("+n+"deg)",document.querySelector("#spinnerFig").style.width="",document.querySelector("#spinnerFig").style.height="",document.querySelector("#spinnerFig").style.margin="",p.style.perspective="1200px",v.style.display="none",v.removeEventListener("tap",l,!0),document.querySelector("#spinnerFig").style.transition="1s",u.style.animationName="",u.style.animationDuration="",mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery(),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(h.cmps,!0),h.cmps.forEach(function(e,n){!function(r){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(i[r]);var t=this;i[r]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),t.listeners.push(s)}(n)}),setTimeout(function(){u.style.animationName="",u.style.animationDuration=""},1500),r=""}v.addEventListener("click",l),t.listeners.push(l)}(clickedCmp,l)},t.onOrientationChange=function(e){console.log("orientationCHANGED")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var n=0;n<e.length;n++)e[n].style.width="",e[n].style.height="",e[n].style.gridColumn="",e[n].style.gridRow="",e[n].className="",e[n].style.order="",e[n].style.position="",e[n].style.backgroundColor="",e[n].style.marginLeft="",e[n].style.marginTop="",e[n].style.float="",e[n].style.zIndex="",e[n].style.boxShadow="",e[n].style.borderLeft="",e[n].style.animationName="",e[n].style.animationDuration="",e[n].style.display="block",e[n].style.left="",e[n].style.transformOrigin="",e[n].style.outline="",e[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<e.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<e.length;n++)document.querySelector("#name"+e[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<e.length;n++)if(document.querySelector("#swContainer").querySelector("#"+e[n].id)){var r=document.querySelector("#"+e[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0),e.forEach(function(e,n){!function(r){function s(e){this.querySelector("#menuBar"+this.id).style.display="block",clearTimeout(i[r]);var t=this;i[r]=setTimeout(function(){t.querySelector("#menuBar"+t.id).style.display="none"},3e3)}e.removeEventListener("mousemove",s,!0),e.removeEventListener("mousemove",s,!1),e.addEventListener("mousemove",s),t.listeners.push(s)}(n)})},t.onResizeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].className="",e[t].style.display="block",clearTimeout(i[t]);mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!1),document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes")),this.render(e),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!0)},t.onActivity=function(e,t){if(r===""&&t.type==="keydown"){console.log(t),t.preventDefault();var n=document.querySelector("#left"),i=document.querySelector("#right");switch(t.keyIdentifier){case"Right":u("",e),i.style.opacity=.5;break;case"Up":u("",e),i.style.opacity=.5;break;case"Left":u("-",e),n.style.opacity=.5;break;case"Down":u("-",e),n.style.opacity=.5;break;default:console.warn("key event not identified at spinner")}setTimeout(function(){i.style.opacity=1,n.style.opacity=1},500)}},t.unload=function(e){t.listeners.forEach(function(t){for(var n=0;n<e.length;n++)e[n].removeEventListener("mousemove",t,!0),e[n].removeEventListener("mousemove",t,!1),clearTimeout(i[n]);document.querySelector("#left").removeEventListener("tap",t,!0),document.querySelector("#right").removeEventListener("tap",t,!0),document.querySelector("#back").removeEventListener("tap",t,!0)},this),mediascape.AdaptationToolkit.uiComponents.addMenuToCmps(e,!1)},t.__moduleName="spinnerLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/divided",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t=new e("divided");return t.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.render=function(e){document.body.style.backgroundColor="white",document.body.style.padding="";var t=document.querySelector("#componentsContainer");t.style.overflow="hidden",t.style.display="block",t.style.gridAutoFlow="",t.className="template-all-layouts",t.style.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var n=[];n=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});if(n.length===1)for(var r=0;r<n.length;r++)n[r].className="col-md-12 layout-fullwidth";else if(n.length===2)for(var r=0;r<n.length;r++)n[r].className="col-md-6 layout-fullwidth";else if(n.length===3)for(var r=0;r<n.length;r++)n[r].className="col-md-6 layout-horizontal-divided";else if(n.length===4)for(var r=0;r<n.length;r++)n[r].className="col-md-6 layout-horizontal-divided";else if(n.length===5)for(var r=0;r<n.length;r++)n[r].className="col-md-4 layout-horizontal-divided";else if(n.length===6)for(var r=0;r<n.length;r++)n[r].className="col-md-4 layout-horizontal-divided";else for(var r=0;r<n.length;r++)n[r].className="col-md-4 layout-horizontal-three-divided";mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},t.onOrientationChange=function(e){console.log("orientationChange")},t.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},t.onResizeEvent=function(e){this.render(e)},t.unload=function(e){},t.__moduleName="dividedLayout",t}),define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/carousel",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layoutConstructor"],function(e){var t,n=new e("carousel");n.listeners=[];var r=[];return n.onComponentsChange=function(e){console.log("test"),this.cmps=e;var t=mediascape.AdaptationToolkit.componentManager.core.getComponents();for(var n=0;n<t.length;n++)t[n].style.width="",t[n].style.height="",t[n].style.gridColumn="",t[n].style.gridRow="",t[n].className="",t[n].style.order="",t[n].style.position="",t[n].style.backgroundColor="",t[n].style.marginLeft="",t[n].style.marginTop="",t[n].style.float="",t[n].style.zIndex="",t[n].style.boxShadow="",t[n].style.borderLeft="",t[n].style.animationName="",t[n].style.animationDuration="",t[n].style.left="",t[n].style.transformOrigin="",t[n].style.outline="",t[n].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var n=1;n<t.length;n++)document.querySelector("#compDiv"+n)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+n));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var n=0;n<t.length;n++)document.querySelector("#name"+t[n].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+t[n].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var n=0;n<t.length;n++)if(document.querySelector("#swContainer").querySelector("#"+t[n].id)){var r=document.querySelector("#"+t[n].id);componentsContainer.appendChild(r)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize")))},n.render=function(e){document.body.style.backgroundColor="#0A2533",document.body.style.padding="15px 0px",document.body.style.overflow="hidden";var t=document.querySelector("#componentsContainer");t.style.display="",t.style.overflowX="";var n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;t.style.height=n;var r=[];r=e.sort(function(e,t){return e.lproperties.order>t.lproperties.order?1:-1});var i=document.createElement("div");i.className="swiper-container",i.id="swContainer",i.innerHTML='<div id="wrapper" class="swiper-wrapper"></div><div class="swiper-pagination"></div>',componentsContainer.appendChild(i);var s=new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",initialSlide:0,coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!1}});for(var o=0;o<r.length;o++){var i=document.createElement("div");i.className="swiper-slide",i.id="slide"+r[o].id;var u=document.querySelector("#"+r[o].id);i.appendChild(u),s.appendSlide(i),s.update(!0)}document.querySelector("x-media")&&document.querySelector("x-media").play(),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},n.onOrientationChange=function(e){console.log("test")},n.onLayoutChangeEvent=function(e){console.log("layout changed");for(var t=0;t<e.length;t++)e[t].style.width="",e[t].style.height="",e[t].style.gridColumn="",e[t].style.gridRow="",e[t].className="",e[t].style.order="",e[t].style.position="",e[t].style.backgroundColor="",e[t].style.marginLeft="",e[t].style.marginTop="",e[t].style.float="",e[t].style.zIndex="",e[t].style.boxShadow="",e[t].style.borderLeft="",e[t].style.animationName="",e[t].style.animationDuration="",e[t].style.display="block",e[t].style.left="",e[t].style.transformOrigin="",e[t].style.outline="",e[t].style.transform="";componentsContainer.style.backgroundColor="",componentsContainer.style.perspective="",componentsContainer.className="",componentsContainer.style.gridTemplateColumns="",componentsContainer.style.gridTemplateRows="",document.querySelector("#layout_classes")!=null&&document.head.removeChild(document.querySelector("#layout_classes"));for(var t=1;t<e.length;t++)document.querySelector("#compDiv"+t)!=null&&componentsContainer.removeChild(document.querySelector("#compDiv"+t));document.querySelector("#menu_container")!=null&&componentsContainer.removeChild(document.querySelector("#menu_container"));for(var t=0;t<e.length;t++)document.querySelector("#name"+e[t].id)!=null&&componentsContainer.removeChild(document.querySelector("#name"+e[t].id));document.querySelector("#menu")!=null&&document.body.removeChild(document.querySelector("#menu")),document.querySelector("#downArrowImg")!=null&&document.body.removeChild(document.querySelector("#downArrowImg")),document.querySelector("#upArrowImg")!=null&&document.body.removeChild(document.querySelector("#upArrowImg"));if(componentsContainer.querySelector("figure")){while(componentsContainer.querySelector("figure").firstChild)componentsContainer.querySelector("figure").parentNode.insertBefore(componentsContainer.querySelector("figure").firstChild,componentsContainer.querySelector("figure"));componentsContainer.querySelector("figure").parentNode.removeChild(componentsContainer.querySelector("figure")),document.querySelector("x-media")&&document.querySelector("x-media").play()}if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}componentsContainer.querySelector("#arrows")&&componentsContainer.removeChild(componentsContainer.querySelector("#arrows")),componentsContainer.querySelector("#back")&&componentsContainer.removeChild(componentsContainer.querySelector("#back")),this.render(e),document.querySelector("#customizePanel")!=null&&(document.body.removeChild(document.querySelector("#customizePanel")),document.querySelector("drag-resize")!=null&&componentsContainer.removeChild(document.querySelector("drag-resize"))),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},n.onPriorizeComponent=function(e){var t=e,n=!0,r=this.cmps;this.render(r,n,t)},n.onResizeEvent=function(e){if(document.querySelector("#swContainer")){for(var t=0;t<e.length;t++)if(document.querySelector("#swContainer").querySelector("#"+e[t].id)){var n=document.querySelector("#"+e[t].id);componentsContainer.appendChild(n)}document.querySelector("#swContainer").parentNode.removeChild(document.querySelector("#swContainer")),document.querySelector("x-media")&&document.querySelector("x-media").play()}this.render(e),mediascape.AdaptationToolkit.Adaptation.UIAdaptation.updateComponentQuery()},n.unload=function(e){n.listeners.forEach(function(t){for(var n=0;n<e.length;n++);},this)},n.__moduleName="carouselLayout",n}),window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},define("mediascape/AdaptationToolkit/adaptation/UIAdaptation/UIAdaptation",["mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/pip","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/menu","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/horizontal","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/customGrid","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/accordion","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/verticalMenu","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/scrollHorizontal","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/spinner","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/divided","mediascape/AdaptationToolkit/adaptation/UIAdaptation/layouts/carousel"],function(e){var t=Array.prototype.slice.apply(arguments),n=[],r=function(){var e=[],r,i=0,s=90,o,u=this,a;this.LAYOUTMODE={CUSTOM:"custom",STATIC:"static",ADAPTABLE:"adaptable"},this.layoutMode="static",this.explicitConf=[],this.registerLayouts=function(){var n=this;$.getJSON("/resources/explicitsCss/rules.json",function(e){n.explicitConf=e}),t.forEach(function(t,r){if(!t.checkForImplementation()&&t.name=="explicit")throw new Error("Some error registring layout: "+t.name);t.name==="explicit"&&(n.explicitLayout=t),e.push(t)})},this.init=function(e,t){var s=this;this.layoutMode=t,n=e,this.layoutMode==this.LAYOUTMODE.ADAPTABLE?(r=this.findBestLayout(n)[i],this.layout(n,"onLayoutChange"),i++):this.layoutMode==this.LAYOUTMODE.STATIC},this.useLayout=function(t){if(typeof t=="object"){var i=t.deviceTypes.some(function(e){if(mediascape.deviceType===e.deviceType)return t=e.layout,!0});i||(t="accordion",console.warn("Not layout found for device type: "+mediascape.deviceType+" Using default one"))}r&&r.unload(n),r=e.filter(function(e){return e.name==t?!0:!1})[0];if(!r)throw new Error("There is no layout named: "+t);this.layoutMode===this.LAYOUTMODE.STATIC?this.layout(n,"onComponentsChange"):this.layout(n,"onLayoutChange")},this.layout=function(e,t){var n=this.checkForExplicitRules(e,t);if(n)if(t==="onComponentsChange")mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),this.explicitLayout.onComponentsChange(e,n);else if(t==="onOrientationChange")mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),this.explicitLayout.onOrientationChange(e,n);else if(t==="onResizeEvent")this.explicitLayout.onResizeEvent(e,n);else{if(t!=="onLayoutChange")throw new Error("Event does not exists");mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),this.explicitLayout.onLayoutChangeEvent(e,n)}else switch(this.layoutMode){case this.LAYOUTMODE.CUSTOM:mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e);break;case this.LAYOUTMODE.STATIC:if(!r)throw new Error("For using STATIC method first you have to choose one layout");t==="onComponentsChange"?(mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),r.onComponentsChange(e)):t==="onOrientationChange"?(mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),r.onOrientationChange(e)):t==="onResizeEvent"?(mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),r.onResizeEvent(e)):console.warn("Event does not exists");break;case this.LAYOUTMODE.ADAPTABLE:t==="onLayoutChange"?(mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),r.onLayoutChangeEvent(e)):t==="onComponentsChange"?(mediascape.AdaptationToolkit.componentManager.loadManager.unload(mediascape.AdaptationToolkit.componentManager.core.getHiddenComponents(e)),mediascape.AdaptationToolkit.componentManager.loadManager.load(e),r.onComponentsChange(e)):t==="onOrientationChange"?r.onComponentsChange:t==="onResizeEvent"&&r.onResizeEvent(e)}},this.onComponentsChange=function(e,t){e.actions&&(n=e.actions.filter(function(e){return e.type==="SHOW"?!0:!1}),n=n.map(function(e){return document.querySelector("#"+e.component)}),u.layoutMode===u.LAYOUTMODE.ADAPTABLE?(i=0,r=u.findBestLayout(n)[i],u.layout(n,"onComponentsChange"),i++):u.layout(n,"onComponentsChange"),u.updateComponentQuery())},this.onPriorizeComponent=function(e){var t=e.srcElement;r&&r.onPriorizeComponent(t)},this.onWindowResize=function(e){e.srcElement=e.srcElement||e.target,e.detail!="emulate"&&(console.log("RESIZING",e),this.layout(n,"onResizeEvent"))},this.onLayoutChangeEvent=function(){clearTimeout(o),console.log(i,n.length),r.unload(n),r=this.findBestLayout(n)[i],this.layoutMode=this.LAYOUTMODE.ADAPTABLE,this.layout(n,"onLayoutChange"),e.length-1===i?i=0:i++},this.getLayouts=function(){return e},this.getLayout=function(t){return e.filter(function(e){return e.name===t?!0:!1})[0]||[]},this.findBestLayout=function(e){var t=e.length||0,n=[],r=!1,i=0;while(i<e.length){if(e[i].querySelector("x-media")){r=!0;break}i++}var s=this.getScreenSize().extra[1].screenX,o=this.getScreenSize().extra[1].screenY,u=this,a=[],f=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));return f<=6?o>s?t<=3?r?(n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("menu")),n.push(u.getLayout("pip")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):t<=3?r?(n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("grid")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):navigator.userAgent.toLowerCase().indexOf("android")!=-1&&navigator.appVersion.indexOf("MK12")==-1?o>s?t<=3?r?(n.push(u.getLayout("spinner")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("menu")),n.push(u.getLayout("pip")),n.push(u.getLayout("accordion")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("spinner")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("accordion")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("spinner")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("spinner")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):t<=2?r?(n.push(u.getLayout("divided")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("accordion")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("divided")),n.push(u.getLayout("accordion")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("pip")),n.push(u.getLayout("pip")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("pip")),n.push(u.getLayout("pip")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):navigator.userAgent.toLowerCase().indexOf("windows nt 6.3")!=-1?t<=3?r?(n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("pip")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("pip")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("accordion")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("pip")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):navigator.userAgent.toLowerCase().indexOf("windows nt 6.1")!=-1?t<=6?r?(n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("divided")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("customGrid")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("accordion")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):navigator.userAgent.toLowerCase().indexOf("android")!=-1&&navigator.appVersion.indexOf("MK12")!=-1?t<=3?r?(n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("customGrid")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("accordion")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("accordion")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):navigator.userAgent.toLowerCase().indexOf("x11")!=-1&&(t<=4?r?(n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("accordion")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("pip")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):r?(n.push(u.getLayout("divided")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("spinner")),n.push(u.getLayout("accordion")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal"))):(n.push(u.getLayout("divided")),n.push(u.getLayout("pip")),n.push(u.getLayout("menu")),n.push(u.getLayout("horizontal")),n.push(u.getLayout("customGrid")),n.push(u.getLayout("spinner")),n.push(u.getLayout("verticalMenu")),n.push(u.getLayout("scrollHorizontal")))),n},_this.changeLayout=function(){},this.listenForActivity=function(){function e(e){r&&r.onActivity&&(clearTimeout(o),o=r.onActivity(n,e))}window.addEventListener("resize",this.onWindowResize.bind(this),!1),document.addEventListener("keydown",e.bind(this),!1),window.addEventListener("click",e.bind(this),!1),document.addEventListener("componentToFullscreen",this.onPriorizeComponent.bind(this),!1),window.addEventListener("touch",e.bind(this),!1),window.addEventListener("tap",e.bind(this),!1),window.addEventListener("mousemove",e.bind(this),!1),document.addEventListener("click",e.bind(this),!1)},this.getActualLayout=function(){return r.name},this.updateComponentQuery=function(e){var t=mediascape.AdaptationToolkit.componentManager.core.getComponents(),n=new CustomEvent("resize",{detail:"emulate"});window.dispatchEvent(n);for(var r=0;r<t.length;r++)t[r]=document.querySelector("#"+t[r].id),t[r].updateNodes();this.forceRedraw()},this.updateUniqueComponent=function(e){cmpToUpdate=document.querySelector("#"+e.id),cmpToUpdate.updateNodes()},this.forceRedraw=function(){var e=document.body.style.display;document.body.style.display="none";var t=document.body.offsetHeight;document.body.style.display=e},this.getScreenSize=function(){var e,t;if(parseInt(navigator.appVersion)>3)e=screen.width,t=screen.height;else if(navigator.appName=="Netscape"&&parseInt(navigator.appVersion)==3&&navigator.javaEnabled()){var n=java.awt.Toolkit.getDefaultToolkit(),r=n.getScreenSize();e=r.width,t=r.height}document.body.insertAdjacentHTML("beforeend",'<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: absolute; top: 100%;"></div>');var i=document.getElementById("dpi").offsetWidth,s=document.getElementById("dpi").offsetHeight,o=screen.width/window.devicePixelRatio/i,u=screen.height/window.devicePixelRatio/s;return document.getElementById("dpi").remove(),JSON.parse('{"extra":[{"width":"'+e+'","height":"'+t+'"},{"screenX":"'+o+'","screenY":"'+u+'"}]}')},this.checkForExplicitRules=function(e,t){var n=null,r=Math.sqrt(Math.pow(screenX,2)+Math.pow(screenY,2));return this.explicitConf.rules&&this.explicitConf.rules.forEach(function(t){t.condition.componentsNumber===e.length&&(n=t),t.condition.componentsNumber===e.length&&r>t.condition.screenSize&&(n=t)},this),n},this.registerLayouts(),this.listenForActivity()};return r.__moduleName="UIAdaptation",r}),define("mediascape/AdaptationToolkit/adaptation/modules",["mediascape/AdaptationToolkit/adaptation/multiDeviceAdaptation/mdadaptation","mediascape/AdaptationToolkit/adaptation/UIAdaptation/UIAdaptation"],function(){var e={},t=Array.prototype.slice.apply(arguments),e=function(r,i,s){var o=[],u=0,a=0;for(var f=0;f<t.length;++f){var l=t[f].__moduleName;e[l]=new t[f](e,"gq"+f,e)}return this.__moduleName="Adaptation",e};return e.__moduleName="Adaptation",e}),define("mediascape/AdaptationToolkit/componentManager/loadManager/loadManager",[],function(){var e=function(){var e=[];this.load=function(t){var n=mediascape.AdaptationToolkit.componentManager.core.getComponents();n.forEach(function(e){e.style.display="none"}),t.forEach(function(t){var n=e.some(function(e){return e.id===t.id?!0:!1});if(!n){t.load();var r=t.querySelector("video");r&&r.src!=""&&(r.src=t.getAttribute("file"),t.show=!0,t.play&&(t.play(),r.play()));var i=t.querySelector("audio");i&&i.src!=""&&(i.src=t.getAttribute("file"),t.show=!0,t.play&&(t.play(),i.play()))}t.style.display="block"}),e=t},this.unload=function(t){t.forEach(function(t){t.unload(),t.style.display="none";var n=t.querySelector("video");n&&n.src!=""&&(n.src="",t.show=!1);var r=t.querySelector("audio");r&&r.src!=""&&(r.src="",t.show=!1),e=e.filter(function(e){return e.id===t.id?!1:!0})})}};return e.__moduleName="loadManager",e}),Function.prototype.getBody=function(){var e=this.toString().match(/\{([\s\S]*)\}/m)[1];return e.replace(/^\s*\/\/.*$/mg,"")},define("mediascape/AdaptationToolkit/componentManager/cssParser/cssParser",["jquery"],function(e){var t=function(){this.customProperties=[];var e="";this.readComponentCSS=function(e){var t="";if(e.styleSheets)t=e.styleSheets.item(0).cssRules;else{var n=e.localName,r=document.styleSheets,i=null;for(var s in r)r[s].ownerNode&&r[s].ownerNode.textContent.indexOf(n)>-1&&(i=r[s]);t=i.cssRules}var o=[];for(var s in t)t[s].cssText&&t[s].cssText.indexOf("@media")>-1&&o.push(t[s]);return o},this.readCustomCss=function(t,n){this.css="",console.log("barruan"),_this=this;var r=mediascape.AdaptationToolkit.componentManager.core.getFile(t).then(function(t){_this.css=t,n&&_this.setCustomProperties(n);var r=[],i=[];r=_this.css.trim().split("#"),r=r.splice(1);for(var s=0;s<r.length;s++){i[r[s].split("{")[0]]={layoutProperties:[]};var o=r[s].split("{")[1].split("}")[0],u=o.split(";"),a={};u.forEach(function(e,t){this.customProperties.forEach(function(t){if(e.trim().indexOf(t)>=0){var n=e.split(":");if(t.toLowerCase().indexOf("needs")>-1){var r=n[1].split(","),i=[];r.forEach(function(e){var t=e.split("<"),n=e.split(">"),r=e.split("=");if(e.indexOf("none")>-1){var s={};s.name="attribute",s.key=n[0]}else{if(t.length===1&&n.length===1&&r.length==1){var s={};s.name="attribute",s.key=n[0]}if(t.length===1&&n.length>1&&r.length==1){var s={};s.name="compare",s.key=n[0],s.operation="bigger",s.value=n[1],s.compare=function(e,t){return e>t?1:e<t?-1:0}}else{var s={};s.name="attribute",s.key=n[0]}}i.push(s)}),a[n[0].trim()]=i}else if(t.toLowerCase().indexOf("bestfit")>-1){var s=n[1].split(","),o={};o.name="bestFit",s.indexOf("biggestScreenSize")>-1?o.biggestScreenSize=!0:o.biggestScreenSize=!1,s.indexOf("smallestScreenSize")>-1?o.smallestScreenSize=!0:o.smallestScreenSize=!1,s.indexOf("touchable")>-1?o.touchable=!0:o.touchable=!1,o.getBestFitPropertie=function(e){for(var t=0;t<arguments.length;t++)if(o[arguments[t]])return o[arguments[t]]?!0:!1;return!1},a[n[0].trim()]=o}else a[n[0].trim()]=n[1]}},this)},_this);var f=r[s].split("{")[0].trim(),l={};l[f]=a,i.push(l)}return e=i,e});return r},this.readCss=function(e,t){var n=e,r=document.styleSheets,i=null;for(var s in r)r[s].ownerNode&&r[s].ownerNode.textContent.indexOf(n)>-1&&(i=r[s]);return cssRules=i.cssRules,cssRules},this.setCustomProperties=function(e){e.forEach(function(e,t,n){this.customProperties.indexOf(e)<0&&this.customProperties.push(e)},this)},this.getCustomCss=function(){return e}};return t.__moduleName="cssParser",t}),define("mediascape/AdaptationToolkit/componentManager/main/core",["underscore"],function(e){var t=function(){function i(e){var t=document.createElement("div");t.id="componentsContainer",document.body.appendChild(t),e.forEach(function(e){var n=document.querySelector("#"+e.id);e=n,t.appendChild(n)})}var t=[],n=undefined;this.init=function(){console.log("BARRUAN");var e=["order","rwidth","propx","propy","bestfit","required","needs","duplicable","movable","icon"],t="/resources/layout/components.layout",n=this;this.parseComponents(t,e).then(function(e){console.log("PARSING",e);var t=new CustomEvent("adaptationToolkit-ready",{detail:{loaded:!0,components:e}});setTimeout(function(){document.dispatchEvent(t)},2e3),n.components=e})},this.setComponentValue=function(e,t,n){var r=e.getAttribute("compid");if(r)throw new Error(e+" does not exists");e.setAttribute(t,n)},this.parseComponents=function(n,r){var s=document.body.children,o=mediascape.AdaptationToolkit.componentManager.cssParser;if(s.length===0)throw new Error("there is no webcomponent to parse");s=e.toArray(s);var u=o.readCustomCss(n,r).then(function(e){return t=s.filter(function(t,n){if(t.nodeName.split("-").length>=2){var r=t.getAttribute("id");return t.setAttribute("touch-action","none"),t.setAttribute("drag-resize",""),[].slice.call(t.querySelectorAll("div,span")).forEach(function(e){e.setAttribute("touch-action","none"),e.style.webkitUserSelect="none"}),t.setAttribute("compId","compId"+n),e.forEach(function(e){Object.keys(e).indexOf(r)>-1&&(t.lproperties=e[r],t.lproperties.movable==="true"&&mediascape.AdaptationToolkit.uiComponents.addMovablePanel(t))}),!0}return!1}),i(t),t});return u},this.getComponents=function(){return t},this.getComponentsStatus=function(){return n||[]},this.setComponentsStatus=function(e){n=e},this.checkComponentsReady=function(){var e=t.every(function(e){return console.log(e.done),e.done});if(e){var n=new CustomEvent("components-ready",{detail:"emulate"});window.dispatchEvent(n),clearInterval(r)}},this.getFile=function(e){return $.ajax({url:e,dataType:"text"})},this.getComoponentsToShow=function(){return n?n.filter(function(e){if(e.show)return!0}).map(function(e){return document.querySelector("div [compId='"+e.compId+"']")}):[]},this.getHiddenComponents=function(e){return t.filter(function(t){return e.every(function(e){return e.id!==t.id?!0:!1})})},this.isLoaded=function(e){if(n)for(c in n)if(n[c].selector===e.id)return n[c].show?!0:!1;return!1},this.setMenu=function(e){e?mediascape.AdaptationToolkit.uiComponents.showComponentMenu(t):mediascape.AdaptationToolkit.uiComponents.hideComponentMenu(t)};var r=setInterval(this.checkComponentsReady.bind(this),500);document.addEventListener("mediascape-modules-ready",this.init.bind(this),!1)};return t.__moduleName="core",t}),define("mediascape/AdaptationToolkit/componentManager/modules",["mediascape/AdaptationToolkit/componentManager/loadManager/loadManager","mediascape/AdaptationToolkit/componentManager/cssParser/cssParser","mediascape/AdaptationToolkit/componentManager/main/core"],function(){var e={},t=Array.prototype.slice.apply(arguments),e=function n(e,r,i){var s=[],o=0,u=0;for(var a=0;a<t.length;++a){var f=t[a].__moduleName;n[f]=new t[a](n,"gq"+a,n)}return this.__moduleName="componentManager",n};return e.__moduleName="componentManager",e}),function(e){typeof define=="function"&&define.amd?define("ui",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o))):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}function b(e){var t,n;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){n=parseInt(e.css("zIndex"),10);if(!isNaN(n)&&n!==0)return n}e=e.parent()}return 0}function w(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=E(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function E(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",S)}function S(){e.datepicker._isDisabledDatepicker(y.inline?y.dpDiv.parent()[0]:y.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))}function x(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}function Y(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){var n=e(this[0]),r,i;while(n.length&&n[0]!==document){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(n.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}n=n.parent()}}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var r=0,i=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var n=i.call(arguments,1),r=0,s=n.length,o,u;for(;r<s;r++)for(o in n[r])u=n[r][o],n[r].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=i.call(arguments,1),a=this;return o?this.each(function(){var n,i=e.data(this,r);if(s==="instance")return a=i,!1;if(!i)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(i[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=i[s].apply(i,u);if(n!==i&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var s=e.widget,o=!1;e(document).mouseup(function(){o=!1});var u=e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(o)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which===1,i=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var t,n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(t!==undefined)return t;var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&n[0].nodeType===9;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r||i?n.width():n.outerWidth(),height:r||i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,v,m,g,y,b,w=e(t.of),E=e.position.getWithinInfo(t.within),S=e.position.getScrollInfo(E),x=(t.collision||"flip").split(" "),T={};return b=d(w),w[0].preventDefault&&(t.at="left top"),v=b.width,m=b.height,g=b.offset,y=e.extend({},g),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),T[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),x.length===1&&(x[1]=x[0]),t.at[0]==="right"?y.left+=v:t.at[0]==="center"&&(y.left+=v/2),t.at[1]==="bottom"?y.top+=m:t.at[1]==="center"&&(y.top+=m/2),l=h(T.at,v,m),y.left+=l[0],y.top+=l[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),b=p(this,"marginTop"),N=f+d+p(this,"marginRight")+S.width,C=c+b+p(this,"marginBottom")+S.height,k=e.extend({},y),L=h(T.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?k.left-=f:t.my[0]==="center"&&(k.left-=f/2),t.my[1]==="bottom"?k.top-=c:t.my[1]==="center"&&(k.top-=c/2),k.left+=L[0],k.top+=L[1],n||(k.left=s(k.left),k.top=s(k.top)),o={marginLeft:d,marginTop:b},e.each(["left","top"],function(n,r){e.ui.position[x[n]]&&e.ui.position[x[n]][r](k,{targetWidth:v,targetHeight:m,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:N,collisionHeight:C,offset:[l[0]+L[0],l[1]+L[1]],my:t.my,at:t.at,within:E,elem:a})}),t.using&&(u=function(e){var n=g.left-k.left,s=n+v-f,o=g.top-k.top,u=o+m-c,l={target:{element:w,left:g.left,top:g.top,width:v,height:m},element:{element:a,left:k.left,top:k.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};v<f&&i(n+s)<v&&(l.horizontal="center"),m<c&&i(o+u)<m&&(l.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),a.offset(e.extend(k,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;if(a<0){v=e.top+c+h+p+t.collisionHeight-s-r;if(v<0||v<i(a))e.top+=c+h+p}else if(f>0){d=e.top-t.collisionPosition.marginTop+c+h+p-o;if(d>0||i(d)<f)e.top+=c+h+p}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,r,i,s,o,u=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(u?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},u&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(a),r=u||document.documentElement,r.insertBefore(t,r.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=e(a).offset().left,n=s>10&&s<11,t.innerHTML="",r.removeChild(t)}()})();var a=e.ui.position,f=e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,r=n.heightStyle,i=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),r=t.next(),i=r.uniqueId().attr("id");t.attr("aria-controls",i),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),r==="fill"?(t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-hidden":"true"}),r.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return parseInt(e(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var r,i,s,o=this,u=0,a=e.css("box-sizing"),f=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},c=f&&l.down||l,h=function(){o._toggleComplete(n)};typeof c=="number"&&(s=c),typeof c=="string"&&(i=c),i=i||c.easing||l.easing,s=s||c.duration||l.duration;if(!t.length)return e.animate(this.showProps,s,i,h);if(!e.length)return t.animate(this.hideProps,s,i,h);r=e.show().outerHeight(),t.animate(this.hideProps,{duration:s,easing:i,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:s,easing:i,complete:h,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?a==="content-box"&&(u+=n.now):o.options.heightStyle!=="content"&&(n.now=Math.round(r-t.outerHeight()-u),u=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),l=e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(this.previousFilter)return;var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,r,i,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,n=this._filterMenuItems(i),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(t,n),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,r=this,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=s.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);r._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),e==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.outerHeight(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.find(this.options.items)[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(e.trim(e(this).text()))})}});e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s=i==="textarea",o=i==="input";this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){var r,i;if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),r=n.item.attr("aria-label")||i.value,r&&e.trim(r).length&&(this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion))},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0));if(!t||!t[0])t=this.element.closest(".ui-front");return t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!n&&!r)this.selectedItem=null,this.search(null,e)},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;t&&t.length?n=this.options.messages.results(t.length):n=this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion)}});var c=e.ui.autocomplete,h,p="ui-button ui-widget ui-state-default ui-corner-all",d="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",v=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},m=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"'][type=radio]"):i=e("[name='"+n+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,v),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,r=this.type==="checkbox"||this.type==="radio",i=r?"":"ui-state-active";n.label===null&&(n.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(n.disabled)return;this===h&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(n.disabled)return;e(this).removeClass(i)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var r=t.element[0];m(r).not(r).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),h=this,t.document.one("mouseup",function(){h=null})}).bind("mouseup"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(n.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+d).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&(this.type==="checkbox"||this.type==="radio"?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active"));return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?m(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(d),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl",n=this.element.find(this.options.items),r=n.filter(":ui-button");n.not(":ui-button").button(),r.button("refresh"),this.buttons=n.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});var g=e.ui.button;e.extend(e.ui,{datepicker:{version:"1.11.4"}});var y;e.extend(w.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return x(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?E(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]);if(r.hasClass(this.markerClassName))return;this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);if(r.hasClass(this.markerClassName))return;r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block")},_dialogDatepicker:function(t,n,r,i,s){var o,u,a,f,l,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),x(c.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(c,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+f,a/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),n==="input"?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(n==="div"||n==="span")&&r.removeClass(this.markerClassName).empty(),y===i&&(y=null)},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,s,o,u,a=this._getInst(t);if(arguments.length===2&&typeof n=="string")return n==="defaults"?e.extend({},e.datepicker._defaults):a?n==="all"?e.extend({},a.settings):this._get(a,n):null;i=n||{},typeof n=="string"&&(i={},i[n]=r),a&&(this._curInst===a&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(a,"min"),u=this._getMinMaxDate(a,"max"),x(a.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(a.settings.minDate=this._formatDate(a,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,u)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),a),this._autoSize(a),this._setDate(a,s),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,u,a;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;x(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(u=e.datepicker._get(n,"showAnim"),a=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",b(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?n.dpDiv.show(u,e.datepicker._get(n,"showOptions"),a):n.dpDiv[u||"show"](u?a:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,y=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,r=this._getNumberOfMonths(t),i=r[1],s=17,o=t.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&S.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,o=this._curInst;if(!o||t&&o!==e.data(t,"datepicker"))return;this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv[n==="slideDown"?"slideUp":n==="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=e==="y"?r:1,s=new RegExp("^\\d{"+i+","+r+"}"),o=n.substring(u).match(s);if(!o)throw"Missing number at position "+u;return u+=o[0].length,parseInt(o[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th scope='col'"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new w,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4";var T=e.datepicker;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),e==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(!this.handleElement.is(t.target))return;try{n.activeElement&&n.activeElement.nodeName.toLowerCase()!=="body"&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];this.relativeContainer=null;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n},_convertPositionTo:function(e,t){t||(t=this.position);var n=e==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;if(!u||!this.offset.scroll)this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};return t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),o.axis==="y"&&(a=this.originalPageX),o.axis==="x"&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){this.options.axis!=="y"&&this.helper.css("right")!=="auto"&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];if(o!==u&&o.tagName!=="HTML"){if(!i.axis||i.axis!=="x")r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed);if(!i.axis||i.axis!=="y")r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!=="x")t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!=="y")t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--){a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height;if(g<a-v||m>f+v||b<l-v||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)){r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1;continue}d.snapMode!=="inner"&&(i=Math.abs(l-b)<=v,s=Math.abs(c-y)<=v,o=Math.abs(a-g)<=v,u=Math.abs(f-m)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,d.snapMode!=="outer"&&(i=Math.abs(l-y)<=v,s=Math.abs(c-b)<=v,o=Math.abs(a-m)<=v,u=Math.abs(f-g)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!o.length)return;i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}});var N=e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e();if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){if(this.handles[n].constructor===String)this.handles[n]=this.element.children(this.handles[n]).first().show();else if(this.handles[n].jquery||this.handles[n].nodeType)this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:o._mouseDown});this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])}},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof s.aspectRatio=="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",i==="auto"?this.axis+"-resize":i),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];this._updatePrevProperties();if(!a)return!1;n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||e)t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),n<s.maxWidth&&(s.maxWidth=n),i<s.maxHeight&&(s.maxHeight=i);this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),r==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),r==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.position.top+this.size.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_getPaddingPlusBorderDimensions:function(e){var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++)n[t]=parseInt(r[t],10)||0,n[t]+=parseInt(i[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;if(!h)return;a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u})},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a=typeof r.grid=="number"?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&r.maxWidth<p,m=r.maxHeight&&r.maxHeight<d,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l);if(/^(se|s|e)$/.test(u))n.size.width=p,n.size.height=d;else if(/^(ne)$/.test(u))n.size.width=p,n.size.height=d,n.position.top=o.top-h;else if(/^(sw)$/.test(u))n.size.width=p,n.size.height=d,n.position.left=o.left-c;else{if(d-l<=0||p-f<=0)t=n._getPaddingPlusBorderDimensions(this);d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p)}}});var C=e.ui.resizable,k=e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n,r=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance();if(!this.opener.filter(":focusable").focus().length)try{n=this.document[0].activeElement,n&&n.nodeName.toLowerCase()!=="body"&&e(n).blur()}catch(i){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var r=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),s=Math.max.apply(null,i);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),r=!0),r&&!n&&this._trigger("focus",t),r},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented())return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(this._delay(function(){i.focus()}),t.preventDefault()):(this._delay(function(){r.focus()}),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)||e.isArray(n)&&!n.length){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){var o=s.offset.left-t.document.scrollLeft(),u=s.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(u>=0?"+":"")+u,of:t.window},e(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){var s=t.uiDialog.offset(),u=s.left-t.document.scrollLeft(),a=s.top-t.document.scrollTop();n.height=t.uiDialog.height(),n.width=t.uiDialog.width(),n.position={my:"left top",at:"left"+(u>=0?"+":"")+u+" "+"top"+(a>=0?"+":"")+a,of:t.window},e(this).removeClass("ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);n!==-1&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,r=!1,i={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(r=!0),e in n.resizableRelatedOptions&&(i[e]=t)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){if(t)return;this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal)return;if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}});e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){if(!arguments.length)return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};t=arguments[0]},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if(t==="accept")this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if(t==="scope"){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return f<=s&&u<=c&&l<=o&&a<=h;case"intersect":return f<s+t.helperProportions.width/2&&u-t.helperProportions.width/2<c&&l<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&o<=h||a>=l&&a<=h||o<l&&a>h)&&(s>=f&&s<=c||u>=f&&u<=c||s<f&&u>c);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance,n),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}};var L=e.ui.droppable,A="ui-effects-",O=e;e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(O),function(){function r(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function i(t,r){var i={},s,o;for(s in r)o=r[s],t[s]!==o&&!n[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var t=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)O.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s=e(this),o=s.attr("class")||"",u,f=a.children?s.find("*").addBack():s;f=f.map(function(){var t=e(this);return{el:t,start:r(this)}}),u=function(){e.each(t,function(e,t){n[t]&&s[t+"Class"](n[t])})},u(),f=f.map(function(){return this.end=r(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,s,o){return typeof r=="boolean"||r===undefined?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,s)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function t(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function n(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?!0:e.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(A+t[n],e[0].style[t[n]])},restore:function(e,t){var n,r;for(r=0;r<t.length;r++)t[r]!==null&&(n=e.data(A+t[r]),n===undefined&&(n=""),e.css(t[r],n))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(t){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(t)&&t()}var r=e(this),i=n.complete,o=n.mode;(r.is(":hidden")?o==="hide":o==="show")?(r[o](),u()):s.call(r[0],n,u)}var n=t.apply(this,arguments),r=n.mode,i=n.queue,s=e.effects.effect[n.effect];return e.fx.off||!s?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},show:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(r){if(n(r)||typeof r=="boolean")return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}();var M=e.effects,_=e.effects.effect.blind=function(t,n){var r=e(this),i=/up|down|vertical/,s=/up|left|vertical|horizontal/,o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(r,t.mode||"hide"),a=t.direction||"up",f=i.test(a),l=f?"height":"width",c=f?"top":"left",h=s.test(a),p={},d=u==="show",v,m,g;r.parent().is(".ui-effects-wrapper")?e.effects.save(r.parent(),o):e.effects.save(r,o),r.show(),v=e.effects.createWrapper(r).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(r.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})},D=e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()},P=e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})},H=e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})},B=e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}},j=e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})},F=e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})},I=e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})},q=e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})},R=e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},U=e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},z=e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()},W=e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()},X=e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})},V=e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})},$=e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===undefined)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===undefined&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),e==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),J=e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),K=e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var r=n.item.data("ui-selectmenu-item");t.focusIndex!=null&&r.index!==t.focusIndex&&(t._trigger("focus",e,{item:r}),t.isOpen||t._select(r,e)),t.focusIndex=r.index,t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");if(!t.length)return;this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled"))},open:function(e){if(this.options.disabled)return;this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){if(!this.isOpen)return;this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,n){var r=this,i="";e.each(n,function(n,s){s.optgroup!==i&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(s.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:s.optgroup}).appendTo(t),i=s.optgroup),r._renderItemData(t,s)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var r=e("<li>");return n.disabled&&r.addClass("ui-state-disabled"),this._setText(r,n.label),r.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,r,i=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),i+=":not(.ui-state-disabled)"),e==="first"||e==="last"?r=n[e==="first"?"prevAll":"nextAll"](i).eq(-1):r=n[e+"All"](i).eq(0),r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;if(!this.range)return;window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus()},_documentClick:{mousedown:function(t){if(!this.isOpen)return;e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t)}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){e==="icons"&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),e==="appendTo"&&this.menuWrap.appendTo(this._appendTo()),e==="disabled"&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),e==="width"&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0));if(!t||!t[0])t=this.element.closest(".ui-front");return t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var n=[];t.each(function(t,r){var i=e(r),s=i.parent("optgroup");n.push({element:i,index:t,value:i.val(),label:i.text(),optgroup:s.attr("label")||"",disabled:s.prop("disabled")||i.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),Q=e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),t==="disabled"&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css(n==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,r=Math.floor(+(e-t).toFixed(this._precision())/n)*n;e=r+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var n,r,i,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,o);if(n===!1)return}}s=this.options.step,this.options.values&&this.options.values.length?r=i=this.values(o):r=i=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-s)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}}),G=e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),e==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&s==="right"||i==="down"?2:1:i&&(i==="down"?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i==="right"&&n||i==="left"&&!n:r&&(r==="down"&&t||r==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function f(){o.push(this)}var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n],this.document[0]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(f);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n],this.document[0]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tbody"?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):r==="tr"?t._createTrPlaceholder(t.currentItem,i):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!h)return;if(this.containers.length===1)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY";for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[p].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p]){this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1);return}s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,i.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===this.document[0]||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),Z=e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:Y(function(e){this._super(e)}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return e===null?!1:e===this._adjustValue(e)},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:Y(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:Y(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:Y(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:Y(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());Y(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),et=e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,r;t=t.cloneNode(!1),n=t.href.replace(e,""),r=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(i){}try{r=decodeURIComponent(r)}catch(i){}return t.hash.length>1&&n===r}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),!t.ctrlKey&&!t.metaKey&&(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,r=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,s,o,u=e(r).uniqueId().attr("id"),a=e(r).closest("li"),f=a.attr("aria-controls");t._isLocal(r)?(i=r.hash,o=i.substring(1),s=t.element.find(t._sanitizeSelector(i))):(o=a.attr("aria-controls")||e({}).uniqueId()[0].id,i="#"+o,s=t.element.find(i),s.length||(s=t._createPanel(o),s.insertAfter(t.panels[n-1]||t.tablist)),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),f&&a.data("ui-tabs-aria-controls",f),a.attr({"aria-controls":o,"aria-labelledby":u}),s.attr("aria-labelledby",u)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(r.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;if(n===!1)return;t===undefined?n=!1:(t=this._getIndex(t),e.isArray(n)?n=e.map(n,function(e){return e!==t?e:null}):n=e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n)},disable:function(t){var n=this.options.disabled;if(n===!0)return;if(t===undefined)n=!0;else{t=this._getIndex(t);if(e.inArray(t,n)!==-1)return;e.isArray(n)?n=e.merge([t],n).sort():n=[t]}this._setupDisabled(n)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),s=i.find(".ui-tabs-anchor"),o=this._getPanelForTab(i),u={tab:i,panel:o},a=function(e,t){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr};if(this._isLocal(s[0]))return;this.xhr=e.ajax(this._ajaxSettings(s,n,u)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){o.html(e),r._trigger("load",n,u),a(i,t)},1)}).fail(function(e,t){setTimeout(function(){a(e,t)},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),tt=e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t.element)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r.element[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(t,r),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){i._delay(function(){if(!e.data("ui-tooltip-open"))return;t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,n,r){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var i,s,o,u,a=e.extend({},this.options.position);if(!r)return;i=this._find(n);if(i){i.tooltip.find(".ui-tooltip-content").html(r);return}n.is("[title]")&&(t&&t.type==="mouseover"?n.attr("title",""):n.removeAttr("title")),i=this._tooltip(n),s=i.tooltip,this._addDescribedBy(n,s.attr("id")),s.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),r.clone?(u=r.clone(),u.removeAttr("id").find("[id]").removeAttr("id")):u=r,e("<div>").html(u).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(o))},e.fx.interval)),this._trigger("open",t,{tooltip:s})},_registerCloseHandlers:function(t,n){var r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var r=e.Event(t);r.currentTarget=n[0],this.close(r,!0)}}};n[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(n).tooltip)});if(!t||t.type==="mouseover")r.mouseleave="close";if(!t||t.type==="focusin")r.focusout="close";this._on(!0,n,r)},close:function(t){var n,r=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(!s){i.removeData("ui-tooltip-open");return}n=s.tooltip;if(s.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),s.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:n}),s.hiding||(s.closing=!1)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=n.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[r]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur"),s=r.element;i.target=i.currentTarget=s[0],t.close(i,!0),e("#"+n).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),define("mediascape/AdaptationToolkit/uiComponents/uiComponents",["ui"],function(){return uiComponents=function(t,n,t){this.componentsMenu=function(){},this.actionMenu=function(){},this.showComponentMenu=function(e){e.forEach(function(e){var t=document.createElement("div");t.style.zIndex=999,t.style.height="40px",t.style.width="100%",t.style.top="0px",t.style.opacity="0.6",t.style.position="absolute",t.style.background="black",e.appendChild(t)})},this.loadingPanel=function(e,t,n){var r=document.createElement("div");r.id="loadingPanel",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.zIndex="10001",r.style.background="black";var i=document.createElement("img");i.id="loaderimg",i.src=e,i.style.position="absolute",i.style.top="25%",i.style.left="25%",i.style.width="50%",i.style.animationDelay="0s",r.appendChild(i);var s=document.createElement("div");s.id="floatingCirclesG",s.style.top="40%";var o=document.createElement("style");o.innerHTML="#floatingCirclesG{ position:relative; width:125px; height:125px; margin:auto; transform:scale(0.6); -o-transform:scale(0.6);-ms-transform:scale(0.6); -webkit-transform:scale(0.6); -moz-transform:scale(0.6);} .f_circleG{ position:absolute; background-color:rgba(51, 204, 204, 0.1); height:22px; width:22px; border-radius:12px; -o-border-radius:12px; -ms-border-radius:12px; -webkit-border-radius:12px; -moz-border-radius:12px; animation-name:f_fadeG; -o-animation-name:f_fadeG; -ms-animation-name:f_fadeG; -webkit-animation-name:f_fadeG; -moz-animation-name:f_fadeG; animation-duration:1.2s; -o-animation-duration:1.2s; -ms-animation-duration:1.2s; -webkit-animation-duration:1.2s; -moz-animation-duration:1.2s; animation-iteration-count:infinite; -o-animation-iteration-count:infinite; -ms-animation-iteration-count:infinite; -webkit-animation-iteration-count:infinite; -moz-animation-iteration-count:infinite; animation-direction:normal; -o-animation-direction:normal; -ms-animation-direction:normal; -webkit-animation-direction:normal; -moz-animation-direction:normal;} #frotateG_01{left:0; top:51px; animation-delay:0.45s; -o-animation-delay:0.45s; -ms-animation-delay:0.45s; -webkit-animation-delay:0.45s;-moz-animation-delay:0.45s;}#frotateG_02{left:15px;top:15px;animation-delay:0.6s; -o-animation-delay:0.6s; -ms-animation-delay:0.6s; -webkit-animation-delay:0.6s;-moz-animation-delay:0.6s;}#frotateG_03{ left:51px;top:0;animation-delay:0.75s;-o-animation-delay:0.75s;-ms-animation-delay:0.75s; -webkit-animation-delay:0.75s; -moz-animation-delay:0.75s;} #frotateG_04{right:15px;top:15px;animation-delay:0.9s; -o-animation-delay:0.9s;  -ms-animation-delay:0.9s; -webkit-animation-delay:0.9s; -moz-animation-delay:0.9s;}#frotateG_05{right:0;top:51px; animation-delay:1.05s; -o-animation-delay:1.05s; -ms-animation-delay:1.05s; -webkit-animation-delay:1.05s; -moz-animation-delay:1.05s;}#frotateG_06{ right:15px; bottom:15px;  animation-delay:1.2s;    -o-animation-delay:1.2s;    -ms-animation-delay:1.2s;    -webkit-animation-delay:1.2s;    -moz-animation-delay:1.2s;}#frotateG_07{ left:51px;  bottom:0;  animation-delay:1.35s;    -o-animation-delay:1.35s;    -ms-animation-delay:1.35s;    -webkit-animation-delay:1.35s;    -moz-animation-delay:1.35s;}#frotateG_08{  left:15px;  bottom:15px;  animation-delay:1.5s;    -o-animation-delay:1.5s;    -ms-animation-delay:1.5s;    -webkit-animation-delay:1.5s;    -moz-animation-delay:1.5s;} @keyframes f_fadeG{  0%{    background-color:rgba(51, 204, 204, 1);  }  100%{    background-color:rgba(51, 204, 204, 0.3);  }}@-o-keyframes f_fadeG{  0%{    background-color:rgb(0,0,0);  }  100%{    background-color:rgb(255,255,255);  }}@-ms-keyframes f_fadeG{  0%{    background-color:rgb(0,0,0);  }  100%{    background-color:rgb(255,255,255);  }}@-webkit-keyframes f_fadeG{  0%{    background-color:rgb(0,0,0);  } 100%{  background-color:rgb(255,255,255);  }}@-moz-keyframes f_fadeG{  0%{    background-color:rgb(0,0,0);  }  100%{    background-color:rgb(255,255,255);  }}";for(var u=1;u<=8;u++){var a=document.createElement("div");a.id="frotateG_0"+u,a.className="f_circleG",s.appendChild(a)}document.body.appendChild(o),r.appendChild(s),document.body.appendChild(r),document.addEventListener("motion-ready",function(e){setTimeout(function(){document.body.removeChild(r)},1e3)}),setTimeout(function(){document.body.removeChild(r)},t*1e3)},this.prompt=function(e){var t=document.createElement("div"),n=document.createElement("div");n.innerHTML=e.question,n.style.textAlign="center",n.style.background="url(../resources/images/TitleBackground.png)",n.style.color="white",t.style.width="250px";var r=document.createElement("div");r.style.background="url(../resources/images/PaneBackground.png)";if(e.type==="select"){var i=document.createElement("div"),s=document.createElement("select");e.values.forEach(function(e){var t=document.createElement("option");t.value=e,t.innerHTML=e,s.appendChild(t)});var o=document.createElement("input");o.type="button",o.value=e.submit.buttonName,o.onclick=function(){e.submit.action.call(this,e.submit.params[0],s.value)},i.appendChild(s),i.appendChild(o)}r.appendChild(i),r.style.color="white",r.style.padding="5px",t.style.position="absolute",t.style.top="100px",t.style.left="400px",t.style.zIndex="10000",t.appendChild(n),t.appendChild(r),document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},6500)},this.customPanel=function(e,t,n){var r=document.createElement("div");r.style.width="220px",r.style.display="-webkit-flex",r.style.display="flex",r.style.flexDirection="row",r.id="customizePanel";var i=function(){currentvalue=document.getElementById("enableButton").value;if(currentvalue=="Off"){document.getElementById("enableButton").value="On",e.call(),o.innerHTML="DISABLE";var n=document.createElement("img");n.src="../resources/images/disable.png",n.style.height="20px",n.style.width="20px",o.appendChild(n)}else{document.getElementById("enableButton").value="Off",t.call(),o.innerHTML="ENABLE ";var n=document.createElement("img");n.src="../resources/images/resize.png",n.style.height="20px",n.style.width="20px",o.appendChild(n)}},s=document.createElement("style");s.type="text/css",s.innerHTML=".enableButton:hover{border-color: #666 #aaa #bbb #888;  border-width:4px 3px 3px 4px;background-image:radial-gradient(circle,#CCFFFF,#66CCFF);#CCFFFF;  color:#000;} ",document.getElementsByTagName("head")[0].appendChild(s);var o=document.createElement("div");o.id="enableButton",o.className="EnableButton",o.value="Off",o.innerHTML="ENABLE ",o.onclick=i,o.style.transition="opacity .1s cubic-bezier(0.4, 0.0, 1, 1), color .1s cubic-bezier(0.4, 0.0, 1, 1)",o.style.height="100%",o.style.margin="0 12px",o.style.width="110px",o.style.textAlign="center",o.style.cursor="pointer",o.style.lineHeight="24px";var u=document.createElement("img");u.src="../resources/images/resize.png",u.style.height="20px",u.style.width="20px",o.appendChild(u),r.appendChild(o);var a=function(){n.call(),o.value="Off",o.innerHTML="ENABLE ";var e=document.createElement("img");e.src="../resources/images/resize.png",e.style.height="20px",e.style.width="20px",o.appendChild(e)},f=document.createElement("div");f.innerHTML="REGISTER",f.onclick=a,f.className="enableButton",f.style.transition="opacity .1s cubic-bezier(0.4, 0.0, 1, 1), color .1s cubic-bezier(0.4, 0.0, 1, 1)",f.style.height="100%",f.style.margin="0 12px",f.style.width="110px",f.style.textAlign="center",f.style.cursor="pointer",f.style.lineHeight="24px";var l=document.createElement("img");l.src="../resources/images/save.png",l.style.height="20px",l.style.width="20px",f.appendChild(l),r.appendChild(f),r.style.position="absolute",r.style.top=0,r.style.right=20,r.style.height="48px",r.style.zIndex="999",r.style.boxShadow="0px 3px 2px rgba(0, 0, 0, 0.2)",r.style.fontFamily='RobotoDraft, "Helvetica Neue", Helvetica, Arial',r.style.backgroundColor="#66CCFF",r.style.color="#fff",document.body.appendChild(r),r.style.display="none"},this.infoPanel=function(e,t,n,r,i){var s=document.createElement("div"),o=document.createElement("div");o.innerHTML=e,o.style.textAlign="center",o.style.background="url(../resources/images/TitleBackground.png)",o.style.color="white",s.style.width=n;var u=document.createElement("div");u.style.background="url(../resources/images/PaneBackground.png)",u.innerHTML=t,u.style.color="white",u.style.padding="5px",s.style.position="absolute",s.style.top=i,s.style.left=r,s.style.zIndex="999",s.appendChild(o),s.appendChild(u),document.body.appendChild(s),setTimeout(function(){document.body.removeChild(s)},6500)},this.notification=function(e,t,n){var r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("img");s.src="../resources/images/notification.png",s.style.width="12%",s.style.height="3%",s.style.position="relative",s.style.cssFloat="left",i.appendChild(s),i.innerHTML=i.innerHTML+"<span>"+e+"</span>",i.style.textAlign="center",i.style.background="url(../resources/images/TitleBackground.png)",i.style.color="white",r.style.width="200px",r.className="animated flipInX";var o=document.createElement("div");o.style.background="url(../resources/images/PaneBackground.png)",o.innerHTML=t,o.style.color="white",o.style.padding="5px",r.style.position="absolute",r.style.bottom="5%",r.style.right="5%",r.style.zIndex="99999",r.appendChild(i),r.appendChild(o),document.body.appendChild(r),setTimeout(function(){document.body.removeChild(r)},n)},this.connectedNotification=function(){img=document.createElement("img"),img.id="conn",img.src="../resources/images/Connected.png",img.style.position="absolute",img.style.bottom="5%",img.style.right="5%",img.style.zIndex="99999",img.style.width="300px",img.style.border="5px solid #ccc",img.style.boxShadow="0px 0px 10px rgba(0,0,0,0.5)",document.body.appendChild(img),setTimeout(function(){document.body.removeChild(document.querySelector("#conn"))},5e3)},this.disconnectedNotification=function(){img=document.createElement("img"),img.id="disc",img.src="../resources/images/Disconnected.png",img.style.position="absolute",img.style.bottom="5%",img.style.right="5%",img.style.zIndex="99999",img.style.width="300px",img.style.border="5px solid #ccc",img.style.boxShadow="0px 0px 10px rgba(0,0,0,0.5)",document.body.appendChild(img),setTimeout(function(){document.body.removeChild(document.querySelector("#disc"))},3e3)},this.addMovablePanel=function(e){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("img"),i=document.createElement("span"),s=0;mediascape.agentContext.capabilities().touchScreen==="supported"?(e.addEventListener("touchend",function(t){var n=document.createEvent("MouseEvents");n.initEvent("mouseup",!0,!0),e.dispatchEvent(n),console.log("mouseup")},!1),e.addEventListener("holdpulse",function(t){console.log("HOLDPULSE");if(t.holdTime>1600){var n=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgents(),r=document.createElement("div");r.style.backgroundColor="white",r.style.opacity="0.85",r.style.color="grey",r.style.top=e.offsetTop,r.style.left=e.offsetLeft,r.style.width=e.clientWidth,r.style.height=e.clientHeight,r.style.zIndex="1001",r.style.position="absolute",r.id="movablediv";var i=document.createElement("p");i.innerHTML="Move to: close",i.style.background="grey",i.style.color="white",i.style.marginTop="20%",i.style.marginLeft="20%",i.style.marginRight="20%",i.style.fontSize="120%",i.addEventListener("tap",function(e){document.body.removeChild(r)}),r.appendChild(i);for(ag in n){var i=document.createElement("p");i.id=ag.agentid,Object.keys(n).length===1?(i.innerHTML="no target",i.style.padding="10px",i.style.color="black",i.style.marginLeft="20%",i.style.testAlign="center"):n[ag].agentid!=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgentId()&&(i.innerHTML="client:"+n[ag].agentid,i.style.padding="10px",i.style.marginLeft="20%",i.style.cursor="pointer",i.style.opacity="1.0",i.addEventListener("click",function(t){var n=t.srcElement.id;console.log(n),document.body.removeChild(r),mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setComponentToAgent(n,e)},!1)),r.appendChild(i)}document.body.appendChild(r),setTimeout(function(){document.body.removeChild(r)},3500)}return!0},!1)):e.addEventListener("holdpulse",function(t){if(event.holdTime>2e3){s=0;var n=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgents(),r=document.createElement("div");r.style.backgroundColor="white",r.style.opacity="0.85",r.style.color="grey",r.style.top=e.offsetTop,r.style.left=e.offsetLeft,r.style.width=e.clientWidth,r.style.height=e.clientHeight,r.style.zIndex="1001",r.style.position="absolute";var i=document.createElement("p");i.innerHTML="Move to: ",i.style.background="grey",i.style.color="white",i.style.marginTop="20%",i.style.marginLeft="20%",i.style.marginRight="20%",i.style.fontSize="120%",r.appendChild(i);for(ag in n){var i=document.createElement("p");i.id=ag.agentid,Object.keys(n).length===1?(i.innerHTML="no target",i.style.padding="10px",i.style.color="black",i.style.marginLeft="20%",i.style.testAlign="center"):n[ag].agentid!=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgentId()&&(i.innerHTML="client:"+n[ag].agentid,i.style.padding="10px",i.style.marginLeft="20%",i.style.cursor="pointer",i.style.opacity="1.0",i.addEventListener("click",function(t){var n=t.srcElement.id;console.log(n),document.body.removeChild(r),mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setComponentToAgent(n,e)},!1)),r.appendChild(i)}document.body.appendChild(r),setTimeout(function(){document.body.removeChild(r)},3500)}},!0)},this.resizable=function(e){$("div").resizable()},this.addControlPanel=function(e){var t=document.createElement("img");t.src="../resources/configPanel/img/icono_MediaScape.png",t.id="panelTab",document.body.appendChild(t),t.style.top=0,t.style.left=0,t.style.width="15%",t.style.position="absolute",t.style.zIndex=999;var n=this;t.addEventListener("click",function(e){n.ctrlPanel.showing?n.ctrlPanel.hide():n.ctrlPanel.show()});var r=document.createElement("p");r.className="responsive-menu-button",r.innerHTML=' <button type="button" data-toggle="offcanvas"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></button>',r.id="menuButtonP",document.body.appendChild(r),$(document).ready(function(){$("[data-toggle=offcanvas]").click(function(){$(".menu-sidebar").toggleClass("active")})}),this.ctrlPanel=new ControlPanel(e),this.ctrlPanel.hide();var i=_.debounce(function(t){if(document.querySelector(".qr-code-content")){document.querySelector(".qr-code-content").parentNode.removeChild(document.querySelector(".qr-code-content"));var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=document.createElement("div");r.className="qr-code-content",r.id="qr-code-content";var i="";n<767?i=35*n/100:i=25*n/100,document.querySelector(".add-device-content").appendChild(r),mediascape.association.doAssociation("qr","qr-code-content",e,!0,30*n/100,30*n/100,i,50)}},1100);_.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,t),u&&e.apply(i,s)}},window.addEventListener("resize",i,!1);var n=this;document.addEventListener("keydown",function(e){e.keyCode===16&&(n.ctrlPanel.showing?n.ctrlPanel.hide():n.ctrlPanel.show())})},this.addController=function(){function S(e){e!=="showBottom"&&classie.toggle(w,"disabled")}var e=function(e){var t=Math.floor(e/86400),n=Math.floor((e-t*86400)/3600),r=Math.floor((e-t*86400-n*3600)/60),i=Math.floor(e-t*86400-n*3600-r*60),s="";return t>1?s=t+" days ":t>0&&(s=t+" day "),n>1?s+=n+":":n>0&&(s+=n+":"),r>1?s+=r+":":r>0&&(s+=r+":"),i>9?s+=i+"  ":s+="0"+i,s},t=function(){try{mediascape.AdaptationToolkit.Utils.getUrlVar("group")||this.mapp.motions.shared.update(0),this.mapp.motions.shared.vel==0?d.setAttribute("src","../resources/configPanel/img/controller/Play_activo.png"):d.setAttribute("src","../resources/configPanel/img/controller/Pause_activo.png");var t=function(t){a.style.width=100*Math.round(t.pos)/1561+"%",g.innerHTML=e(83869+t.pos)};this.mapp.motions.shared.on("timeupdate",t);var n=this,r=this.mapp.motions.shared.vel;setInterval(function(){n.mapp.motions.shared.vel!=r&&(n.mapp.motions.shared.vel==0?d.setAttribute("src","../resources/configPanel/img/controller/Play_activo.png"):d.setAttribute("src","../resources/configPanel/img/controller/Pause_activo.png"),r=n.mapp.motions.shared.vel)},1500)}catch(i){console.log(i)}};playPause=function(){d.src.indexOf("Play_activo.png")>-1?(d.src="../resources/configPanel/img/controller/Pause_activo.png",this.mapp.motions.shared.update(null,1,0)):(d.src="../resources/configPanel/img/controller/Play_activo.png",this.mapp.motions.shared.update(null,0,0))},foward=function(){var e=this.mapp.motions.shared.query();e=findNextMarkerTime(e),this.mapp.motions.shared.update(e,1,0)},rewind=function(){var e=this.mapp.motions.shared.query();e=findPreviousMarkerTime(e),this.mapp.motions.shared.update(e,1,0)},findNextMarkerTime=function(e){var t=markers.sort(function(e,t){return e.value>t.value?1:-1}),n=t.sort(function(t,n){return t.value<e.pos?1:-1});return n[0].value},findPreviousMarkerTime=function(e){var t=markers.sort(function(e,t){return e.value<t.value?1:-1}),n=t.filter(function(t){return t.value+10<e.pos?!0:!1});return n[0].value};var n=mediascape.AdaptationToolkit.SharedMotion();document.addEventListener("motion-ready",t.bind(n),!1),markers=[{value:260,description:"EH Bildu, PSE comparecencia",progresspoint:26e3/1561},{value:690,description:"PNV comparecencia",progresspoint:69e3/1561},{value:780,description:"EH Bildu - Eizagirre",progresspoint:78e3/1561},{value:970,description:"Tertulia politica",progresspoint:97e3/1561},{value:1074,description:"Podemos Madrid comparecencia",progresspoint:107400/1561},{value:1302,description:"PP Euskadi comparecencia",progresspoint:130200/1561},{value:1404,description:"PP Madrid comparecencia",progresspoint:140400/1561}];var r=document.createElement("nav");r.className="cbp-spmenu cbp-spmenu-horizontal cbp-spmenu-bottom",r.id="cbp-spmenu-s4";var i=document.createElement("button");i.id="showBottom",i.innerHTML="Show/Hide Controller",r.appendChild(i);var s=document.createElement("div");s.className="controller_caja";var o=document.createElement("div");o.className="barra_superior";var u=document.createElement("div");u.className="barra_play";var a=document.createElement("div");a.className="barra_play_estado",u.appendChild(a);for(var f=0;f<markers.length;f++){var l=document.createElement("img");l.className="hito01",l.src="../resources/configPanel/img/controller/hito.jpg",l.style.left="calc("+markers[f].progresspoint+"% - "+f*5+"px)",!function(r){l.addEventListener("click",function(t){t.stopPropagation(),n.mapp.motions.shared.update(markers[r].value,1,0),a.style.width=markers[r].progresspoint+"%",g.innerHTML=e(83869+markers[r].value)})}(f),u.appendChild(l)}u.addEventListener("click",function(t){var r=Math.round(t.offsetX*1561/u.clientWidth);n.mapp.motions.shared.update(r,1,0),a.style.width=100*Math.round(r)/1561+"%",g.innerHTML=e(83869+r)}),o.appendChild(u),s.appendChild(o);var c=document.createElement("div");c.className="w-clearfix barra_inferior";var h=document.createElement("div");h.className="botonera col-lg-4 col-md-5 col-sm-6";var p=document.createElement("img");p.className="btn_r_izda",p.width=111,p.src="../resources/configPanel/img/controller/rew_izda.png",p.addEventListener("click",rewind.bind(n)),h.appendChild(p);var d=document.createElement("img");d.className="btn_stop",d.width=69,d.src="../resources/configPanel/img/controller/Pause_activo.png",d.id="pauseBut",d.addEventListener("click",playPause.bind(n)),h.appendChild(d);var v=document.createElement("img");v.className="btn_r_dcha",v.width=107,v.src="../resources/configPanel/img/controller/rew_dcha.png",v.addEventListener("click",foward.bind(n)),h.appendChild(v),c.appendChild(h);var m=document.createElement("div");m.className="w-clearfix tiempos col-lg-4 col-md-5 col-sm-6";var g=document.createElement("div");g.className="txt_tiempo_ejecucion",g.innerHTML="0:10:37";var y=document.createElement("div");y.className="tiempo_total",y.innerHTML="23:43:50",m.appendChild(g),m.appendChild(y),c.appendChild(m),s.appendChild(c),r.appendChild(s),document.body.appendChild(r);var b=document.getElementById("cbp-spmenu-s4"),w=document.getElementById("showBottom"),E=document.body;w.onclick=function(){classie.toggle(this,"active"),classie.toggle(b,"cbp-spmenu-open"),S("showBottom")}},this.addMenuToCmps=function(e,t){t?e.forEach(function(e){e.querySelector("#menuBar"+e.id)&&e.removeChild(e.querySelector("#menuBar"+e.id));var t=document.createElement("div");t.id="menuBar"+e.id,t.style.backgroundColor="black",t.style.height="30px",t.style.width="100%",t.style.opacity="0.6",t.style.position="absolute",t.style.marginTop="-30px",t.style.zIndex=3,t.style.display="none";var n=document.createElement("img");n.src="../resources/images/full-screen-icon.png",n.style.width="25px",n.style.marginTop="3px",n.id="fullIcon"+e.id,n.style.opacity="1",n.style.float="right",n.style.marginRight="15px",n.style.position="relative",n.addEventListener("click",function(e){e.srcElement=e.srcElement||e.target,console.log(e),document.querySelector("#"+e.srcElement.id.split("fullIcon")[1]).fire("componentToFullscreen")}),t.appendChild(n),e.appendChild(t)}):e.forEach(function(e){e.querySelector("#menuBar"+e.id)&&e.removeChild(e.querySelector("#menuBar"+e.id))})},this.hideAssociationPanel=function(){try{var e=document.querySelector("#associationPanel");if(e&&e.querySelector("div")){var t=e.querySelectorAll("img")[0],n=e.querySelectorAll("img")[1];t.style.display="block",n.style.display="none",e.querySelector("#code")&&e.removeChild(e.querySelector("#code")),e.removeChild(e.querySelector("#panelMenu")),e.removeChild(e.querySelector("#layoutsTable")),e.querySelector("#smallTable").style.display="none",e.style.borderRight="300px solid transparent",e.style.borderTop="100px solid "+associationPanel.style.backgroundColor,e.style.width="0",e.style.height="0",e.style.backgroundColor=""}}catch(r){console.log(r)}},this.toggleFullScreen=function(){!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement?document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},this.addVoiceControl=function(){if(annyang){var e={"show control panel":function(){alert("show control panel")},"hide control panel":function(){alert("hide control panel")},"change layout":function(){mediascape.AdaptationToolkit.Adaptation.UIAdaptation.onLayoutChangeEvent()}};annyang.addCommands(e),annyang.start()}}},uiComponents.__moduleName="uiComponents",uiComponents}),define("mediascape/AdaptationToolkit/SharedMotion/SharedMotion",["msv","mcorp"],function(e,t,n){var r=n,i=function(){return this.init=function(){this.mapp=MCorp.app("2631039008064506367",{anon:!0}),this.mapp.cams={},this.mapp.init();var e=this;this.mapp.run=function(){var t=new CustomEvent("motion-ready",{detail:{loaded:!0}});document.addEventListener("agentChange",function(n){document.dispatchEvent(t),document.removeEventListener("agentChange",arguments.callee),e.mapp.motions.shared.update(null,1)},!1)}},this.addVideo=function(e,t,n){var r=n||0;if(!e)throw new Error("video without defined");var i=this,s=e,o=s.getAttribute("id");i.mapp.msvs.shared.query();var u={};u.skew=r,u.target=.25,u.debug=!1,u.mode="skip",console.log(u),i.mapp.cams[o]=(new mediascape.mediaSync).mediaSync(s,i.mapp.msvs.shared,u)},this.addMovingCursor=function(e){this.cursor=n.movingCursor(this.mapp.motions.shared,e)},this};return document.addEventListener("mediascape-modules-ready",function(){mediascape.AdaptationToolkit.SharedMotion().init()}),i.__moduleName="SharedMotion",i}),define("mediascape/AdaptationToolkit/utils/utils",[],function(){var e=function(){return this.getUrlVar=function(e){var t={},n=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r});return t[e]},this.createGroupId=function(){var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},this.getObjectDiff=function(e,t){var n=[],r=["componentsStatus"];return function(e,t){if(e.constructor==Array)for(var i=0;i<e.length;i++)r.push("["+e[i].compId+"]"),arguments.callee(e[i],t[i]),r.pop();else if(e.constructor==Object||e.constructor!=Number&&e.constructor!=String&&e.constructor!=Date&&e.constructor!=RegExp&&e.constructor!=Function&&e.constructor!=Boolean)for(var s in e)r.push("."+s),e[s].constructor!=Function&&arguments.callee(e[s],t[s]),r.pop();else if(e.constructor!=Function&&(e!=t||e.length!=t.length)&&r.length>2){var o=r[1].substring(1,r[1].length-1);r=r.filter(function(e){if(e.indexOf("undefined")===-1)return!0});var u=r[r.length-1].substring(1);n.push({compId:o,property:u,newValue:e})}}(e,t),n},this.removeFromArray=function(t,n){var r=t.indexOf(n);while(r!==-1)t.splice(r,1),r=t.indexOf(n)},this};return e.__moduleName="Utils",e}),define("mediascape/AdaptationToolkit/AdaptationToolkit",["mediascape/AdaptationToolkit/adaptation/modules","mediascape/AdaptationToolkit/componentManager/modules","mediascape/AdaptationToolkit/uiComponents/uiComponents","mediascape/AdaptationToolkit/SharedMotion/SharedMotion","mediascape/AdaptationToolkit/utils/utils"],function(){var e=Array.prototype.slice.apply(arguments),t={},t=function n(t,r,i){var s=[],o=0,u=0;for(var a=0;a<e.length;++a){var f=e[a].__moduleName;f==="SharedMotion"?n[f]=e[a]:n[f]=new e[a](n,"gq"+a,n)}return n};return t.__moduleName="AdaptationToolkit",t}),Function.prototype.getBody=function(){var e=this.toString().match(/\{([\s\S]*)\}/m)[1];return e.replace(/^\s*\/\/.*$/mg,"")},window.dataRegister={save:function(e,t){typeof Storage!="undefined"?localStorage.setItem(e,JSON.stringify(t)):console.warn("Not local storage supported")},get:function(e){return JSON.parse(localStorage.getItem(e))},init:function(){function e(e){var t=(new Date).getTime()}function t(e){var t=(new Date).getTime()}document.addEventListener("onlayoutchange",e.bind(this),!0),document.addEventListener("onComponentChange",t.bind(this),!0)}},function(e){function n(e){return/^[A-Za-z0-9\._-]{1,255}$/.test(e)}function r(e){try{JSON.parse(e)}catch(t){return!1}return!0}function i(e,t){var n="";return e?n+="network/":n+="local/",n+=t,n+"/"}var t="ws://localhost:2000/",s=function(e,t){this.id=e,this.socket=t,this.url="#",this.readyState=s.prototype.CONNECTING,this.bufferedAmount=0,this.extensions=this.socket.extensions,this.protocol=this.socket.protocol,this.binaryType="blob",this.__events={}};s.prototype.send=function(e){if(this.readyState!=s.prototype.OPEN)throw"message cannot be sent because the web socket is not open";var t={Action:"message",Target:this.id,Payload:e};this.socket.send(JSON.stringify(t))},s.prototype.close=function(e,t){if(this.readyState!=s.prototype.OPEN)throw"web socket cannot be closed because it is not open";this.__doClose(e||3001,t||"Closed by local peer",this.socket)},s.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},s.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var r=this.__events[e];for(var i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},s.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n)t[n].call(this,e);var r=this["on"+e.type];r&&r.call(this,e)},s.prototype.__handleEvent=function(e){window.setTimeout(function(){"readyState"in e&&(this.readyState=e.readyState);var t;if(e.type=="open"||e.type=="closing"||e.type=="error")t=this.__createSimpleEvent(e.type);else if(e.type=="close")t=this.__createSimpleEvent("close"),t.code=e.code,t.reason=e.reason;else{if(e.type!="message")throw"unknown event type: "+e.type;t=this.__createMessageEvent(e.senderId,e.message)}this.dispatchEvent(t),e.callback&&e.callback.call(this)}.bind(this),1)},s.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},s.prototype.__createMessageEvent=function(e,t){if(window.MessageEvent&&typeof MessageEvent=="function")return new MessageEvent("message",{view:window,bubbles:!1,cancelable:!1,senderId:e,data:t});if(document.createEvent&&window.MessageEvent){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:"message",data:t,bubbles:!1,cancelable:!1}},s.prototype.__doClose=function(e,t,n){this.__handleEvent({type:"closing",readyState:s.prototype.CLOSING,callback:function(){this.__handleEvent({type:"close",readyState:s.prototype.CLOSED,code:e,reason:t,callback:function(){var e=new CustomEvent("disconnect",{bubbles:!1,cancelable:!1,detail:{target:this}});n.dispatchEvent(e),n.ondisconnect&&n.ondisconnect.call(this,e)}})}})},s.prototype.CONNECTING=0,s.prototype.OPEN=1,s.prototype.CLOSING=2,s.prototype.CLOSED=3;var o=function(e,r,o){function h(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1}if(!n(e))throw"Invalid Service Name: "+e;var u=Math.floor(Math.random()*1e8),a=i(o,e),f=new WebSocket(t+a+u,r);f.id=u,f.peers=[];var l=new WebSocket(t+"control/"+a+u),c={};return l.onmessage=function(e){var t=JSON.parse(e.data);switch(t.Action){case"connect":var n=new s(t.Target,l);c[t.Target]=n;if(!h(n,f.peers)){console.log(h(n,f.peers)),f.peers.push(n);var r=new CustomEvent("connect",{bubbles:!1,cancelable:!1,detail:{target:n}});f.dispatchEvent(r),f.onconnect&&f.onconnect.call(this,r),window.setTimeout(function(){n.__handleEvent({type:"open",readyState:s.prototype.OPEN})},200)}break;case"disconnect":var n=c[t.Target];if(n){for(var i=0;i<f.peers.length;i++)f.peers[i].id==t.Target&&f.peers.splice(i,1);n.__doClose(3e3,"Closed by remote peer",f),delete c[t.Target]}break;case"message":var n=c[t.Source];if(n){var o=t.Payload;Object.prototype.toString.call(o)!="[object String]"&&(o=JSON.stringify(o)),n.__handleEvent({type:"message",message:o,senderId:t.Source})}}},f},u=function(e,t){return new o(e,t,!0)},a=function(e,t){return new o(e,t,!1)};e.NetworkWebSocket||(e.NetworkWebSocket=(e.module||{}).exports=u),e.LocalWebSocket||(e.LocalWebSocket=(e.module||{}).exports=a)}(this),define("namedwebsockets",function(){}),define("mediascape/Discovery/discovery",["jquery","namedwebsockets"],function(e,t){var n=null,r=function(){this.connectNWS=function(t){var r=new Promise(function(r,i){var s=e.Deferred();console.log("connection namedWebSockets"),n=NetworkWebSocket(t),n.peersIds=[],n.emiter=!1,n.onopen=function(e){console.log("* Named WebSockets connection established."),console.log('Connected to "'+t+'" as peer ['+n.id+"]"),console.log("NetworkWebSocket"),console.log(n),console.log("Event"),console.log(e),n.peersIds.push(n.id)},n.onconnect=function(e){console.log("connect");var t=e.detail.target;console.log("Peer ["+t.id+"] connected"),n.peersIds.push(t.id)},n.onclose=function(e){console.log("closed"),n.peersIds=[],n.close(),n=null},setTimeout(function(){r(n)},500)});return r},this.isPresent=function(t){function r(){console.log("namedwebsocketsPresence");var t=new Promise(function(t,n){var r=e.Deferred(),i=NetworkWebSocket("presence");i.onopen=function(e){i.close(),i=null,t(JSON.parse('{"presence":true}'))},i.onerror=function(e){t(JSON.parse('{"presence":false}'))}});return t}function i(){var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.battery||navigator.webkitBattery||navigator.mozBattery||window.navigator.msBattery||navigator.getBattery)t(JSON.parse('{"presence":true}'));else var i="http://localhost:8182/discoveryagent/battery/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceBattery"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function s(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/bluetooth/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceBluetooth"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function o(){var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)if(typeof MediaStreamTrack=="undefined")t(JSON.parse('{"presence":false}'));else if(MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }")MediaStreamTrack.getSources(function(n){var r=0;for(var i=0;i<n.length;i++)n[i].kind=="video"&&r++;if(r>0)t(JSON.parse('{"presence":true}'));else var s="http://localhost:8182/discoveryagent/camera/presence",o=e.ajax({url:s,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceCamera"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});else var i="http://localhost:8182/discoveryagent/camera/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceCamera"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))});else var i="http://localhost:8182/discoveryagent/camera/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceCamera"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function u(){var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }"?MediaStreamTrack.getSources(function(e){var n=0;for(var r=0;r<e.length;r++)e[r].kind=="audio"&&n++;n>0?t(JSON.parse('{"presence":true}')):t(JSON.parse('{"presence":false}'))}):t(JSON.parse('{"presence":false}'))});return t}function a(){var t=new Promise(function(t,n){var r=e.Deferred();window.DeviceProximityEvent?t(JSON.parse('{"presence":true}')):t(JSON.parse('{"presence":false}'))});return t}function f(){var t=new Promise(function(t,n){var r=e.Deferred();if(!navigator.geolocation){var i="http://localhost:8182/discoveryagent/geolocation/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceGeolocation"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))});return s}t(JSON.parse('{"presence":true}'))});return t}function l(){var t=new Promise(function(t,n){var r=e.Deferred();navigator.language?t(JSON.parse('{"presence":true}')):t(JSON.parse('{"presence":false}'))});return t}function c(){var t=new Promise(function(t,n){var r=e.Deferred();if(screen.orientation||screen.msorientation||screen.mozOrientation)t(JSON.parse('{"presence":true}'));else var i="http://localhost:8182/discoveryagent/orientation/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceOrientation"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function h(){var t=new Promise(function(t,n){var r=e.Deferred();if(screen)t(JSON.parse('{"presence":true}'));else var i="http://localhost:8182/discoveryagent/screen/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceScreen"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function p(){var t=new Promise(function(t,n){var r=e.Deferred();if("ontouchstart"in window)t(JSON.parse('{"presence":true}'));else var i="http://localhost:8182/discoveryagent/touchscreen/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceTouchscreen"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function d(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/upnp/presence";e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceUpnp"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function v(){var t=new Promise(function(t,n){var r=e.Deferred();if(window.UserProximityEvent)t(JSON.parse('{"presence":true}'));else var i="http://localhost:8182/discoveryagent/userProximity/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceUserProximity"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function m(){var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate)t(JSON.parse('{"presence":true}'));else var i="http://localhost:8182/discoveryagent/vibration/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceVibration"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function g(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/agent/presence",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"presenceAgent"}).done(function(e,n,r){console.log(e),t(JSON.parse('{"presence":true}'))}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"presence":"Service Not Working"}')):t(JSON.parse('{"presence":false}'))})});return t}function y(){var t=new Promise(function(t,n){var r=e.Deferred();navigator.onLine||navigator.connection||navigator.mozConnection||navigator.webkitConnection?navigator.connection||navigator.mozConnection||navigator.webkitConnection?t(JSON.parse('{"presence":true}')):t(JSON.parse('{"presence":false}')):t(JSON.parse('{"presence":false}'))});return t}function b(){var t=new Promise(function(t,n){var r=e.Deferred();navigator.userAgent?t(JSON.parse('{"presence":true}')):t(JSON.parse('{"presence":false}'))});return t}if(t){if(t.toLowerCase().indexOf("battery")!=-1)return i();if(t.toLowerCase().indexOf("bluetooth")!=-1)return s();if(t.toLowerCase().indexOf("camera")!=-1)return o();if(t.toLowerCase().indexOf("audio")!=-1)return u();if(t.toLowerCase().indexOf("deviceproximity")!=-1)return a();if(t.toLowerCase().indexOf("geolocation")!=-1)return f();if(t.toLowerCase().indexOf("language")!=-1)return l();if(t.toLowerCase().indexOf("orientation")!=-1)return c();if(t.toLowerCase().indexOf("screensize")!=-1)return h();if(t.toLowerCase().indexOf("touchscreen")!=-1)return p();if(t.toLowerCase().indexOf("upnp")!=-1)return d();if(t.toLowerCase().indexOf("userproximity")!=-1)return v();if(t.toLowerCase().indexOf("vibration")!=-1)return m();if(t.toLowerCase().indexOf("connection")!=-1)return y();if(t.toLowerCase().indexOf("devicetype")!=-1)return b();var n=new Promise(function(t,n){var r=e.Deferred();t(JSON.parse('{"presence":false}'))});return n}return g()},this.getExtra=function(t){function r(){var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.battery||navigator.webkitBattery||navigator.mozBattery||window.navigator.msBattery||navigator.getBattery)navigator.getBattery?navigator.getBattery().then(function(e){t(JSON.parse('{"extra":{"level":"'+Math.floor(e.level*100)+'%","charging":"'+e.charging+'"}}'))}):t(JSON.parse('{"extra":{"level":"'+Math.floor(navigator.battery.level*100)+'%","charging":"'+navigator.battery.charging+'"}}'));else var i="http://localhost:8182/discoveryagent/battery/extra",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraBattery"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function i(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/bluetooth/extra",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraBluetooth"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function s(){var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)typeof MediaStreamTrack=="undefined"?t(JSON.parse('{"extra":{"cameras":false}}')):MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }"?MediaStreamTrack.getSources(function(e){var n=0;for(var r=0;r<e.length;r++)e[r].kind=="video"&&n++;n>0?t(JSON.parse('{"extra":{"cameras":"'+n+'"}}')):t(JSON.parse('{"extra":{"cameras":false}}'))}):t(JSON.parse('{"extra":{"cameras":false}}'));else var i="http://localhost:8182/discoveryagent/camera/extra",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraCamera"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function o(){console.log("audioGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia?MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }"?MediaStreamTrack.getSources(function(e){var n=0;for(var r=0;r<e.length;r++)e[r].kind=="audio"&&n++;t(JSON.parse('{"extra":{"audio":"'+n+'"}}'))}):t(JSON.parse('{"extra":{"audio":false}}')):t(JSON.parse('{"extra":{"audio":false}}'))});return t}function u(){console.log("deviceProximityGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();window.DeviceProximityEvent?window.addEventListener("deviceproximity",function(e){if(e.value){var n=e.max,r=e.min,i=e.value;t(JSON.parse('{"extra":{"deviceProximity":"'+e.value+'"}}'))}else t(JSON.parse('{"extra":false}'))}):t(JSON.parse('{"extra":false}'))});return t}function a(){console.log("geolocationGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){t(JSON.parse('{"extra":[{"latitude":"'+e.coords.latitude+'"},{"longitude":"'+e.coords.longitude+'"}]}'))},function(n){var r="http://localhost:8182/discoveryagent/geolocation/extra",i=e.ajax({url:r,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraGeolocation"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});else var i="http://localhost:8182/discoveryagent/geolocation/extra",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraGeolocation"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function f(){console.log("languageGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();navigator.language?t(JSON.parse('{"extra":{"language":"'+navigator.language+'"}}')):t(JSON.parse('{"extra":false}'))});return t}function l(){console.log("orientationGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();if(screen.orientation||screen.msorientation||screen.mozOrientation){if(screen.orientation)screen.orientation.angle==180?t(JSON.parse('{"extra":{"orientation":"reverse portrait"}}')):screen.orientation.angle==0?t(JSON.parse('{"extra":{"orientation":"portrait"}}')):screen.orientation.angle==-90||screen.orientation.angle==270?t(JSON.parse('{"extra":{"orientation":"reverse landscape"}}')):screen.orientation.angle==90&&t(JSON.parse('{"extra":{"orientation":"landscape"}}'));else if(screen.msorientation||screen.mozOrientation)screen.mozOrientation=="portrait-secondary"?t(JSON.parse('{"extra":{"orientation":"reverse portrait"}}')):screen.mozOrientation=="portrait-primary"?t(JSON.parse('{"extra":{"orientation":"portrait"}}')):screen.mozOrientation=="landscape-secondary"?t(JSON.parse('{"extra":{"orientation":"reverse landscape"}}')):screen.mozOrientation=="landscape-primary"&&t(JSON.parse('{"extra":{"orientation":"landscape"}}'))}else var i="http://localhost:8182/discoveryagent/orientation/extra",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraOrientation"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function c(){console.log("screenSizeGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();if(screen){var i,s;if(parseInt(navigator.appVersion)>3)i=screen.width,s=screen.height;else if(navigator.appName=="Netscape"&&parseInt(navigator.appVersion)==3&&navigator.javaEnabled()){var o=java.awt.Toolkit.getDefaultToolkit(),u=o.getScreenSize();i=u.width,s=u.height}document.body.insertAdjacentHTML("beforeend",'<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: absolute; top: 100%;"></div>');var a=document.getElementById("dpi").offsetWidth,f=document.getElementById("dpi").offsetHeight,l=screen.width/window.devicePixelRatio/a,c=screen.height/window.devicePixelRatio/f;document.getElementById("dpi").remove(),t(JSON.parse('{"extra":[{"width":"'+i+'","height":"'+s+'"},{"screenX":"'+l+'","screenY":"'+c+'"}]}')),mediascape.screenX=l,mediascape.screenY=c}else var h="http://localhost:8182/discoveryagent/screen/extra",p=e.ajax({url:h,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraScreen"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function h(t,n){console.log("upnpGetExtra");var r=new Promise(function(r,i){var s=e.Deferred(),o={elementNumber:t,elementType:n},u="http://localhost:8182/discoveryagent/upnp/extra",a=e.ajax({url:u,data:o,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraUpnp"}).done(function(e,t,n){r(e)}).fail(function(e,t,n){e.status==404?r(JSON.parse('{"extra":"Service Not Working"}')):r(JSON.parse('{"extra":false}'))})});return r}function p(){console.log("userProximityGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();if(window.UserProximityEvent)window.addEventListener("userproximity",function(e){e.near?t(JSON.parse('{"extra":{"userProximity":"'+e.value+'"}}')):t(JSON.parse('{"extra":false}'))});else var i="http://localhost:8182/discoveryagent/userProximity/extra",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"extraUserProximity"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"extra":"Service Not Working"}')):t(JSON.parse('{"extra":false}'))})});return t}function d(){console.log("connectionGetExtra");var t=new Promise(function(t,n){var r=e.Deferred();if(navigator.onLine||navigator.connection||navigator.mozConnection||navigator.webkitConnection){var i,s;i=navigator.connection||{type:"0"};switch(i.type){case i.CELL_3G:s="mediumbandwidth";break;case i.CELL_2G:s="lowbandwidth";break;default:s="highbandwidth"}s!=undefined?t(JSON.parse('{"extra":{"connection":"'+s+'"}}')):t(JSON.parse('{"extra":false}'))}else t(JSON.parse('{"extra":false}'))});return t}function v(){var t=new Promise(function(t,n){var r=e.Deferred();navigator.userAgent&&(navigator.userAgent.toLowerCase().indexOf("mobile")!=-1?navigator.userAgent.toLowerCase().indexOf("ipad")!=-1?t(JSON.parse('{"extra":{"deviceType":"tablet"}}')):t(JSON.parse('{"extra":{"deviceType":"mobile"}}')):navigator.userAgent.toLowerCase().indexOf("x11")!=-1||navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1||navigator.userAgent.toLowerCase().indexOf("windows nt")!=-1?t(JSON.parse('{"extra":{"deviceType":"computer"}}')):navigator.userAgent.toLowerCase().indexOf("hbbtv")!=-1||navigator.userAgent.toLowerCase().indexOf("rk3066")!=-1?t(JSON.parse('{"extra":{"deviceType":"tv"}}')):navigator.userAgent.toLowerCase().indexOf("android")!=-1&&t(JSON.parse('{"extra":{"deviceType":"tablet"}}')))});return t}function m(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/agent/capabilities",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"capabilities"}).done(function(e,n,r){(navigator.battery||navigator.webkitBattery||navigator.mozBattery||window.navigator.msBattery||navigator.getBattery)&&!e.capabilities[0].batteryPresence&&(navigator.getBattery?navigator.getBattery().then(function(t){e.capabilities[0].batteryPresence=!0,e.capabilities[1].batteryExtra=JSON.parse('{"level":"'+Math.floor(t.level*100)+'%","charging":"'+t.charging+'"}')}):(e.capabilities[0].batteryPresence=!0,e.capabilities[1].batteryExtra=JSON.parse('[{"level":"'+Math.floor(navigator.battery.level*100)+'%","charging":"'+navigator.battery.charging+'"}]'))),(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)&&!e.capabilities[2].cameraPresence&&MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }"&&MediaStreamTrack.getSources(function(t){var n=0;for(var r=0;r<t.length;r++)t[r].kind=="video"&&n++;e.capabilities[2].cameraPresence=!0,e.capabilities[3].cameraExtra=n});if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)if(MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }")MediaStreamTrack.getSources(function(t){var n=0;for(var r=0;r<t.length;r++)t[r].kind=="audio"&&n++;if(n>0){var i='{"audioPresence":true}',s=JSON.parse(i);e.capabilities.push(s);var o='{"audioExtra":'+n+"}",u=JSON.parse(o);e.capabilities.push(u)}else{var i='{"audioPresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"audioExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}});else{var i='{"audioPresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"audioExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}if(screen&&!e.capabilities[4].orientationPresence){var a,f;e.capabilities[4].screenSizePresence=!0;if(parseInt(navigator.appVersion)>3)a=screen.width,f=screen.height;else if(navigator.appName=="Netscape"&&parseInt(navigator.appVersion)==3&&navigator.javaEnabled()){var l=java.awt.Toolkit.getDefaultToolkit(),c=l.getScreenSize();a=c.width,f=c.height}document.body.insertAdjacentHTML("beforeend",'<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: absolute; top: 100%;"></div>');var h=document.getElementById("dpi").offsetWidth,p=document.getElementById("dpi").offsetHeight,d=screen.width/window.devicePixelRatio/h,v=screen.height/window.devicePixelRatio/p;document.getElementById("dpi").remove(),e.capabilities[5].screenSizeExtra=JSON.parse('[{"width":"'+a+'","height":"'+f+'"},{"screenX":"'+d+'","screenY":"'+v+'"}]')}window.UserProximityEvent&&!e.capabilities[6].userProximityPresence&&window.addEventListener("userproximity",function(t){t.near&&(e.capabilities[6].userProximityPresence=!0,e.capabilities[7].userProximityExtra=t.value)}),(navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate)&&!e.capabilities[8].vibrationPresence&&(e.capabilities[8].vibrationPresence=!0),"ontouchstart"in window&&!e.capabilities[9].touchscreenPresence&&(e.capabilities[9].touchScreenPresence=!0);if((screen.orientation||screen.msorientation||screen.mozOrientation)&&!e.capabilities[10].orientationPresence)if(screen.orientation){e.capabilities[10].orientationPresence=!0;if(screen.orientation.angle==0)e.capabilities[11].orientationExtra="portrait";else if(screen.orientation.angle==180)e.capabilities[11].orientationExtra="reverse portrait";else if(screen.orientation.angle==90)e.capabilities[11].orientationExtra="landscape";else if(screen.orientation.angle==-90||screen.orientation.angle==270)e.capabilities[11].orientationExtra="reverse landscape"}else if(screen.msorientation||screen.mozOrientation)e.capabilities[10].orientationPresence=!0,screen.orientation=="portrait-primary"?e.capabilities[11].orientationExtra="portrait":screen.orientation=="portrait-secondary"?e.capabilities[11].orientationExtra="reverse portrait":screen.orientation=="landscape-primary"?e.capabilities[11].orientationExtra="landscape":screen.orientation=="landscape-secondary"&&(e.capabilities[11].orientationExtra="reverse landscape");navigator.geolocation&&!e.capabilities[12].geolocationPresence&&navigator.geolocation.getCurrentPosition(function(t){e.capabilities[12].geolocationPresence=!0,e.capabilities[13].geolocationExtra=JSON.parse('[{"latitude":"'+t.coords.latitude+'"},{"longitude":"'+t.coords.longitude+'"}]')});if(navigator.language){var i='{"languagePresence":true}',s=JSON.parse(i);e.capabilities.push(s);var o='{"languageExtra":"'+navigator.language+'"}',u=JSON.parse(o);e.capabilities.push(u)}else{var i='{"languagePresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"languageExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}if(window.DeviceProximityEvent)window.addEventListener("deviceproximity",function(t){if(t.value){var n='{"deviceProximityPresence":true}',r=JSON.parse(n);e.capabilities.push(r);var i='{"deviceProximityExtra":'+t.value+"}",s=JSON.parse(i);e.capabilities.push(s)}else{var n='{"deviceProximityPresence":false}',r=JSON.parse(n);e.capabilities.push(r);var i='{"deviceProximityExtra":false}',s=JSON.parse(i);e.capabilities.push(s)}});else{var i='{"deviceProximityPresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"deviceProximityExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}if(navigator.onLine||navigator.connection||navigator.mozConnection||navigator.webkitConnection){var m,g;m=navigator.connection||{type:"0"};switch(m.type){case m.CELL_3G:g="mediumbandwidth";break;case m.CELL_2G:g="lowbandwidth";break;default:g="highbandwidth"}if(g!=undefined){var i='{"connectionPresence":true}',s=JSON.parse(i);e.capabilities.push(s);var o='{"connectionExtra":"'+g+'"}',u=JSON.parse(o);e.capabilities.push(u)}else{var i='{"connectionPresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"connectionExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}}else{var i='{"connectionPresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"connectionExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}if(navigator.userAgent){var i='{"deviceTypePresence":true}',s=JSON.parse(i);e.capabilities.push(s);if(navigator.userAgent.toLowerCase().indexOf("mobile")!=-1)if(navigator.userAgent.toLowerCase().indexOf("ipad")!=-1){var o='{"deviceType":"tablet"}',u=JSON.parse(o);e.capabilities.push(u)}else{var o='{"deviceType":"mobile"}',u=JSON.parse(o);e.capabilities.push(u)}else if(navigator.userAgent.toLowerCase().indexOf("x11")!=-1||navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1||navigator.userAgent.toLowerCase().indexOf("windows nt")!=-1){var o='{"deviceType":"computer"}',u=JSON.parse(o);e.capabilities.push(u)}else if(navigator.userAgent.toLowerCase().indexOf("hbbtv")!=-1||navigator.userAgent.toLowerCase().indexOf("rk3066")!=-1){var o='{"deviceType":"tv"}',u=JSON.parse(o);e.capabilities.push(u)}else if(navigator.userAgent.toLowerCase().indexOf("android")!=-1){var o='{"deviceType":"tablet"}',u=JSON.parse(o);e.capabilities.push(u)}}else{var i='{"deviceTypePresence":false}',s=JSON.parse(i);e.capabilities.push(s);var o='{"deviceTypeExtra":false}',u=JSON.parse(o);e.capabilities.push(u)}setTimeout(function(){t(e)},500)}).fail(function(e,n,r){var i='{"capabilities":[]}',s=JSON.parse(i);if(navigator.battery||navigator.webkitBattery||navigator.mozBattery||window.navigator.msBattery||navigator.getBattery){var o='{"batteryPresence":true}',u=JSON.parse(o);s.capabilities.push(u);if(navigator.getBattery)navigator.getBattery().then(function(e){var t=JSON.parse('{"batteryExtra":{"level":"'+Math.floor(e.level*100)+'%","charging":"'+e.charging+'"}}');s.capabilities.push(t)});else{var a=JSON.parse('{"batteryExtra":{"level":"'+Math.floor(navigator.battery.level*100)+'%","charging":"'+navigator.battery.charging+'"}}');s.capabilities.push(a)}}else{var o='{"batteryPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"batteryExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)if(MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }")MediaStreamTrack.getSources(function(e){var t=0;for(var n=0;n<e.length;n++)e[n].kind=="audio"&&t++;if(t>0){var r='{"audioPresence":true}',i=JSON.parse(r);s.capabilities.push(i);var o='{"audioExtra":'+t+"}",u=JSON.parse(o);s.capabilities.push(u)}else{var r='{"audioPresence":false}',i=JSON.parse(r);s.capabilities.push(i);var o='{"audioExtra":false}',u=JSON.parse(o);s.capabilities.push(u)}});else{var o='{"audioPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"audioExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)if(MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }")MediaStreamTrack.getSources(function(e){var t=0;for(var n=0;n<e.length;n++)e[n].kind=="video"&&t++;if(t>0){var r='{"cameraPresence":true}',i=JSON.parse(r);s.capabilities.push(i);var o='{"cameraExtra":'+t+"}",u=JSON.parse(o);s.capabilities.push(u)}else{var r='{"cameraPresence":false}',i=JSON.parse(r);s.capabilities.push(i);var o='{"cameraExtra":false}',u=JSON.parse(o);s.capabilities.push(u)}});else{var o='{"cameraPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"cameraExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(screen){var l,c;if(parseInt(navigator.appVersion)>3)l=screen.width,c=screen.height;else if(navigator.appName=="Netscape"&&parseInt(navigator.appVersion)==3&&navigator.javaEnabled()){var h=java.awt.Toolkit.getDefaultToolkit(),p=h.getScreenSize();l=p.width,c=p.height}document.body.insertAdjacentHTML("beforeend",'<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: absolute; top: 100%;"></div>');var d=document.getElementById("dpi").offsetWidth,v=document.getElementById("dpi").offsetHeight,m=screen.width/window.devicePixelRatio/d,g=screen.height/window.devicePixelRatio/v,o='{"screenSizePresence":true}',u=JSON.parse(o);s.capabilities.push(u),document.getElementById("dpi").remove();var f='{"screenSizeExtra":[{"width":"'+l+'","height":"'+c+'"},{"screenX":"'+m+'","screenY":"'+g+'"}]}',a=JSON.parse(f);s.capabilities.push(a)}else{var o='{"screenSizePresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"screenSizeExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(window.UserProximityEvent)window.addEventListener("userproximity",function(e){if(e.near){var t='{"userProximityPresence":true}',n=JSON.parse(t);s.capabilities.push(n);var r='{"userProximityExtra":'+evet.near+"}",i=JSON.parse(r);s.capabilities.push(i)}else{var t='{"userProximityPresence":false}',n=JSON.parse(t);s.capabilities.push(n);var r='{"userProximityExtra":false}',i=JSON.parse(r);s.capabilities.push(i)}});else{var o='{"userProximityPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"userProximityExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate){var o='{"vibrationPresence":true}',u=JSON.parse(o);s.capabilities.push(u)}else{var o='{"vibrationPresence":false}',u=JSON.parse(o);s.capabilities.push(u)}if("ontouchstart"in window){var o='{"touchScreenPresence":true}',u=JSON.parse(o);s.capabilities.push(u)}else{var o='{"touchScreenPresence":false}',u=JSON.parse(o);s.capabilities.push(u)}if(screen.orientation||screen.msorientation||screen.mozOrientation){var y,o='{"orientationPresence":true}',u=JSON.parse(o);s.capabilities.push(u);if(screen.orientation){if(screen.orientation.angle==0)y="portrait";else if(screen.orientation.angle==180)y="reverse portrait";else if(screen.orientation.angle==90)y="landscape";else if(screen.orientation.angle==-90||screen.orientation.angle==270)y="reverse landscape";var f='{"orientationExtra":"'+y+'"}',a=JSON.parse(f);s.capabilities.push(a)}else if(screen.msorientation||screen.mozOrientation){screen.orientation=="portrait-primary"?y="portrait":screen.orientation=="portrait-secondary"?y="reverse portrait":screen.orientation=="landscape-primary"?y="landscape":screen.orientation=="landscape-secondary"&&(y="reverse landscape");var f='{"orientationExtra":"'+y+'"}',a=JSON.parse(f);s.capabilities.push(a)}}else{var o='{"orientationPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"orientationExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){if(e){var t='{"geolocationPresence":true}',n=JSON.parse(t);s.capabilities.push(n);var r='{"geolocationExtra":[{"latitude":"'+e.coords.latitude+'"},{"longitude":"'+e.coords.longitude+'"}]}',i=JSON.parse(r);s.capabilities.push(i)}else{var t='{"geolocationPresence":false}',n=JSON.parse(t);s.capabilities.push(n);var r='{"geolocationExtra":false}',i=JSON.parse(r);s.capabilities.push(i)}});else{var o='{"geolocationPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"geolocationExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(navigator.language){var o='{"languagePresence":true}',u=JSON.parse(o);s.capabilities.push(u);var f='{"languageExtra":"'+navigator.language+'"}',a=JSON.parse(f);s.capabilities.push(a)}else{var o='{"languagePresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"languageExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(window.DeviceProximityEvent)window.addEventListener("deviceproximity",function(e){if(e.value){var t='{"deviceProximityPresence":true}',n=JSON.parse(t);s.capabilities.push(n);var r='{"deviceProximityExtra":'+e.value+"}",i=JSON.parse(r);s.capabilities.push(i)}else{var t='{"deviceProximityPresence":false}',n=JSON.parse(t);s.capabilities.push(n);var r='{"deviceProximityExtra":false}',i=JSON.parse(r);s.capabilities.push(i)}});else{var o='{"deviceProximityPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"deviceProximityExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}var o='{"bluetoothPresence":false}',u=JSON.parse(o);s.capabilities.push(u);if(navigator.onLine||navigator.connection||navigator.mozConnection||navigator.webkitConnection){var b,w;b=navigator.connection||{type:"0"};switch(b.type){case b.CELL_3G:w="mediumbandwidth";break;case b.CELL_2G:w="lowbandwidth";break;default:w="highbandwidth"}if(w!=undefined){var o='{"connectionPresence":true}',u=JSON.parse(o);s.capabilities.push(u);var f='{"connectionExtra":"'+w+'"}',a=JSON.parse(f);s.capabilities.push(a)}else{var o='{"connectionPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"connectionExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}}else{var o='{"connectionPresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"connectionExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}if(navigator.userAgent){var o='{"deviceTypePresence":true}',u=JSON.parse(o);s.capabilities.push(u);if(navigator.userAgent.toLowerCase().indexOf("mobile")!=-1)if(navigator.userAgent.toLowerCase().indexOf("ipad")!=-1){var f='{"deviceType":"tablet"}',a=JSON.parse(f);s.capabilities.push(a)}else{var f='{"deviceType":"mobile"}',a=JSON.parse(f);s.capabilities.push(a)}else if(navigator.userAgent.toLowerCase().indexOf("x11")!=-1||navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1||navigator.userAgent.toLowerCase().indexOf("windows nt")!=-1){var f='{"deviceType":"computer"}',a=JSON.parse(f);s.capabilities.push(a)}else if(navigator.userAgent.toLowerCase().indexOf("hbbtv")!=-1||navigator.userAgent.toLowerCase().indexOf("rk3066")!=-1){var f='{"deviceType":"tv"}',a=JSON.parse(f);s.capabilities.push(a)}else if(navigator.userAgent.toLowerCase().indexOf("android")!=-1){var f='{"deviceType":"tablet"}',a=JSON.parse(f);s.capabilities.push(a)}}else{var o='{"deviceTypePresence":false}',u=JSON.parse(o);s.capabilities.push(u);var f='{"deviceTypeExtra":false}',a=JSON.parse(f);s.capabilities.push(a)}setTimeout(function(){t(s)},500)})});return t}if(t){if(t.toLowerCase().indexOf("battery")!=-1)return r();if(t.toLowerCase().indexOf("bluetooth")!=-1)return i();if(t.toLowerCase().indexOf("camera")!=-1)return s();if(t.toLowerCase().indexOf("audio")!=-1)return o();if(t.toLowerCase().indexOf("deviceproximity")!=-1)return u();if(t.toLowerCase().indexOf("geolocation")!=-1)return a();if(t.toLowerCase().indexOf("language")!=-1)return f();if(t.toLowerCase().indexOf("orientation")!=-1)return l();if(t.toLowerCase().indexOf("screensize")!=-1)return c();if(t.toLowerCase().indexOf("upnp")!=-1)return h();if(t.toLowerCase().indexOf("userproximity")!=-1)return p();if(t.toLowerCase().indexOf("connection")!=-1)return d();if(t.toLowerCase().indexOf("devicetype")!=-1)return v();var n=new Promise(function(t,n){var r=e.Deferred();t(JSON.parse('{"extra":false}'))});return n}return m()},this.getDevices=function(t){function r(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/bluetooth/devices",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"devicesBluetooth"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"devices":"Service Not Working"}')):t(JSON.parse('{"devices":false}'))})});return t}function i(){var t=new Promise(function(t,n){var r=e.Deferred(),i="http://localhost:8182/discoveryagent/upnp/devices",s=e.ajax({url:i,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"devicesUpnp"}).done(function(e,n,r){t(e)}).fail(function(e,n,r){e.status==404?t(JSON.parse('{"devices":"Service Not Working"}')):t(JSON.parse('{"devices":false}'))})});return t}function s(){var t=new Promise(function(t,r){var i=e.Deferred();if(n!=null){var s=[];console.log(n),s.push({id:n.id});for(var o=0;o<n.peers.length;o++)s.push({id:n.peers[o].id});s.length!=0?t(JSON.parse('{"devices":'+JSON.stringify(s)+"}")):t(JSON.parse('{"devices":false}'))}else t(JSON.parse('{"devices":false}'))});return t}if(t){if(t.toLowerCase().indexOf("upnp")!=-1)return i();if(t.toLowerCase().indexOf("bluetooth")!=-1)return r();if(t.toLowerCase().indexOf("namedwebsockets")!=-1)return s()}},this.getServices=function(t,n){function r(t){var n=new Promise(function(n,r){var i=e.Deferred(),s={device:t},o="http://localhost:8182/discoveryagent/bluetooth/services",u=e.ajax({url:o,data:s,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"servicesBluetooth"}).done(function(e,t,r){n(e)}).fail(function(e,t,r){e.status==404?n(JSON.parse('{"services":"Service Not Working"}')):n(JSON.parse('{"services":false}'))})});return n}function i(t){var n=new Promise(function(n,r){var i=e.Deferred(),s={device:t},o="http://localhost:8182/discoveryagent/upnp/services",u=e.ajax({url:o,data:s,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"servicesUpnp"}).done(function(e,t,r){n(e)}).fail(function(e,t,r){e.status==404?n(JSON.parse('{"services":"Service Not Working"}')):n(JSON.parse('{"services":false}'))})});return n}if(t){if(t.toLowerCase().indexOf("upnp")!=-1)return i(n);if(t.toLowerCase().indexOf("bluetooth")!=-1)return r(n)}},this.getActions=function(t,n,r){function i(t,n){var r=new Promise(function(r,i){var s=e.Deferred(),o={device:t,service:n},u="http://localhost:8182/discoveryagent/bluetooth/actions",a=e.ajax({url:u,data:o,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"actionsBluetooth"}).done(function(e,t,n){r(e)}).fail(function(e,t,n){e.status==404?r(JSON.parse('{"actions":"Service Not Working"}')):r(JSON.parse('{"actions":false}'))})});return r}function s(t,n){var r=new Promise(function(r,i){var s=e.Deferred(),o={device:t,service:n},u="http://localhost:8182/discoveryagent/upnp/actions",a=e.ajax({url:u,data:o,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"actionsUpnp"}).done(function(e,t,n){r(e)}).fail(function(e,t,n){e.status==404?r(JSON.parse('{"actions":"Service Not Working"}')):r(JSON.parse('{"actions":false}'))})});return r}if(t){if(t.toLowerCase().indexOf("upnp")!=-1)return s(n,r);if(t.toLowerCase().indexOf("bluetooth")!=-1)return i(n,r)}},this.getParameters=function(t,n,r,i){function s(t,n,r){var i=new Promise(function(i,s){var o=e.Deferred(),u={device:t,service:n,action:r},a="http://localhost:8182/discoveryagent/bluetooth/parameters",f=e.ajax({url:a,data:u,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"parametersBluetooth"}).done(function(e,t,n){i(e)}).fail(function(e,t,n){e.status==404?i(JSON.parse('{"actions":"Service Not Working"}')):i(JSON.parse('{"actions":false}'))})});return i}function o(t,n,r){var i=new Promise(function(i,s){var o=e.Deferred(),u={device:t,service:n,action:r},a="http://localhost:8182/discoveryagent/upnp/parameters",f=e.ajax({url:a,data:u,dataType:"jsonp",crossDomain:!0,jsonp:"callback",jsonpCallback:"parametersUpnp"}).done(function(e,t,n){i(e)}).fail(function(e,t,n){e.status==404?i(JSON.parse('{"actions":"Service Not Working"}')):i(JSON.parse('{"actions":false}'))})});return i}if(t){if(t.toLowerCase().indexOf("upnp")!=-1)return o(n,r,i);if(t.toLowerCase().indexOf("bluetooth")!=-1)return s(n,r,i)}}};return r.__moduleName="discovery",r}),define("mediascape/Mappingservice/mappingservice",["socketio"],function(e){var t=function(t,n){var r=null,s={},o=Object.freeze({CONNECTING:"connecting",OPEN:"open",CLOSED:"closed"});if(typeof t=="object"){var n=t;t={},console.log("options",n)}var u={readystatechange:[]};if(!n)var n={};n.maxTimeout||(n.maxTimeout=2e3),n.forceNew=!0,n.multiplex=!1;var a=t||{},f=[],l=[],c=function(){r=e(a,n),r.on("connect",h),v.set("connecting"),r.on("mapping",p),r.connected===!0&&h()},h=function(){v.set("open")},p=function(e){var n=t;if(typeof t=="object"||!t)var n=window.location.protocol+"//"+window.location.host+"/";if(!e.group){var r={};e.user&&(r.user=n+e.user),e.app&&(r.app=n+e.app),e.userApp&&(r.userApp=n+e.userApp),f.length>0&&(promise=f.pop(),promise(r))}else{var r={group:n+e.group};l.length>0&&(promise=l.pop(),promise(r))}},d=function(e,t,n){if(!u.hasOwnProperty(e))throw"Unsupported event "+e;var r;for(i=0;i<u[e].length;i++){r=u[e][i];if(n===undefined){if(r._immediate_pending)continue}else{if(r!==n)continue;n._immediate_pending=!1}try{r.call(s,t)}catch(t){_error("Error in "+e+": "+r+": "+t)}}},v=function(){var e=o.CONNECTING;return{set:function(t){found=!1;for(key in o){if(!o.hasOwnProperty(key))continue;o[key]===t&&(found=!0)}if(!found)throw"Illegal state value "+t;if(e===o.CLOSED)return;t!==e&&(e=t,d("readystatechange",t))},get:function(){return e}}}(),m=function(e,t){if(!e||!Array.isArray(t))throw"appId or scopeList undefined";var i={appId:e};for(var s=0,o=t.length;s<o;s++)t[s]==="user"&&(i.user=!0),t[s]==="app"&&(i.app=!0),t[s]==="userApp"&&(i.userApp=!0);return n.userId&&(i.userId=n.userId),r.emit("getMapping",i),new Promise(function(e,t){f.push(function(t){e(t)}),setTimeout(function(){t({error:"timeout-mappinservice"})},n.maxTimeout)})},g=function(e){if(!e)throw"groupId undefined";var t={groupId:e};return r.emit("getMapping",t),new Promise(function(e,t){l.push(function(t){e(t)}),console.log(n.maxTimeout),setTimeout(function(){t({error:"timeout-mappinservice2"})},n.maxTimeout)})},y=function(e,t){if(!t||typeof t!="function")throw"Illegal handler";if(!u.hasOwnProperty(e))throw"Unsupported event "+e;var n=u[e].indexOf(t);return n===-1&&(u[e].push(t),t._immediate_pending=!0,setTimeout(function(){switch(e){case"readystatechange":d("readystatechange",v.get(),t)}},0)),s},b=function(e,t){if(u[e]!==undefined){var n=u[e].indexOf(t);n>-1&&u[e].splice(n,1)}return s};return s.__defineGetter__("readyState",v.get),s.__defineGetter__("STATE",function(){return o}),s.getUserMapping=m,s.getGroupMapping=g,s.on=y,s.off=b,c(),s};return t.__moduleName="mappingService",t}),function(e,t){typeof define=="function"&&define.amd?define("shake",[],function(){return t(e,e.document)}):typeof module!="undefined"&&module.exports?module.exports=t(e,e.document):e.Shake=t(e,e.document)}(typeof window!="undefined"?window:this,function(e,t){"use strict";function n(n){this.hasDeviceMotion="ondevicemotion"in e,this.options={threshold:15,timeout:1e3};if(typeof n=="object")for(var r in n)n.hasOwnProperty(r)&&(this.options[r]=n[r]);this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null;if(typeof t.CustomEvent=="function")this.event=new t.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if(typeof t.createEvent!="function")return!1;this.event=t.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return n.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},n.prototype.start=function(){this.reset(),this.hasDeviceMotion&&e.addEventListener("devicemotion",this,!1)},n.prototype.stop=function(){this.hasDeviceMotion&&e.removeEventListener("devicemotion",this,!1),this.reset()},n.prototype.devicemotion=function(t){var n=t.accelerationIncludingGravity,r,i,s=0,o=0,u=0;if(this.lastX===null&&this.lastY===null&&this.lastZ===null){this.lastX=n.x,this.lastY=n.y,this.lastZ=n.z;return}s=Math.abs(this.lastX-n.x),o=Math.abs(this.lastY-n.y),u=Math.abs(this.lastZ-n.z);if(s>this.options.threshold&&o>this.options.threshold||s>this.options.threshold&&u>this.options.threshold||o>this.options.threshold&&u>this.options.threshold)r=new Date,i=r.getTime()-this.lastTime.getTime(),i>this.options.timeout&&(e.dispatchEvent(this.event),this.lastTime=new Date);this.lastX=n.x,this.lastY=n.y,this.lastZ=n.z},n.prototype.handleEvent=function(e){if(typeof this[e.type]=="function")return this[e.type](e)},n}),define("mediascape/DiscoveryForAgentContext/discoveryforagentcontext",["mediascape/Discovery/discovery","mediascape/Agentcontext/agentcontext","shake"],function(e,t){var n=function(){console.log("DISCOVER WP4<<<<<<<<<<<<<<<<");var e=mediascape.agentContext,n={},r=this;try{document.createEvent("TouchEvent");var i={init:function(){this.setCapability("touchScreen","supported"),e.setItem("touchScreen","supported")},on:function(){this.setCapability("touchScreen","supported"),e.setItem("touchScreen","supported")},off:function(){}};e.load({touchScreen:i})}catch(s){var i={init:function(){this.setCapability("touchScreen","unsupported"),e.setItem("touchScreen","unsupported")},on:function(){this.setCapability("touchScreen","unsupported"),e.setItem("touchScreen","unsupported")},off:function(){}};e.load({touchScreen:i})}mediascape.discovery.isPresent("screensize").then(function(t){if(t.presence===!0){var n={init:function(){this.setCapability("screenSize","supported")},on:function(){mediascape.discovery.getExtra("screensize").then(function(t){navigator.appVersion.indexOf("MK12")!=-1?(t.extra[1].screenX="24",t.extra[1].screenY="18",e.setItem("screenSize",t.extra)):e.setItem("screenSize",t.extra)})},off:function(){}};e.load({screenSize:n})}});var o={init:function(){this.setCapability("componentsStatus","supported"),document.addEventListener("onComponentsChange",function(t){e.setItem("componentsStatus",t.detail.cmps),console.log("componentsStatus updated",t.detail)})},on:function(){document.addEventListener("onComponentsChange",function(t){e.setItem("componentsStatus",t.detail.cmps),console.log("componentsStatus updated",t.detail)})},off:function(){document.removeEventListener("onComponentsChange",function(t){e.setItem("componentsStatus",t.detail.cmps),console.log("componentsStatus updated",t.detail)})}};e.load({componentsStatus:o});var u={init:function(){this.setCapability("layoutEvent","supported"),e.setItem("layoutEvent",""),console.log("INIT INSTRUMENT")},on:function(){e.setItem("layoutEvent","")},off:function(){}};e.load({layoutEvent:u});var u={init:function(){this.setCapability("layoutStatus","supported"),document.addEventListener("applicationContext-ready",function(){e.setItem("layoutStatus",mediascape.AdaptationToolkit.Adaptation.UIAdaptation.getActualLayout())}),document.addEventListener("layoutEvent",function(t){e.setItem("layoutStatus",t.detail.layoutName)}),console.log("INIT LAYOUT STATUS INSTRUMENT")},on:function(){document.addEventListener("layoutEvent",function(t){e.setItem("layoutStatus",t.detail.layoutName)})},off:function(){}};e.load({layoutStatus:u}),mediascape.discovery.isPresent("language").then(function(t){if(t.presence){var n={init:function(){this.setCapability("language","supported"),mediascape.discovery.getExtra("language").then(function(t){e.setItem("language",t.extra.language)})}};e.load({language:n})}}),navigator.platform&&(n.platform={init:function(){this.setCapability("platform","supported"),document.addEventListener("mediascape-modules-ready",function(){mediascape.DeviceProfile.checkDevice(navigator.userAgent).done(function(t){console.log("result",t),mediascape.deviceType=t.deviceType,e.setItem("platform",t)})})}}),navigator.product&&(n.navigatorProduct={init:function(){this.setCapability("navigatorProduct","supported"),e.setItem("navigatorProduct",navigator.product)}}),navigator.onLine&&(n.onLine={init:function(){this.setCapability("onLine","supported"),e.setItem("onLine",navigator.onLine)}}),mediascape.discovery.isPresent("deviceType").then(function(t){if(t.presence){var n={init:function(){this.setCapability("deviceType","supported"),mediascape.discovery.getExtra("deviceType").then(function(t){e.setItem("deviceType",t.extra.deviceType)})}};e.load({deviceType:n})}}),mediascape.discovery.isPresent("vibration").then(function(t){if(t.presence){var n={init:function(){this.setCapability("vibrate","maybe")}};e.load({vibration:n})}});if(window.DeviceOrientationEvent){var a=[],f=0;function l(e,t){var n=0,r=0;for(var i in e)r+=e[i][t],n++;return r/n}function c(t){var n={alpha:t.alpha,beta:t.beta,gamma:t.gamma};a.push(n);var r=new Date;if(r-f>150){var n={alpha:l(a,"alpha"),beta:l(a,"beta"),gamma:l(a,"gamma")};e.setItem("deviceOrientation",n),a=[],f=r}}n.deviceOrientation={init:function(){function t(t){window.ondeviceorientation=null,t.gamma==null&&t.beta==null&&t.alpha==null?e.setCapability("deviceOrientation","unsupported"):e.setCapability("deviceOrientation","supported")}var e=this;this.setCapability("deviceOrientation","unsupported"),window.ondeviceorientation=t},on:function(){window.addEventListener("deviceorientation",c)},off:function(){window.removeEventListener("deviceorientation",c)}}}mediascape.discovery.isPresent("orientation").then(function(t){if(t.presence){function n(){mediascape.discovery.getExtra("orientation").then(function(t){e.setItem("orientation",t.extra.orientation)})}var r={init:function(){this.setCapability("orientation","supported"),n()},on:function(){if(screen.orientation)window.addEventListener("orientationchange",n);else if(screen.msorientation||screen.mozOrientation)window.addEventListener("orientationchange",n),window.addEventListener("MozOrientation",n),window.addEventListener("resize",n);n()},off:function(){window.removeEventListener("orientationchange",n),window.removeEventListener("MozOrientation",n)}};e.load({orientation:r})}});if(window.DeviceMotionEvent){var h=[],p=0;function l(e,t){var n=0,r=0;for(var i in e)r+=e[i][t],n++;return r/n}var d=function(t){var n=t.accelerationIncludingGravity.x,r=t.accelerationIncludingGravity.y,i=t.accelerationIncludingGravity.z,s={x:n,y:r,z:i,xAngle:Math.atan2(r,i),yAngle:Math.atan2(n,i),zAngle:Math.atan2(n,r)};h.push(s);var o=new Date;if(o-p>150){var u={x:l(h,"x"),y:l(h,"y"),z:l(h,"z"),xAngle:l(h,"xAngle"),yAngle:l(h,"yAngle"),zAngle:l(h,"zAngle")};e.setItem("deviceMotion",u),h=[],p=o}};n.deviceMotion={init:function(){this.setCapability("deviceMotion","unsupported");var e=this;motiontest=function(t){window.ondevicemotion=null,t.acceleration.x==null&&t.acceleration.y==null&&t.acceleration.z==null?e.setCapability("deviceMotion","unsupported"):e.setCapability("deviceMotion","supported")},window.DeviceMotionEvent==undefined?e.setCapability("deviceMotion","unsupported"):window.ondevicemotion=motiontest},on:function(){window.addEventListener("devicemotion",d,!1)},off:function(){window.removeEventListener("devicemotion",d)}}}t&&(window.myShakeEvent=new t({threshold:3,timeout:100})),window.DeviceMotionEvent&&window.myShakeEvent&&(n.shake={init:function(){var t=this;this.setCapability("shake","unsupported"),motiontest=function(n){window.ondevicemotion=null;if(n.acceleration.x==null&&n.acceleration.y==null&&n.acceleration.z==null)t.setCapability("shake","unsupported");else{t.setCapability("shake","supported");var r;window.addEventListener("shake",function(){r?(clearTimeout(r),r=null):e.setItem("shake",!0),r=setTimeout(function(){e.setItem("shake",!1),r=null},500)},!1)}},window.ondevicemotion=motiontest},on:function(){window.myShakeEvent.start()},off:function(){window.myShakeEvent.stop()}}),mediascape.discovery.isPresent("connection").then(function(t){if(t.presence){function n(){mediascape.discovery.getExtra("connection").then(function(t){e.setItem("connection",t.extra.connection)})}var r={init:function(){this.setCapability("connection","supported"),n()},on:function(){navigator.connection.ontypechange=n},off:function(){navigator.connection.ontypechange=null}};e.load({connection:r})}}),n.touchScreen&&(n.pointer={init:function(){this.setCapability("pointer","supported")},on:function(){var t=[null,null];document.ontouchstart=function(e){var n=e.changedTouches[0];t=[n.clientX,n.clientY]};var n=0;document.ontouchmove=function(r){if(new Date-n>100){n=new Date;var i=r.changedTouches[0];e.setItem("pointer",{x:i.clientX,y:i.clientY,deltaX:i.clientX-t[0],deltaY:t[1]-i.clientY})}}},off:function(){document.ontouchstart=null,document.ontouchmove=null}}),e.load(n),mediascape.discovery.isPresent("audio").then(function(t){if(t.presence){var n={init:function(){this.setCapability("microphone","supported"),mediascape.discovery.getExtra("audio").then(function(t){e.setItem("microphone",t.extra.audio)})}};e.load({microphone:n})}}),mediascape.discovery.isPresent("camera").then(function(t){if(t.presence){var n={init:function(){this.setCapability("camera","supported"),mediascape.discovery.getExtra("camera").then(function(t){e.setItem("camera",t.extra.cameras)})}};e.load({camera:n})}}),mediascape.discovery.isPresent("battery").then(function(t){if(t.presence){function n(){mediascape.discovery.getExtra("battery").then(function(t){var n={level:t.extra.level,charging:t.extra.charging,dischargeTime:t.extra.dischargeTime};e.setItem("battery",n)})}var r={init:function(){this.setCapability("battery","supported"),n()},on:function(){navigator.getBattery?navigator.getBattery().then(function(e){e.onlevelchange=function(){n()},e.onchargingchange=function(){n()},e.ondischargingtimechange=function(){n()}}):navigator.battery&&(navigator.battery.onlevelchange=function(){n()},navigator.battery.onchargingchange=function(){n()},navigator.battery.ondischargingtimechange=function(){n()})},off:function(){navigator.getBattery?navigator.getBattery().then(function(e){e.onlevelchange=undefined,e.onchargingchange=undefined,e.ondischarchingtimechange=undefined}):navigator.battery&&(navigator.battery.onlevelchange=undefined,navigator.battery.onchargingchange=undefined,navigator.battery.ondischarchingtimechange=undefined)}};e.load({battery:r})}})};return n.__moduleName="discovery_wp4",n}),define("mediascape/DeviceProfile/deviceProfile",["jquery"],function(e){var t=null,n=function(){this.checkDevice=function(t){var n=e.ajax({method:"GET",crossDomain:!0,url:"http://150.241.250.4:6675/checkDevice",data:{agent:t}});return n},this.learn=function(t,n){var r=e.ajax({method:"GET",url:"http://150.241.250.4:6675/learn",data:{agent:t,device:n},crossDomain:!0});return r}};return n.__moduleName="DeviceProfile",n});var QRCode;!function(){function e(e){this.mode=f.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=[],n=0,r=this.data.length;r>n;n++){var i=this.data.charCodeAt(n);i>65536?(t[0]=240|(1835008&i)>>>18,t[1]=128|(258048&i)>>>12,t[2]=128|(4032&i)>>>6,t[3]=128|63&i):i>2048?(t[0]=224|(61440&i)>>>12,t[1]=128|(4032&i)>>>6,t[2]=128|63&i):i>128?(t[0]=192|(1984&i)>>>6,t[1]=128|63&i):t[0]=i,this.parsedData=this.parsedData.concat(t)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function r(e,t){this.totalCount=e,this.dataCount=t}function i(){this.buffer=[],this.length=0}function s(){return"undefined"!=typeof CanvasRenderingContext2D}function o(){var e=!1,t=navigator.userAgent;return/android/i.test(t)&&(e=!0,aMat=t.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(e=parseFloat(aMat[1]))),e}function u(e,t){for(var n=1,r=a(e),i=0,s=v.length;s>=i;i++){var o=0;switch(t){case l.L:o=v[i][0];break;case l.M:o=v[i][1];break;case l.Q:o=v[i][2];break;case l.H:o=v[i][3]}if(o>=r)break;n++}if(n>v.length)throw new Error("Too long data");return n}function a(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;n>t;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var r=-1;7>=r;r++)-1>=t+r||this.moduleCount<=t+r||(this.modules[e+n][t+r]=n>=0&&6>=n&&(0==r||6==r)||r>=0&&6>=r&&(0==n||6==n)||n>=2&&4>=n&&r>=2&&4>=r?!0:!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;8>n;n++){this.makeImpl(!0,n);var r=h.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,u=0;u<this.modules[s].length;u++){var a=u*i,f=this.modules[s][u];f&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+i,o),r.lineTo(a+i,o+i),r.lineTo(a,o+i),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var e=h.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var s=-2;2>=s;s++)for(var o=-2;2>=o;o++)this.modules[r+s][i+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o?!0:!1}},setupTypeNumber:function(e){for(var t=h.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var r=!e&&1==(1&t>>n);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;18>n;n++){var r=!e&&1==(1&t>>n);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=h.getBCHTypeInfo(n),i=0;15>i;i++){var s=!e&&1==(1&r>>i);6>i?this.modules[i][8]=s:8>i?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;15>i;i++){var s=!e&&1==(1&r>>i);8>i?this.modules[8][this.moduleCount-i-1]=s:9>i?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var u=0;2>u;u++)if(null==this.modules[r][o-u]){var a=!1;s<e.length&&(a=1==(1&e[s]>>>i));var f=h.getMask(t,r,o-u);f&&(a=!a),this.modules[r][o-u]=a,i--,-1==i&&(s++,i=7)}if(r+=n,0>r||this.moduleCount<=r){r-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,s){for(var o=r.getRSBlocks(e,n),u=new i,a=0;a<s.length;a++){var f=s[a];u.put(f.mode,4),u.put(f.getLength(),h.getLengthInBits(f.mode,e)),f.write(u)}for(var l=0,a=0;a<o.length;a++)l+=o[a].dataCount;if(u.getLengthInBits()>8*l)throw new Error("code length overflow. ("+u.getLengthInBits()+">"+8*l+")");for(u.getLengthInBits()+4<=8*l&&u.put(0,4);0!=u.getLengthInBits()%8;)u.putBit(!1);for(;;){if(u.getLengthInBits()>=8*l)break;if(u.put(t.PAD0,8),u.getLengthInBits()>=8*l)break;u.put(t.PAD1,8)}return t.createBytes(u,o)},t.createBytes=function(e,t){for(var r=0,i=0,s=0,o=new Array(t.length),u=new Array(t.length),a=0;a<t.length;a++){var f=t[a].dataCount,l=t[a].totalCount-f;i=Math.max(i,f),s=Math.max(s,l),o[a]=new Array(f);for(var c=0;c<o[a].length;c++)o[a][c]=255&e.buffer[c+r];r+=f;var p=h.getErrorCorrectPolynomial(l),d=new n(o[a],p.getLength()-1),v=d.mod(p);u[a]=new Array(p.getLength()-1);for(var c=0;c<u[a].length;c++){var m=c+v.getLength()-u[a].length;u[a][c]=m>=0?v.get(m):0}}for(var g=0,c=0;c<t.length;c++)g+=t[c].totalCount;for(var y=new Array(g),b=0,c=0;i>c;c++)for(var a=0;a<t.length;a++)c<o[a].length&&(y[b++]=o[a][c]);for(var c=0;s>c;c++)for(var a=0;a<t.length;a++)c<u[a].length&&(y[b++]=u[a][c]);return y};for(var f={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;h.getBCHDigit(t)-h.getBCHDigit(h.G15)>=0;)t^=h.G15<<h.getBCHDigit(t)-h.getBCHDigit(h.G15);return(e<<10|t)^h.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;h.getBCHDigit(t)-h.getBCHDigit(h.G18)>=0;)t^=h.G18<<h.getBCHDigit(t)-h.getBCHDigit(h.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return h.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case c.PATTERN000:return 0==(t+n)%2;case c.PATTERN001:return 0==t%2;case c.PATTERN010:return 0==n%3;case c.PATTERN011:return 0==(t+n)%3;case c.PATTERN100:return 0==(Math.floor(t/2)+Math.floor(n/3))%2;case c.PATTERN101:return 0==t*n%2+t*n%3;case c.PATTERN110:return 0==(t*n%2+t*n%3)%2;case c.PATTERN111:return 0==(t*n%3+(t+n)%2)%2;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new n([1],0),r=0;e>r;r++)t=t.multiply(new n([1,p.gexp(r)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case f.MODE_NUMBER:return 10;case f.MODE_ALPHA_NUM:return 9;case f.MODE_8BIT_BYTE:return 8;case f.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case f.MODE_NUMBER:return 12;case f.MODE_ALPHA_NUM:return 11;case f.MODE_8BIT_BYTE:return 16;case f.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case f.MODE_NUMBER:return 14;case f.MODE_ALPHA_NUM:return 13;case f.MODE_8BIT_BYTE:return 16;case f.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;t>r;r++)for(var i=0;t>i;i++){for(var s=0,o=e.isDark(r,i),u=-1;1>=u;u++)if(!(0>r+u||r+u>=t))for(var a=-1;1>=a;a++)0>i+a||i+a>=t||(0!=u||0!=a)&&o==e.isDark(r+u,i+a)&&s++;s>5&&(n+=3+s-5)}for(var r=0;t-1>r;r++)for(var i=0;t-1>i;i++){var f=0;e.isDark(r,i)&&f++,e.isDark(r+1,i)&&f++,e.isDark(r,i+1)&&f++,e.isDark(r+1,i+1)&&f++,(0==f||4==f)&&(n+=3)}for(var r=0;t>r;r++)for(var i=0;t-6>i;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;t>i;i++)for(var r=0;t-6>r;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);for(var l=0,i=0;t>i;i++)for(var r=0;t>r;r++)e.isDark(r,i)&&l++;var c=Math.abs(100*l/t/t-50)/5;return n+=10*c}},p={glog:function(e){if(1>e)throw new Error("glog("+e+")");return p.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return p.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;8>d;d++)p.EXP_TABLE[d]=1<<d;for(var d=8;256>d;d++)p.EXP_TABLE[d]=p.EXP_TABLE[d-4]^p.EXP_TABLE[d-5]^p.EXP_TABLE[d-6]^p.EXP_TABLE[d-8];for(var d=0;255>d;d++)p.LOG_TABLE[p.EXP_TABLE[d]]=d;n.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var i=0;i<e.getLength();i++)t[r+i]^=p.gexp(p.glog(this.get(r))+p.glog(e.get(i)));return new n(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=p.glog(this.get(0))-p.glog(e.get(0)),r=new Array(this.getLength()),i=0;i<this.getLength();i++)r[i]=this.get(i);for(var i=0;i<e.getLength();i++)r[i]^=p.gexp(p.glog(e.get(i))+t);return(new n(r,0)).mod(e)}},r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var n=r.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,s=[],o=0;i>o;o++)for(var u=n[3*o+0],a=n[3*o+1],f=n[3*o+2],l=0;u>l;l++)s.push(new r(a,f));return s},r.getRsBlockTable=function(e,t){switch(t){case l.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case l.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case l.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case l.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return void 0}},i.prototype={get:function(e){var t=Math.floor(e/8);return 1==(1&this.buffer[t]>>>7-e%8)},put:function(e,t){for(var n=0;t>n;n++)this.putBit(1==(1&e>>>t-n-1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],m=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function t(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n}var n=this._htOption,r=this._el,i=e.getModuleCount();Math.floor(n.width/i),Math.floor(n.height/i),this.clear();var s=t("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:n.colorLight});s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(s),s.appendChild(t("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;i>o;o++)for(var u=0;i>u;u++)if(e.isDark(o,u)){var a=t("use",{x:String(o),y:String(u)});a.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),s.appendChild(a)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),g="svg"===document.documentElement.tagName.toLowerCase(),y=g?m:s()?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){var n=this;if(n._fFail=t,n._fSuccess=e,null===n._bSupportDataURI){var r=document.createElement("img"),i=function(){n._bSupportDataURI=!1,n._fFail&&_fFail.call(n)},s=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return r.onabort=i,r.onerror=i,r.onload=s,r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,t,i,s,o,u,a,f){if("nodeName"in e&&/img/i.test(e.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*n;else"undefined"==typeof f&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);r.apply(this,arguments)}}var i=function(e,t){this._bIsPainted=!1,this._android=o(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(e){var t=this._elImage,n=this._oContext,r=this._htOption,i=e.getModuleCount(),s=r.width/i,o=r.height/i,u=Math.round(s),a=Math.round(o);t.style.display="none",this.clear();for(var f=0;i>f;f++)for(var l=0;i>l;l++){var c=e.isDark(f,l),h=l*s,p=f*o;n.strokeStyle=c?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=c?r.colorDark:r.colorLight,n.fillRect(h,p,s,o),n.strokeRect(Math.floor(h)+.5,Math.floor(p)+.5,u,a),n.strokeRect(Math.ceil(h)-.5,Math.ceil(p)-.5,u,a)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},i}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,n=this._el,r=e.getModuleCount(),i=Math.floor(t.width/r),s=Math.floor(t.height/r),o=['<table style="border:0;border-collapse:collapse;">'],u=0;r>u;u++){o.push("<tr>");for(var a=0;r>a;a++)o.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+s+"px;background-color:"+(e.isDark(u,a)?t.colorDark:t.colorLight)+';"></td>');o.push("</tr>")}o.push("</table>"),n.innerHTML=o.join("");var f=n.childNodes[0],l=(t.width-f.offsetWidth)/2,c=(t.height-f.offsetHeight)/2;l>0&&c>0&&(f.style.margin=c+"px "+l+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();QRCode=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._android=o(),this._el=e,this._oQRCode=null,this._oDrawing=new y(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(e){this._oQRCode=new t(u(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=l}(),define("qrcode",function(){}),define("webcodecam",["jquery"],function(e,t){(function(e,t,n,r){function i(t,n){this.element=t,a=e(t),this.options=e.extend({},g,n),this._defaults=g,this._name="WebCodeCam",this.init()&&(this.setEventListeners(),(this.options.ReadQRCode||this.options.ReadBarecode)&&this.setCallback())}var s,o,u,a,f,l,c={},h=e('<video style="position:absolute;visibility:hidden;display: none;">')[0],p=!1,d=!1,v=new Worker("js/lib/DecoderWorker.js"),m=!1,g={ReadQRCode:!0,ReadBarecode:!0,width:320,height:240,videoSource:{id:!0,maxWidth:640,maxHeight:480},flipVertical:!1,flipHorizontal:!1,zoom:-1,beep:"js/beep.mp3",brightness:0,autoBrightnessValue:!1,grayScale:!1,contrast:0,threshold:0,sharpness:[],resultFunction:function(e,t){},getUserMediaError:function(){},cameraError:function(e){}};i.prototype={init:function(){return s=this,u=s.element.getContext("2d"),f=s.options.width,l=s.options.height,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?(c[s.options.videoSource.id]&&c[s.options.videoSource.id].active?s.cameraSuccess(c[s.options.videoSource.id]):navigator.getUserMedia({video:{mandatory:{maxWidth:s.options.videoSource.maxWidth,maxHeight:s.options.videoSource.maxHeight},optional:[{sourceId:s.options.videoSource.id}]},audio:!1},s.cameraSuccess,s.cameraError),!0):(s.options.getUserMediaError(),!1)},cameraSuccess:function(e){c[s.options.videoSource.id]=e;var n=t.URL||t.webkitURL;h.src=n?n.createObjectURL(e):e,h.play()},cameraError:function(e){return s.options.cameraError(e),!1},setEventListeners:function(){h.addEventListener("canplay",function(e){d||(0<h.videoWidth&&(l=h.videoHeight/(h.videoWidth/f)),a[0].setAttribute("width",f),a[0].setAttribute("height",l),s.options.flipHorizontal&&(u.scale(-1,1),u.translate(-f,0)),s.options.flipVertical&&(u.scale(1,-1),u.translate(0,-l)),d=!0,(s.options.ReadQRCode||s.options.ReadBarecode)&&s.delay())},!1),h.addEventListener("play",function(){setInterval(function(){if(!h.paused&&!h.ended){u.clearRect(0,0,f,l);var e=s.options.zoom;0>e&&(e=s.optimalZoom()),u.drawImage(h,(f*e-f)/-2,(l*e-l)/-2,f*e,l*e),e=u.getImageData(0,0,f,l),s.options.grayScale&&(e=s.grayScale(e));if(0!=s.options.brightness||0!=s.options.autoBrightnessValue)e=s.brightness(e,s.options.brightness);0!=s.options.contrast&&(e=s.contrast(e,s.options.contrast)),0!=s.options.threshold&&(e=s.threshold(e,s.options.threshold)),0!=s.options.sharpness.length&&(e=s.convolute(e,s.options.sharpness)),u.putImageData(e,0,0)}},40)},!1)},setCallback:function(){v.onmessage=function(e){m||h.paused||(e.data.success&&1<e.data.result[0].length&&-1==e.data.result[0].indexOf("undefined")?(s.beep(),m=!0,s.delay(),s.options.resultFunction(e.data.result[0],o)):e.data.finished&&(p=!p,setTimeout(function(){s.tryParseBarecode()},320)))},qrcode.callback=function(e){m||h.paused||(s.beep(),m=!0,s.delay(),s.options.resultFunction(e,o))}},tryParseBarecode:function(){var e=1==p?"flip":"normal";o=a[0].toDataURL();var t=u.getImageData(0,0,f,l).data;v.postMessage({ImageData:t,Width:f,Height:l,cmd:e,DecodeNr:1,LowLight:!1})},tryParseQRCode:function(){try{o=a[0].toDataURL(),qrcode.decode()}catch(e){m||setTimeout(function(){s.tryParseQRCode()},320)}},delay:function(){s.cameraPlay(!0)},cameraStop:function(){m=!0,h.pause()},cameraStopAll:function(){u.clearRect(0,0,f,l),m=!0,h.pause();for(var e in c)c[e]&&(c[e].stop(),c[e]=null)},cameraPlay:function(e){c[s.options.videoSource.id]?e||s.cameraSuccess(c[s.options.videoSource.id]):s.init(),m=!0,h.play(),setTimeout(function(){m=!1,s.options.ReadBarecode&&s.tryParseBarecode(),s.options.ReadQRCode&&s.tryParseQRCode()},2e3)},getLastImageSrc:function(){return o},optimalZoom:function(e){return h.videoHeight/l},getImageLightness:function(){for(var e=u.getImageData(0,0,f,l).data,t=0,n,r,i,s=0,o=e.length;s<o;s+=4)n=e[s],r=e[s+1],i=e[s+2],n=Math.floor((n+r+i)/3),t+=n;return Math.floor(t/(f*l))},brightness:function(e,t){t=0==t&&0!=s.options.autoBrightnessValue?s.options.autoBrightnessValue-s.getImageLightness():t;for(var n=e.data,r=0;r<n.length;r+=4)n[r]+=t,n[r+1]+=t,n[r+2]+=t;return e},grayScale:function(e){for(var t=e.data,n=0;n<t.length;n+=4)t[n]=t[n+1]=t[n+2]=.2126*t[n]+.7152*t[n+1]+.0722*t[n+2];return e},contrast:function(e,t){for(var n=e.data,r=0;r<n.length;r+=4){t=10;var i=Math.round((n[r]+n[r+1]+n[r+2])/3);127<i?(n[r]+=n[r]/i*t,n[r+1]+=n[r+1]/i*t,n[r+2]+=n[r+2]/i*t):(n[r]-=n[r]/i*t,n[r+1]-=n[r+1]/i*t,n[r+2]-=n[r+2]/i*t)}return e},threshold:function(e,t){for(var n,r=e.data,i=0,s=f*l*4;i<s;i+=4)n=r[i]+r[i+1]+r[i+2],r[i]=n<t?r[i+1]=r[i+2]=0:r[i+1]=r[i+2]=255,r[i+3]=255;return e},convolute:function(e,t,r){var i=e.width,s=e.height,o=Math.round(Math.sqrt(t.length)),u=Math.floor(o/2);e=e.data;var a=n.createElement("canvas").getContext("2d").createImageData(i,s),f=a.data;r=r?1:0;for(var l=0;l<s;l++)for(var c=0;c<i;c++){for(var h=l,p=c,d=0,v=0,m=0,g=0,y=4*(l*i+c),b=0;b<o;b++)for(var w=0;w<o;w++){var E=h+b-u,S=p+w-u;0<=E&&E<s&&0<=S&&S<i&&(E=4*(E*i+S),S=t[b*o+w],d+=e[E]*S,v+=e[E+1]*S,m+=e[E+2]*S,g+=e[E+3]*S)}f[y]=d,f[y+1]=v,f[y+2]=m,f[y+3]=g+r*(255-g)}return a},beep:function(){if("string"==typeof s.options.beep){var e=s.options.beep;setTimeout(function(){(new Audio(e)).play()},0)}}},e.fn.WebCodeCam=function(t){return this.each(function(){e.data(this,"plugin_WebCodeCam")||e.data(this,"plugin_WebCodeCam",new i(this,t))})}})(e,window,document)}),_aa={},_aa._ab=function(e,t){var n=qrcode.width,r=qrcode.height,i=!0;for(var s=0;s<t.length&&i;s+=2){var o=Math.floor(t[s]),u=Math.floor(t[s+1]);if(o<-1||o>n||u<-1||u>r)throw"Error._ab ";i=!1,o==-1?(t[s]=0,i=!0):o==n&&(t[s]=n-1,i=!0),u==-1?(t[s+1]=0,i=!0):u==r&&(t[s+1]=r-1,i=!0)}i=!0;for(var s=t.length-2;s>=0&&i;s-=2){var o=Math.floor(t[s]),u=Math.floor(t[s+1]);if(o<-1||o>n||u<-1||u>r)throw"Error._ab ";i=!1,o==-1?(t[s]=0,i=!0):o==n&&(t[s]=n-1,i=!0),u==-1?(t[s+1]=0,i=!0):u==r&&(t[s+1]=r-1,i=!0)}},_aa._af=function(e,t,n){var r=new _ac(t),i=new Array(t<<1);for(var s=0;s<t;s++){var o=i.length,u=s+.5;for(var a=0;a<o;a+=2)i[a]=(a>>1)+.5,i[a+1]=u;n._ad(i),_aa._ab(e,i);try{for(var a=0;a<o;a+=2){var f=Math.floor(i[a])*4+Math.floor(i[a+1])*qrcode.width*4,l=e[Math.floor(i[a])+qrcode.width*Math.floor(i[a+1])];qrcode.imagedata.data[f]=l?255:0,qrcode.imagedata.data[f+1]=l?255:0,qrcode.imagedata.data[f+2]=0,qrcode.imagedata.data[f+3]=255,l&&r._dq(a>>1,s)}}catch(c){throw"Error._ab"}}return r},_aa._ah=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=_ae._ag(n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g);return _aa._af(e,t,y)},_a3._bv=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),_a3.VERSIONS=_ay(),_a3._av=function(e){if(e<1||e>40)throw"bad arguments";return _a3.VERSIONS[e-1]},_a3._at=function(e){if(e%4!=1)throw"Error _at";try{return _a3._av(e-17>>2)}catch(t){throw"Error _av"}},_a3._aw=function(e){var t=4294967295,n=0;for(var r=0;r<_a3._bv.length;r++){var i=_a3._bv[r];if(i==e)return this._av(r+7);var s=_ax._gj(e,i);s<t&&(n=r+7,t=s)}return t<=3?this._av(n):null},_ae._ag=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=this._be(e,t,n,r,i,s,o,u),g=this._bf(a,f,l,c,h,p,d,v);return g.times(m)},_ae._bf=function(e,t,n,r,i,s,o,u){return dy2=u-s,dy3=t-r+s-u,dy2==0&&dy3==0?new _ae(n-e,i-n,e,r-t,s-r,t,0,0,1):(dx1=n-i,dx2=o-i,dx3=e-n+i-o,dy1=r-s,_dr=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/_dr,a23=(dx1*dy3-dx3*dy1)/_dr,new _ae(n-e+a13*n,o-e+a23*o,e,r-t+a13*r,u-t+a23*u,t,a13,a23,1))},_ae._be=function(e,t,n,r,i,s,o,u){return this._bf(e,t,n,r,i,s,o,u)._fr()};var _ca=21522,_cb=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),_ch=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);_ax._gj=function(e,t){return e^=t,_ch[e&15]+_ch[_ew(e,4)&15]+_ch[_ew(e,8)&15]+_ch[_ew(e,12)&15]+_ch[_ew(e,16)&15]+_ch[_ew(e,20)&15]+_ch[_ew(e,24)&15]+_ch[_ew(e,28)&15]},_ax._ci=function(e){var t=_ax._cj(e);return t!=null?t:_ax._cj(e^_ca)},_ax._cj=function(e){var t=4294967295,n=0;for(var r=0;r<_cb.length;r++){var i=_cb[r],s=i[0];if(s==e)return new _ax(i[1]);var o=this._gj(e,s);o<t&&(n=i[1],t=o)}return t<=3?new _ax(n):null},_cg.forBits=function(e){if(e<0||e>=FOR_BITS.length)throw"bad arguments";return FOR_BITS[e]};var L=new _cg(0,1,"L"),M=new _cg(1,0,"M"),Q=new _cg(2,3,"Q"),H=new _cg(3,2,"H"),FOR_BITS=new Array(M,L,H,Q);_dl._gn=function(e,t,n){if(e.length!=t._dp)throw"bad arguments";var r=t._bu(n),i=0,s=r._fb();for(var o=0;o<s.length;o++)i+=s[o].Count;var u=new Array(i),a=0;for(var f=0;f<s.length;f++){var l=s[f];for(var o=0;o<l.Count;o++){var c=l._dm,h=r._bo+c;u[a++]=new _dl(c,new Array(h))}}var p=u[0]._dw.length,d=u.length-1;while(d>=0){var v=u[d]._dw.length;if(v==p)break;d--}d++;var m=p-r._bo,g=0;for(var o=0;o<m;o++)for(var f=0;f<a;f++)u[f]._dw[o]=e[g++];for(var f=d;f<a;f++)u[f]._dw[m]=e[g++];var y=u[0]._dw.length;for(var o=m;o<y;o++)for(var f=0;f<a;f++){var b=f<d?o:o+1;u[f]._dw[b]=e[g++]}return u},_dx={},_dx._gl=function(e){if(e<0||e>7)throw"bad arguments";return _dx._dy[e]},_dx._dy=new Array(new _fg,new _fh,new _fi,new _fj,new _fk,new _fl,new _fm,new _fn),_az._bb=new _az(285),_az._bc=new _az(301),_az._bd=function(e,t){return e^t},Decoder={},Decoder.rsDecoder=new _db(_az._bb),Decoder.correctErrors=function(e,t){var n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[i]&255;var s=e.length-t;try{Decoder.rsDecoder.decode(r,s)}catch(o){throw o}for(var i=0;i<t;i++)e[i]=r[i]},Decoder.decode=function(e){var t=new _cl(e),n=t._cq(),r=t._cm()._cg,i=t._gk(),s=_dl._gn(i,n,r),o=0;for(var u=0;u<s.length;u++)o+=s[u]._du;var a=new Array(o),f=0;for(var l=0;l<s.length;l++){var c=s[l],h=c.Codewords,p=c._du;Decoder.correctErrors(h,p);for(var u=0;u<p;u++)a[f++]=h[u]}var d=new QRCodeDataBlockReader(a,n._fd,r.Bits);return d},qrcode={},qrcode.imagedata=null,qrcode.width=0,qrcode.height=0,qrcode.qrCodeSymbol=null,qrcode.debug=!1,qrcode.maxImgSize=1048576,qrcode._eo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],qrcode.callback=null,qrcode.decode=function(e){if(arguments.length==0){var t=document.getElementById("qr-canvas"),n=t.getContext("2d");return qrcode.width=t.width,qrcode.height=t.height,qrcode.imagedata=n.getImageData(0,0,qrcode.width,qrcode.height),qrcode.result=qrcode.process(n),qrcode.callback!=null&&qrcode.callback(qrcode.result),qrcode.result}var r=new Image;r.onload=function(){var e=document.getElementById("out-canvas");if(e!=null){var t=e.getContext("2d");t.clearRect(0,0,320,240),t.drawImage(r,0,0,320,240)}var n=document.createElement("canvas"),i=n.getContext("2d"),s=r.height,o=r.width;if(r.width*r.height>qrcode.maxImgSize){var u=r.width/r.height;s=Math.sqrt(qrcode.maxImgSize/u),o=u*s}n.width=o,n.height=s,i.drawImage(r,0,0,n.width,n.height),qrcode.width=n.width,qrcode.height=n.height;try{qrcode.imagedata=i.getImageData(0,0,n.width,n.height)}catch(a){qrcode.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",qrcode.callback!=null&&qrcode.callback(qrcode.result);return}try{qrcode.result=qrcode.process(i)}catch(a){console.log(a),qrcode.result="error decoding QR Code"}qrcode.callback!=null&&qrcode.callback(qrcode.result)},r.src=e},qrcode.isUrl=function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)},qrcode.decode_url=function(e){var t="";try{t=escape(e)}catch(n){console.log(n),t=e}var r="";try{r=decodeURIComponent(t)}catch(n){console.log(n),r=t}return r},qrcode.decode_utf8=function(e){return qrcode.isUrl(e)?qrcode.decode_url(e):e},qrcode.process=function(e){var t=(new Date).getTime(),n=qrcode.grayScaleToBitmap(qrcode.grayscale());if(qrcode.debug){for(var r=0;r<qrcode.height;r++)for(var i=0;i<qrcode.width;i++){var s=i*4+r*qrcode.width*4;qrcode.imagedata.data[s]=n[i+r*qrcode.width]?0:0,qrcode.imagedata.data[s+1]=n[i+r*qrcode.width]?0:0,qrcode.imagedata.data[s+2]=n[i+r*qrcode.width]?255:0}e.putImageData(qrcode.imagedata,0,0)}var o=new Detector(n),u=o.detect();qrcode.debug&&e.putImageData(qrcode.imagedata,0,0);var a=Decoder.decode(u.bits),f=a.DataByte,l="";for(var c=0;c<f.length;c++)for(var h=0;h<f[c].length;h++)l+=String.fromCharCode(f[c][h]);var p=(new Date).getTime(),d=p-t;return console.log(d),qrcode.decode_utf8(l)},qrcode.getPixel=function(e,t){if(qrcode.width<e)throw"point error";if(qrcode.height<t)throw"point error";return point=e*4+t*qrcode.width*4,p=(qrcode.imagedata.data[point]*33+qrcode.imagedata.data[point+1]*34+qrcode.imagedata.data[point+2]*33)/100,p},qrcode.binarize=function(e){var t=new Array(qrcode.width*qrcode.height);for(var n=0;n<qrcode.height;n++)for(var r=0;r<qrcode.width;r++){var i=qrcode.getPixel(r,n);t[r+n*qrcode.width]=i<=e?!0:!1}return t},qrcode._em=function(e){var t=4,n=Math.floor(qrcode.width/t),r=Math.floor(qrcode.height/t),i=new Array(t);for(var s=0;s<t;s++){i[s]=new Array(t);for(var o=0;o<t;o++)i[s][o]=new Array(0,0)}for(var u=0;u<t;u++)for(var a=0;a<t;a++){i[a][u][0]=255;for(var f=0;f<r;f++)for(var l=0;l<n;l++){var c=e[n*a+l+(r*u+f)*qrcode.width];c<i[a][u][0]&&(i[a][u][0]=c),c>i[a][u][1]&&(i[a][u][1]=c)}}var h=new Array(t);for(var p=0;p<t;p++)h[p]=new Array(t);for(var u=0;u<t;u++)for(var a=0;a<t;a++)h[a][u]=Math.floor((i[a][u][0]+i[a][u][1])/2);return h},qrcode.grayScaleToBitmap=function(e){var t=qrcode._em(e),n=t.length,r=Math.floor(qrcode.width/n),i=Math.floor(qrcode.height/n),s=new Array(qrcode.height*qrcode.width);for(var o=0;o<n;o++)for(var u=0;u<n;u++)for(var a=0;a<i;a++)for(var f=0;f<r;f++)s[r*u+f+(i*o+a)*qrcode.width]=e[r*u+f+(i*o+a)*qrcode.width]<t[u][o]?!0:!1;return s},qrcode.grayscale=function(){var e=new Array(qrcode.width*qrcode.height);for(var t=0;t<qrcode.height;t++)for(var n=0;n<qrcode.width;n++){var r=qrcode.getPixel(n,t);e[n+t*qrcode.width]=r}return e},Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)};var _gf=3,_eh=57,_el=8,_eg=2;qrcode._er=function(e){function t(e,t){return xDiff=e.X-t.X,yDiff=e.Y-t.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)}function n(e,t,n){var r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}var r=t(e[0],e[1]),i=t(e[1],e[2]),s=t(e[0],e[2]),o,u,a;i>=r&&i>=s?(u=e[0],o=e[1],a=e[2]):s>=i&&s>=r?(u=e[1],o=e[0],a=e[2]):(u=e[2],o=e[0],a=e[1]);if(n(o,u,a)<0){var f=o;o=a,a=f}e[0]=o,e[1]=u,e[2]=a},define("qrcodelib",function(){}),define("association",["jquery","qrcode","webcodecam","qrcodelib"],function(e){var t=function(){function u(e){var t=o[e.toString()];t!=undefined&&(t.noteOff?t.noteOff(0):t.stop(0)),delete o[e]}function a(){console.log("createMessageEvent");var e=Array.prototype.slice.call(arguments),t;e.length==4?t=new CustomEvent(e[0],{detail:{show:e[1],type:e[2],text:e[3]}}):t=new CustomEvent(e[0],{detail:{show:e[1]}}),document.dispatchEvent(t)}var t,n,r,i,s,o={};this.doAssociation=function(){function p(e){console.log("errorParametersNumber");var t=new Promise(function(t,n){t(JSON.parse('{"response":"'+e+'"}'))});return t}function d(t){console.log("textAssociationTrigger");var n=new Promise(function(n,r){var i=e.Deferred();t[2]&&t[1].indexOf("bit.ly")==-1&&f!=""&&l!=""?M(t[1]).then(function(e){n(JSON.parse('{"response":"'+e.response+'"}'))}):n(JSON.parse('{"response":"'+t[1]+'"}'))});return n}function v(t){console.log("qrCodeAssociationTrigger");var n=new Promise(function(n,r){var i=e.Deferred(),s="160",o="160",u=0,a=0,c=t[0],h=t[1],p=t[2],d=t[3];t.length==6?(s=t[4],o=t[5]):t.length==8&&(s=t[4],o=t[5],u=t[6],a=t[7]);if(!d||p.indexOf("bit.ly")!=-1||f==""||l=="")return m(h,p,s,o,u,a,!0,n);M(p).then(function(e){return m(h,e.response,s,o,u,a,!0,n)})});return n}function m(e,t,n,r,i,s,o,u){var a=t,f=document.getElementById(e),l=document.createElement("div");l.id="code";var c=document.createElement("div");c.id="qrcode",c.style.width=n+"px",c.style.height=r+"px",l.style.transition="width 1.5s";if(i!=0||s!=0)c.style.marginLeft=i+"px",c.style.marginTop=s+"px";l.appendChild(c);if(o){l.appendChild(document.createElement("br"));var h=g(a);l.appendChild(h)}f.appendChild(l);var p=new QRCode("qrcode",{text:t,width:n,height:r,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});u(JSON.parse('{"response":"'+t+'"}'))}function g(e){var t=document.createElement("a");return t.id="url",t.href=e,t.innerHTML=e,t.target="_blank",t}function y(r){console.log("acousticAssociationTrigger");var s=new Promise(function(s,a){function y(e){i=new(window.AudioContext||window.webkitAudioContext);if(r.length==3){var s=[],o=[],a=parseInt((p-d)/h.length);o=h.split("");var f=d;for(var l=0;l<h.length;l++)s[l]=f,f+=a;freq_error=a/3;var c=300,v=w(e),m=0,l=v[m].toString(),g=o.indexOf(l);g?(t=s[g],S(t)):console.log(" key not found for "+l+" /// "),n=setInterval(function(){t&&u(t),m+=1;if(v[m]){var e=v[m].toString(),r=o.indexOf(e);t=s[r],t?S(t):console.log(" key not found for "+e+" ")}else clearInterval(n),evt=document.createEvent("Event"),evt.initEvent("ended",!0,!0),document.dispatchEvent(evt)},c)}}function b(e,t,n){var r=n.length;for(var i=0;i<r;i++)e.setUint8(t+i,n.charCodeAt(i))}function w(e){var t=e.length,n=e.split(""),r=[];for(var i=0;i<v.length;i++)r.push(v[i]);var s=(""+t).split("");if(s.length<3)for(var i=0;i<3-s.length+1;i++)s.unshift("0");for(var i=0;i<s.length;i++)r.push(s[i]);for(var i=0;i<n.length;i++)r.push(n[i]);var o=_(e),s=(""+o).split("");if(s.length<3)for(var i=0;i<3-s.length+1;i++)s.unshift("0");for(var i=0;i<s.length;i++)r.push(s[i]);var u=[];for(var i=0;i<r.length;i++){var a=r[i];a!=a.toLowerCase()&&u.push(g),r[i+1]&&r[i+1].toLowerCase()==a.toLowerCase()&&a.toLowerCase()!="#"&&a.toLowerCase()!="*"&&(u.push(m),i++),u.push(a.toLowerCase())}return console.log("playing "+u+" length "+t+" checksum "+o),u}function E(e){var t=i.createOscillator();t.frequency.value=e,t.noteOn?t.noteOn(0):t.start(0);var n=i.createGain();return t.connect(n),n.connect(i.destination),n.gain.value=1,t}function S(e){o[e.toString()]=E(e)}var c=e.Deferred(),h=",0123456789*#.|!:/? abcdefghijklmnopqrstuvwxyz&",p=6e3,d=3500,v=[" "," "," "," ","#","#","#","#","*","*","*","*","#","#","#","#"],m="|",g="!";r[2]&&r[1].indexOf("bit.ly")==-1&&f!=""&&l!=""?M(r[1]).then(function(e){y(e.response)}):y(r[1])});return s}function b(t){console.log("nwsAssociationTrigger");var n=new Promise(function(n,r){var i=e.Deferred(),s,o,u,a,c=2e4;t[3]?(s=null,delete o,delete u,mediascape.discovery.connectNWS(t[1]).then(function(e){function n(e){if(e.indexOf("localhost")==-1)e&&e.indexOf("bit.ly")==-1&&f!=""&&l!=""?M(e).then(function(e){console.log(e.response),s.send(e.response),s.send(JSON.stringify({peersIds:s.peersIds})),o=setInterval(function(){console.log(e.response),s.send(e.response),s.send(JSON.stringify({peersIds:s.peersIds}))},c)}):o=setInterval(function(){console.log(e),s.send(e),s.send(JSON.stringify({peersIds:s.peersIds}))},c);else if(s.peersIds.length==0||s.peersIds[0]==s.id)o=setInterval(function(){s.send(miniUrl),s.send(JSON.stringify({peersIds:s.peersIds}))},c)}s=e,a=t[2];if(s.readyState==1){console.log("Start Interval"),console.log(s.peers.length);if(s.peers.length==0||s.peers.length==1)s.emiter=!0;s.peersIds[0]==s.id&&s.emiter==1&&n(a)}s.ondisconnect=function(e){console.log("Disconnection"),console.log(s.peersIds),s.peersIds.splice(s.peersIds.indexOf(e.detail.target.id),1),console.log(s.peersIds),s.readyState==1&&s.peersIds[0]==s.id&&s.emiter!=1&&(s.emiter=!0,n(a))},s.onmessage=function(e){console.log("Message: peersIds"),console.log(s.peersIds),e.data.indexOf("peersIds")!=-1&&(s.peersIds=JSON.parse(e.data).peersIds)}}).catch(function(e){console.log(e)})):mediascape.discovery.connectNWS(t[1]).then(function(e){s=e,a=t[2],s.readyState==1&&(console.log("Emit"),s.emiter=!0,a.indexOf("localhost")==-1?t[2]&&a.indexOf("bit.ly")==-1&&f!=""&&l!=""?M(a).then(function(e){console.log(e.response),s.send(e.response),s.close()}):(console.log(a),s.send(a),s.close()):(s.send(miniUrl),s.close()),s.ondisconnect=function(e){s.peersIds.splice(s.peersIds.indexOf(e.detail.target.id),1),s.readyState==1&&s.peersIds[0]==s.id&&s.send(data.group)},s.onmessage=function(e){e.data.indexOf("peersIds")!=-1&&(s.peersIds=JSON.parse(e.data).peersIds)})}).catch(function(e){console.log(e)})});return n}function w(t){console.log("shakeAssociationTrigger");var n=new Promise(function(n,i){var o=e.Deferred(),u,h=t[1];e.ajax({type:"GET",url:"http://www.timeapi.org/utc/now.json",dataType:"jsonp",jsonpCallback:"myCallback",success:function(t){u=Date.parse(new Date(t.dateString)),h&&h.indexOf("bit.ly")==-1&&f!=""&&l!=""&&M(h).then(function(t){t.response!=undefined&&mediascape.discovery.isPresent("geolocation").then(function(n){n.presence&&mediascape.discovery.getExtra("geolocation").then(function(n){n.extra&&(a("shakeChange",!0,"message",1),e.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+n.extra[0].latitude+","+n.extra[1].longitude+"&sensor=false",function(i){i.status==="OK"?(console.log("The place has been defined"),s=e.post("http://"+c+"/api/associate",{timestamp:u,location:{latitude:n.extra[0].latitude,longitude:n.extra[1].longitude},place:i.results[0].formatted_address,url:h,miniUrl:t.response},function(e){e&&(console.log(e),e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?(a("shakeChange",!0,"errorMessage",1),a("shakeChange",!0,"message",2)):(a("shakeChange",!0,"errorMessage",1),r=setTimeout(function(){a("shakeChange",!0,"message",3),mediascape.association.doAssociation("acoustic",t.response,!1)},5e3)))})):(console.log("The place has not been defined"),s=e.post("http://"+c+"/api/associate",{timestamp:u,location:{latitude:n.extra[0].latitude,longitude:n.extra[1].longitude},url:h,miniUrl:t.response},function(e){e&&(e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?(a("shakeChange",!0,"errorMessage",1),a("shakeChange",!0,"message",2)):(a("shakeChange",!0,"errorMessage",1),r=setTimeout(function(){a("shakeChange",!0,"message",3),mediascape.association.doAssociation("acoustic",t.response,!1)},5e3)))}))}))})})})}})});return n}function E(t){console.log("syncAssociationTrigger");var n=new Promise(function(n,r){var i=e.Deferred(),o,u,h=t[1];e.ajax({type:"GET",url:"http://www.timeapi.org/utc/now.json",dataType:"jsonp",jsonpCallback:"myCallback",success:function(t){o=Date.parse(new Date(t.dateString)),h&&h.indexOf("bit.ly")==-1&&f!=""&&l!=""&&M(h).then(function(t){t.response!=undefined&&mediascape.discovery.isPresent("geolocation").then(function(r){r.presence&&mediascape.discovery.getExtra("geolocation").then(function(r){r.extra&&(a("shakeChange",!0,"message",1),e.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+r.extra[0].latitude+","+r.extra[1].longitude+"&sensor=false",function(i){i.status==="OK"?(console.log("The place has been defined"),s=e.post("http://"+c+"/api/associate",{timestamp:o,location:{latitude:r.extra[0].latitude,longitude:r.extra[1].longitude},place:i.results[0].formatted_address,url:h,miniUrl:t.response},function(e){e&&(e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"<p>Association process has been completed successfully</p>"}')):n(JSON.parse('{"response":"<p>The device can not be associated.</p>"}')))})):(console.log("The place has not been defined"),s=e.post("http://"+c+"/api/associate",{timestamp:o,location:{latitude:r.extra[0].latitude,longitude:r.extra[1].longitude},url:h,miniUrl:t.response},function(e){e&&(e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"<p>Association process has been completed successfully</p>"}')):n(JSON.parse('{"response":"<p>The device can not be associated.</p>"}')))}))}))})})})}})});return n}function S(t){console.log("dialAssociationTrigger");var n=new Promise(function(t,n){var r=e.Deferred();t(JSON.parse('{"response":"<p>The technology has not been developed yet.</p>"}'))});return n}function x(t){console.log("presentationAssociationTrigger");var n=new Promise(function(t,n){var r=e.Deferred();t(JSON.parse('{"response":"<p>The technology has not been developed yet.</p>"}'))});return n}function T(t){console.log("qrCodeAssociationCatcher");var n=new Promise(function(n,r){var i=e.Deferred();navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia?MediaStreamTrack.toString()=="function MediaStreamTrack() { [native code] }"?MediaStreamTrack.getSources(function(r){var i=null;for(var s=0;s!=r.length;++s){var o=r[s];o.kind==="video"&&(i=o.id)}if(i!=null){document.getElementById(t[1]).innerHTML='<h1>Qr Catcher</h1> 															<br> 															<div id="camera" style="width:320px;"> 																<div style="position: relative;display: inline-block;"> 																	<canvas id="qr-canvas" width="320" height="240" style="border:1px solid red;"></canvas> 																	<div class="scanner-laser laser-rightBottom" style="opacity: 0.5;"></div> 																	<div class="scanner-laser laser-rightTop" style="opacity: 0.5;"></div> 																	<div class="scanner-laser laser-leftBottom" style="opacity: 0.5;"></div> 																	<div class="scanner-laser laser-leftTop" style="opacity: 0.5;"></div> 																</div> 															</div>';for(var s=0;s<document.getElementsByClassName("scanner-laser").length;s++)document.getElementsByClassName("scanner-laser")[s].style.display="block";e("#qr-canvas").WebCodeCam({ReadQRCode:!0,ReadBarecode:!0,width:320,height:240,videoSource:{id:i,maxWidth:640,maxHeight:480},flipVertical:!1,flipHorizontal:!1,zoom:-1,beep:"audio/beep.mp3",autoBrightnessValue:!1,brightness:0,grayScale:!1,contrast:0,threshold:0,sharpness:[],resultFunction:function(e,t){(e.indexOf("http://")!=-1||e.indexOf("https://")!=-1)&&n(JSON.parse('{"response":"'+e+'"}'))},getUserMediaError:function(){n(JSON.parse('{"response":"<p>The browser does not support getUserMedia.</p>"}'))},cameraError:function(e){n(JSON.parse('{"response":"<p>Error with the camera.</p>"}'))}})}else n(JSON.parse('{"response":"<p>The device does not contain any camera.</p>"}'))}):n(JSON.parse('{"response":"<p>The device does not contain any camera.</p>"}')):n(JSON.parse('{"response":"<p>The device does not contain any camera.</p>"}'))});return n}function N(t){console.log("acousticAssociationCatcher");var n=new Promise(function(n,r){var s=e.Deferred(),o=",0123456789*#.|!:/? abcdefghijklmnopqrstuvwxyz&",u=6e3,f=3500,l="|",c="!",h=[],p=[],d=[],v=parseInt((u-f)/o.length);p=o.split("");var m=f;for(var g=0;g<o.length;g++)h[g]=m,m+=v;freq_error=v/3,i=new(window.AudioContext||window.webkitAudioContext),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia?navigator.getMedia({audio:!0,video:!1},function(e){console.log("Start Acoustic Catcher");var r=i.createMediaStreamSource(e),s=i.createAnalyser(),o=i.createBiquadFilter();o.type="highpass",o.frequency.value=3500,r.connect(o),o.connect(s);var d=s.frequencyBinCount,v=new Uint8Array(d),m="",g="",y="",b="",w=!1,E=!1,S=!1,x=!1,T=!1,N="",C=1,k=0,L="",A=new Array,O=new Array;document.getElementById(t[1]).innerHTML="";var M=setInterval(function(){s.getByteFrequencyData(v);var e,r,o=-Infinity,d=Infinity,D=-1;for(var P=0;P<v.length;P++)v[P]>o&&(o=v[P],D=P),v[P]<o&&(d=v[P]);e=o-d;var H=i.sampleRate/2;r=H/v.length*D,O.push(j);for(var P in h)if(r>h[P]-freq_error&&r<h[P]+freq_error&&r>f&&r<u){var B=h[P],j=p[P];A.push(j),g.length<3&&b!=""&&(y==h[P]?C+=1:y!=h[P]&&(C>5&&(g+=b,g=="#*#"&&(E==1&&(S=!0),E=!0,m="#*",a("startAudioProcessing"),setTimeout(function(){clearInterval(M),n(JSON.parse('{"response":"<p>Problem catching the audio.</p>"}'))},3e4))),k=C,C=1)),y!=h[P]&&E&&k>5&&(j==c?w?(console.log("Mayuscula Detectada con predecesor Mayuscula"),T=!0,w=!0):(console.log("Mayuscula Detectada sin predecesor Mayuscula"),T=!0,w=!0,m+=b,document.getElementById(t[1]).insertAdjacentHTML("beforeend",b)):j==l?T?(console.log("Duplicado Detectado Con Mayuscula"),x=!0):w?(console.log("Duplicado Detectado Sin Mayuscula con predecesor Mayuscula"),x=!0):(console.log("Duplicado Detectado Sin Mayuscula sin predecesor Mayuscula"),x=!0,m+=b,document.getElementById(t[1]).insertAdjacentHTML("beforeend",b)):T?x?(console.log("Upper repeated"),m=m+j.toUpperCase()+j.toUpperCase(),x=!1,L=j,document.getElementById(t[1]).insertAdjacentHTML("beforeend",j.toUpperCase()+j.toUpperCase())):(console.log("Upper !repeated"),m+=j.toUpperCase(),T=!1,L=j,document.getElementById(t[1]).insertAdjacentHTML("beforeend",j.toUpperCase())):x?(console.log("repeated"),m+=j,x=!1,document.getElementById(t[1]).insertAdjacentHTML("beforeend",j),w=!1):(console.log("last"),w=!1,b!=L?(m+=b,document.getElementById(t[1]).insertAdjacentHTML("beforeend",b)):L="")),N=_(m.substring(6,m.length-3)),(g.indexOf("|")==0||g.indexOf("|")==1)&&g.indexOf("|")<g.length-1&&(g=g.replace("|",g.substring(g.indexOf("|")+1,g.indexOf("|")+2)));if(g.length==3&&y!=h[P])if(parseInt(g)==N&&N!=0){clearInterval(M);var F=document.createEvent("Event");F.initEvent("ended",!0,!0),document.dispatchEvent(F)}else g=g.substring(1,g.length);else if(S){clearInterval(M);var F=document.createEvent("Event");F.initEvent("ended",!0,!0),document.dispatchEvent(F)}g.length<3&&(b==""?(y=h[P],b=p[P]):b!=""&&y!=h[P]&&(y=h[P],b=p[P]))}},10);document.getElementById(t[1]).insertAdjacentHTML("beforeend","<br>"+m),document.addEventListener("ended",function(e){console.log("Ended"),m!=""&&(console.log("Recived Message: "+m),console.log("Start String: "+m.substring(0,3)),console.log("Length: "+m.substring(3,6)),console.log("Url: "+m.substring(6,m.length-3)),console.log("Checksum: "+m.substring(m.length-3,m.length)),document.getElementById(t[1]).insertAdjacentHTML("beforeend","<br>Result:<br>"+m.substring(6,m.length-3)),clearInterval(M),n(JSON.parse('{"response":"'+m.substring(6,m.length-3)+'"}')))})},function(e){alert(e)}):n(JSON.parse('{"response":"<p>The device can not catch audio.</p>"}'))});return n}function C(t){console.log("nwsAssociationCatcher");var r=new Promise(function(r,i){var s=e.Deferred(),o;mediascape.discovery.isPresent("namedwebsockets").then(function(e){e.presence?(delete o,delete n,delete interval1,mediascape.discovery.connectNWS(t[1]).then(function(e){o=e,o.onmessage=function(e){console.log(e.data),e.data.indexOf("peersIds")!=-1?o.peersIds=JSON.parse(e.data).peersIds:(e.data.indexOf("http://")!=-1||e.data.indexOf("https://")!=-1)&&r(JSON.parse('{"response":"'+e.data+'"}'))}}).catch(function(e){console.log(e)})):r(JSON.parse('{"response":"<p>It has been impossible to find the NamedWebSocket Proxy.</p><p>Remeber that you can associate using On Demand system.</p>"}'))})});return r}function k(t){console.log("shakeAssociationCatcher");var n=new Promise(function(n,i){var o=e.Deferred();e.ajax({type:"GET",url:"http://www.timeapi.org/utc/now.json",dataType:"jsonp",jsonpCallback:"myCallback",success:function(i){time=Date.parse(new Date(i.dateString)),mediascape.discovery.isPresent("geolocation").then(function(i){i.presence&&mediascape.discovery.getExtra("geolocation").then(function(i){i.extra&&(a("shakeChange",!0,"message",1),e.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+i.extra[0].latitude+","+i.extra[1].longitude+"&sensor=false",function(o){o.status==="OK"?s=e.post("http://"+c+"/api/associate",{timestamp:time,location:{latitude:i.extra[0].latitude,longitude:i.extra[1].longitude},place:o.results[0].formatted_address},function(i){i&&(i.response.indexOf("http://")!=-1||i.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"'+i.response+'"}')):(a("shakeChange",!0,"errorMessage",3),r=setTimeout(function(){a("shakeChange",!1);var i=["qr",t[1]];T(i).then(function(e){e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"'+e.response+'"}')):console.log(e.response)});var o=["acoustic",t[2]];N(o).then(function(t){t.response.indexOf("http://")!=-1||t.response.indexOf("https://")!=-1?s=e.post("http://"+c+"/api/associate",{url:url},function(e){n(JSON.parse('{"response":"'+t.response+'"}'))}):(a("shakeChange",!0,"errorMessage",3),r=setTimeout(function(){a("shakeChange",!1)},5e3))})},5e3)))}):s=e.post("http://"+c+"/api/associate",{timestamp:time,location:{latitude:i.extra[0].latitude,longitude:i.extra[1].longitude}},function(e){e&&(e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"'+e.response+'"}')):(a("shakeChange",!0,"errorMessage",3),r=setTimeout(function(){a("shakeChange",!1);var e=["qr",t[1]];T(e).then(function(e){e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"'+e.response+'"}')):console.log(e)});var e=["acoustic",t[2]];N(e).then(function(e){e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?n(JSON.parse('{"response":"'+e.response+'"}')):(a("shakeChange",!0,"errorMessage",3),r=setTimeout(function(){a("shakeChange",!1)},5e3))})},5e3)))})}))})})}})});return n}function L(t){console.log(t),console.log("syncAssociationCatcher");var n=new Promise(function(t,n){var r=e.Deferred();e.ajax({type:"GET",url:"http://www.timeapi.org/utc/now.json",dataType:"jsonp",jsonpCallback:"myCallback",success:function(n){time=Date.parse(new Date(n.dateString)),mediascape.discovery.isPresent("geolocation").then(function(n){n.presence&&mediascape.discovery.getExtra("geolocation").then(function(n){n.extra&&(a("shakeChange",!0,"message",1),e.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+n.extra[0].latitude+","+n.extra[1].longitude+"&sensor=false",function(r){r.status==="OK"?e.post("http://"+c+"/api/associate",{timestamp:time,location:{latitude:n.extra[0].latitude,longitude:n.extra[1].longitude},place:r.results[0].formatted_address},function(e){e&&(e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?t(JSON.parse('{"response":"'+e.response+'"}')):t(JSON.parse('{"response":"<p>The device can not be associated.</p>"}')))}):e.post("http://"+c+"/api/associate",{timestamp:time,location:{latitude:n.extra[0].latitude,longitude:n.extra[1].longitude}},function(e){e&&(e.response.indexOf("http://")!=-1||e.response.indexOf("https://")!=-1?t(JSON.parse('{"response":"'+e.response+'"}')):t(JSON.parse('{"response":"<p>The device can not be associated.</p>"}')))})}))})})}})});return n}function A(t){console.log("dialAssociationCatcher");var n=new Promise(function(t,n){var r=e.Deferred();t(JSON.parse('{"response":"<p>The technology has not been developed yet.</p>"}'))});return n}function O(t){console.log("presentationAssociationCatcher");var n=new Promise(function(t,n){var r=e.Deferred();t(JSON.parse('{"response":"<p>The technology has not been developed yet.</p>"}'))});return n}function M(t){console.log("Short");var n=new Promise(function(n,r){var i=e.Deferred();l!==""&&f!==""?e.ajax({url:"http://api.bit.ly/v3/shorten",data:{longUrl:t,apiKey:l,login:f},dataType:"jsonp"}).done(function(e,t,r){if(e.status_code==200){var i=e.data.url;n(JSON.parse('{"response":"'+i+'"}'))}else n(JSON.parse('{"response":"<p>It has not been possible to minimize the url.</p>"}'))}):n(JSON.parse('{"response":"<p>It has not been possible to minimize the url.<p></p> Define a Bitly user and pass.</p>"}'))});return n}function _(e){var t=unescape(encodeURIComponent(e)),n=0;for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);n+=i}var s=255&n;return s}var f="ionalberdi",l="R_978251cf3ed04317a147fde5a237b13c",c=window.location.host,h=Array.prototype.slice.call(arguments);if(h[0].toLowerCase()==="qr")return h.length==4||h.length==6||h.length==8?(console.log("Trigger"),v(h)):h.length==2?(console.log("Catcher"),T(h)):p("<p>Review the number of parameters used.</p>");if(h[0].toLowerCase()==="acoustic")return h.length==3?(console.log("Trigger"),y(h)):h.length==2?(console.log("Catcher"),N(h)):p("<p>Review the number of parameters used.</p>");if(h[0].toLowerCase()==="nws")return h.length==4?(console.log("Trigger"),b(h)):h.length==2?(console.log("Catcher"),C(h)):p("<p>Review the number of parameters used.</p>");if(h[0].toLowerCase()==="shake")return h.length==2?(console.log("Trigger"),w(h)):h.length==3?(console.log("Catcher"),k(h)):p("<p>Review the number of parameters used.</p>");if(h[0].toLowerCase()!=="dial"&&h[0].toLowerCase()!=="presentation")return h[0].toLowerCase()==="text"?h.length==3?d(h):p("<p>Review the number of parameters used.</p>"):h[0].toLowerCase()==="sync"?h.length==2?(console.log("Trigger"),E(h)):h.length==1?(console.log("Catcher"),L(h)):p("<p>Review the number of parameters used.</p>"):p("<p>The technology has not been developed yet.</p>")},this.stopAssociation=function(o){console.log("stopFSKModulator");var a=new Promise(function(a,f){var l=e.Deferred();o==="acoustic"&&(t?(u(t),clearInterval(n)):clearInterval(n)),i!=undefined&&i.close(),clearTimeout(r),s!=undefined&&s.abort()});return a},this.on=function(e,t){console.log("on"),e=="shakeChange"?document.addEventListener("shakeChange",function(e){t(JSON.parse('{"response":'+JSON.stringify(e.detail)+"}"))}):e=="startAudioProcessing"&&document.addEventListener("startAudioProcessing",function(){t()})}};return t.__moduleName="association",t}),define("mediascape/MediaSync/mediasync",[],function(){var e=function(){function t(t){if(e===!1)return!1;if(t.canplay)return e=!1,!1;var n=t.muted;return t.muted=!0,t.play(),e=t.paused==1,t.pause(),t.muted=n,e}function n(e,t,n){function c(){l.vel==1&&e.play()}function p(){console.log("onplay"),l.vel==0&&e.pause()}function d(){console.log(err),m()}function A(t){return i.loop?i.duration?t%i.duration:t%e.duration:t}function K(){if(!i.debug)return;if(typeof i.debug=="function"){var e=arguments;setTimeout(function(){i.debug.apply(window,e)},0)}else{var e=[];for(var t in arguments)e.push(arguments[t]);console.log(JSON.stringify(e))}}var r,i=n||{};i.skew=i.skew||0,i.target=i.target||.025,i.original_target=i.target,i.loop=i.loop||!1,i.target=i.target*2,i.remember===undefined&&(i.remember=!1);if(i.debug||i.remember===!1)localStorage.removeItem("mediascape_vpbr"),i.remember=!1;i.automute===undefined&&(i.automute=!0);var s=!1,o=function(e){y=0,E=[],C=null;if(a||f)return;g!=undefined?g(e):console.log("WARNING: onchange but no update func yet")},u=function(e){y=0,l&&l.off("change",o),l=e,l.version==3&&(l.__defineGetter__("pos",function(){return l.query().position}),l.__defineGetter__("vel",function(){return l.query().velocity}),l.__defineGetter__("acc",function(){return l.query().acceleration})),l.on("change",o)};t||console.log("WARNING: No motion has been set");var a=!1,f=!1,l,v=function(e){e==undefined&&(e=!0),f=e,f||o()},m=function(){a=!0,e.removeEventListener("paused",c),e.removeEventListener("play",p),e.removeEventListener("error",d)},g,y=0,b=0,w,E=[],S,x=0,T=5,N=!1,C,k=0,L=function(t){if(e.readyState==0)return;if(l.vel!=1){e.currentTime=t,C=undefined,V("skip",{event:"skip",pos:t,target:l.pos,adjust:0});return}var n=0,r=performance.now();if(C){r-C.ts<1500?(k+=1,k>3&&(K("Lost all confidence (thrashing)"),i.target=Math.min(1,i.target*2),V("target_change",{event:"target_change",target:i.target,reason:"thrashing"}),k=0)):k=0;var s=(r-C.ts)/1e3,o=e.currentTime,u=A(C.pos+s)-o;n=C.adjust+u,Math.abs(n)>5&&(n=0)}e.playbackRate=1,K({type:"skip",pos:t+n,target:A(l.pos),adjust:n}),T=Math.min(5,T+5),l.vel!=1?e.currentTime=t:(e.currentTime=t+n,C={ts:r,pos:t,adjust:n}),N&&(N=!1,V("sync",{event:"sync",sync:!1})),V("skip",{event:"skip",pos:t+n,target:l.pos,adjust:n})},O=function(t){if(a||f)return;var n=I();if(A(n.pos)==w)return;w=A(n.pos);var r=A(n.pos+i.skew),o=e.duration;if(o)if(r<0||r>o){e.paused||e.pause();return}n.vel!=0?e.paused&&e.play():e.paused||e.pause();try{if(!S&&y>40)throw s&&(e.muted=!1,s=!1),V("muted",{event:"muted",muted:!1}),new Error("Variable playback rate seems broken - "+y+" bad");var u=r-e.currentTime;if(u<-1||n.vel==0||Math.abs(u)>1){K({type:"jump",diff:u});var c=A(n.pos+i.skew);performance.now()-x>150&&(x=performance.now(),L(c));return}E.push(u);if(!(E.length>=3))return;var h=0;for(var p=0;p<E.length;p++)h+=E[p];u=h/E.length,E=E.splice(0,1),K({type:"dbg",diff:u,bad:y,vpbr:S});var d=function(e,t){return Math.min(l.vel+e,Math.max(l.vel-e,l.vel+t))};Math.abs(u)>1?(E=[],e.playbackRate=d(1,u*1.3),K({type:"vpbr",level:"coarse",rate:e.playbackRate}),y+=4):Math.abs(u)>.5?(E=[],e.playbackRate=d(.5,u*.75),K({type:"vpbr",level:"mid",rate:e.playbackRate}),y+=2):Math.abs(u)>.1?(E=[],e.playbackRate=d(.4,u*.75),K({type:"vpbr",level:"midfine",rate:e.playbackRate}),y+=1):Math.abs(u)>.025?(E=[],e.playbackRate=d(.3,u*.6),K({type:"vpbr",level:"fine",rate:e.playbackRate})):(S||(y=Math.max(0,y-20),b++,b>5&&(S=!0,localStorage&&i.remember&&(K("Variable Playback Rate capability stored"),localStorage.mediascape_vpbr=JSON.stringify({appVersion:navigator.appVersion,vpbr:!0})))),N||(N=!0,V("sync",{event:"sync",sync:!0})),e.playbackRate=d(.02,u*.07)),i.automute&&(!e.muted&&(e.playbackRate>1.05||e.playbackRate<.95)?(s=!0,e.muted=!0,V("muted",{event:"muted",muted:!0}),K({type:"mute",muted:!0})):e.muted&&s&&(s=!1,e.muted=!1,K({type:"mute",muted:!1}),V("muted",{event:"muted",muted:!1})))}catch(v){i.automute&&(e.muted=!1),C=null,localStorage&&i.remember&&(K("Variable Playback Rate NOT SUPPORTED, remembering this  "),localStorage.mediascape_vpbr=JSON.stringify({appVersion:navigator.appVersion,vpbr:!1})),console.log("Error setting variable playback speed - seems broken",v),F(D)}},T=5,M,_,D=function(t){if(a||f)return;var n=I();n.vel>0?e.paused&&e.play():e.paused||e.pause();if(n.vel!=1){if(A(n.pos)==M)return;M=n.pos,K("Jump, playback speed is not :",n.vel);var r=A(n.pos+i.skew);e.currentTime!=r&&L(r,"jump");return}var s=n.pos+i.skew,o=s-e.currentTime;if(t!=undefined&&t.pos!=undefined){K("MOTION JUMP");var r=n.pos+i.skew;L(r);return}E.push(o);if(!(E.length>=3))return;var u=0;for(var c=0;c<E.length;c++)u+=E[c];o=u/E.length,E.splice(0,1),Math.abs(o)<.001&&(T=Math.max(5,T)),T<=-2?(K("Lost all confidence"),i.target=Math.min(1,i.target*1.4),T=0,V("target_change",{event:"target_change",target:i.target,reason:"unknown"})):T>15&&(K("Feels better"),i.target==i.original_target&&(N||(N=!0,V("sync",{event:"sync",sync:!0}))),i.target=Math.max(Math.abs(o)*.7,i.original_target),T-=8,V("target_change",{event:"target_change",target:i.target,reason:"improving"})),K({type:"dbg",diff:o,target:i.target,perfect:T});if(Math.abs(o)>i.target){T-=1;if(T>0)return;r=l.pos+i.skew,T+=8,L(r)}else Math.abs(o-_)<i.target/2&&T++,_=o},P=!1,H=function(){if(P)return;P=!0,l===undefined&&u(t);if(localStorage&&i.remember&&localStorage.mediascape_vpbr){var n=JSON.parse(localStorage.mediascape_vpbr);n.appVersion===navigator.appVersion&&(S=n.vpbr)}i.mode==="vpbr"&&(S=!0),i.mode==="skip"||S===!1?(e.playbackRate=1,g=D):(i.automute&&(e.muted=!0,s=!0,V("muted",{event:"muted",muted:!0})),g=O),e.removeEventListener("canplay",H),e.removeEventListener("playing",H),F(g),l.on("change",o)};e.addEventListener("canplay",H),e.addEventListener("playing",H);var B,j,F=function(t){B&&(clearInterval(j),e.removeEventListener("timeupdate",B),e.removeEventListener("pause",B),e.removeEventListener("ended",B)),B=t,e.playbackRate=1,e.addEventListener("timeupdate",t),e.addEventListener("pause",t),e.addEventListener("ended",t),t===O?V("mode_change",{event:"mode_change",mode:"vpbr"}):V("mode_change",{event:"mode_change",mode:"skip"})},I=function(){if(l.version==3){var e=l.query();return{pos:e.position,vel:e.velocity,acc:e.acceleration}}return l.query()},q=function(e){i.skew=e},R=function(){return i.skew},U=function(e,t){i[e]=t,e==="target"&&(i.original_target=t)},z=function(){return g===O?"playbackRate":"skip"},W=setInterval(function(){if(e.readyState>=2){clearInterval(W);try{var t=new Event("canplay");e.dispatchEvent(t)}catch(n){var t=document.createEvent("Event");t.initEvent("canplay",!0,!1),e.dispatchEvent(t)}}},100),X={skip:[],mode_change:[],target_change:[],muted:[],sync:[]},V=function(e,t){if(!X.hasOwnProperty(e))throw"Unsupported event: "+e;for(var n=0;n<X[e].length;n++){h=X[e][n];try{h.call(r,t)}catch(t){console.log("Error in "+e+": "+h+": "+t)}}},$=function(e,t){if(!X.hasOwnProperty(e))throw"Unknown parameter "+e;var n=X[e].indexOf(t);return n>-1&&X[e].splice(n,1),r},J=function(e,t,n){if(!X.hasOwnProperty(e))throw new Error("Unsupported event: "+e);if(!t||typeof t!="function")throw"Illegal handler";var i=X[e].indexOf(t);if(i!=-1)throw new Error("Already registered");return X[e].push(t),setTimeout(function(){e==="sync"&&V(e,{event:e,sync:N},t),e==="muted"&&V(e,{event:e,muted:s},t)},0),r};return r={setSkew:q,getSkew:R,setOption:U,getMethod:z,setMotion:u,stop:m,pause:v,on:J,off:$,init:H},r}var e,r={};return r.mediaSync=n,r};return e.__moduleName="mediaSync",e}),function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function s(e,t){var s=n(e,t)?i:r;s(e,t)}var n,r,i;"classList"in document.documentElement?(n=function(e,t){return e.classList.contains(t)},r=function(e,t){e.classList.add(t)},i=function(e,t){e.classList.remove(t)}):(n=function(e,n){return t(n).test(e.className)},r=function(e,t){n(e,t)||(e.className=e.className+" "+t)},i=function(e,n){e.className=e.className.replace(t(n)," ")}),e.classie={hasClass:n,addClass:r,removeClass:i,toggleClass:s,has:n,add:r,remove:i,toggle:s}}(window),define("classifie",function(){}),define("configPanel",["jquery","bootstrap","classifie"],function(e,t){var n=e,r=function(e){this.items=[],this.activeSection="",this.activeDevice="",this.selfID="",this.selfIDNum="",this.showing=!0;var t=null,n=e,r=null,o=null,u=null,a=null,b=null,C=null;this.controlPanel=function(){function l(e){if(e.id===f)return e}var e=mediascape.AdaptationToolkit.componentManager.core.getComponents();console.log("Konstruktorea");var f="video1",k=e.filter(l),L=new v;L.setID(k[0].getAttribute("compId")),L.setName(k[0].id),L.setImage("../resources/configPanel/img/camara/logo_etb2.png"),f="video2",k=e.filter(l);var A=new v;A.setID(k[0].getAttribute("compId")),A.setName(k[0].id),A.setImage("../resources/configPanel/img/camara/logo_bildu.png"),f="video3",k=e.filter(l);var O=new v;O.setID(k[0].getAttribute("compId")),O.setName(k[0].id),O.setImage("../resources/configPanel/img/camara/logos_partidos_PNV_BLANCO.png"),f="video4",k=e.filter(l);var M=new v;M.setID(k[0].getAttribute("compId")),M.setName(k[0].id),M.setImage("../resources/configPanel/img/camara/logo_sozialista.png"),f="video5",k=e.filter(l);var _=new v;_.setID(k[0].getAttribute("compId")),_.setName(k[0].id),_.setImage("../resources/configPanel/img/camara/logos_partidos_Populares_vascos_BLANCO.png"),f="results",k=e.filter(l);var D=new x;D.setID(k[0].getAttribute("compId")),f="radio1",k=e.filter(l);var P=new E;P.setID(k[0].getAttribute("compId")),f="graph1",k=e.filter(l);var H=new T;H.setPlace("IRUNEA/PAMPLONA"),H.setID(k[0].getAttribute("compId")),f="graph2",k=e.filter(l);var B=new T;B.setPlace("BILBAO"),B.setID(k[0].getAttribute("compId")),f="graph3",k=e.filter(l);var j=new T;j.setPlace("DONOSTIA/SAN SEBASTIAN"),j.setID(k[0].getAttribute("compId")),f="graph4",k=e.filter(l);var F=new T;F.setPlace("VITORIA-GASTEIZ"),F.setID(k[0].getAttribute("compId")),f="twitterViewer",k=e.filter(l);var I=new g;I.setID(k[0].getAttribute("compId")),f="twitterMap",k=e.filter(l);var q=new y;q.setID(k[0].getAttribute("compId")),u=new m,u.addCamera(L),u.addCamera(A),u.addCamera(O),u.addCamera(M),u.addCamera(_),a=new N,a.addTableComp(D),a.addGraphComp(H),a.addGraphComp(B),a.addGraphComp(j),a.addGraphComp(F),b=new S,b.addComponent(P),C=new w,C.addViewerComp(I),C.addMapComp(q),t=new c;var R=new h;R.setName("pip"),R.setImage("../resources/configPanel/img/layouts/layout_03.png");var U=new h;U.setName("customGrid"),U.setImage("../resources/configPanel/img/layouts/layout_10.png");var z=new h;z.setName("carousel"),z.setImage("../resources/configPanel/img/layouts/layout_08.png");var W=new h;W.setName("divided"),W.setImage("../resources/configPanel/img/layouts/layout_06.png"),r=new p,r.addLayout(R),r.addLayout(U),r.addLayout(z),r.addLayout(W),o=new d(n);var X=new s,V=new i;V.setText("Add device"),V.setIcon("zmdi zmdi-plus"),V.setSection("AddDevice"),X.addItem(V);var $=new i;$.setText("Layouts"),$.setIcon("zmdi zmdi-view-quilt"),$.setSection("layouts"),X.addItem($);var J=new i;J.setText("Cameras"),J.setIcon("zmdi zmdi-videocam"),J.setSection("cameras"),X.addItem(J);var K=new i;K.setText("Twitter"),K.setIcon("zmdi zmdi-twitter"),K.setSection("twitter"),X.addItem(K);var Q=new i;Q.setText("Radio"),Q.setIcon("zmdi zmdi-radio"),Q.setSection("radio"),X.addItem(Q);var G=new i;G.setText("Graphics"),G.setIcon("zmdi zmdi-equalizer"),G.setSection("graphics"),X.addItem(G),this.addItem(X),document.body.appendChild(this.render(""))},this.addItem=function(e){this.items.push(e)},this.addItemPos=function(e,t){this.items.splice(t,0,e)},this.removeItem=function(e){for(var t=0;t<this.items.length;t++)this.items[t].name===e&&this.items.splice(t,1)},this.onAgentChange=function(e){var n=document.querySelector("#fullTemp");e.detail.status==="join"?mediascape.AdaptationToolkit.uiComponents.connectedNotification():e.detail.status==="left"&&mediascape.AdaptationToolkit.uiComponents.disconnectedNotification();if(e.detail.status==="join"){mediascape.AdaptationToolkit.uiComponents.ctrlPanel.selfID=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgentId();var i=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),s=i.agents,c=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.selfID;function h(e){if(e.id===c)return e}var p=s.filter(h);n.querySelector("#devNum").innerHTML=p[0]._id+1,mediascape.AdaptationToolkit.uiComponents.ctrlPanel.selfIDNum=p[0]._id+1;var c=e.detail.agentid,d=s.filter(h);if(i.agents.length>1&&t.devices.length===0){for(var v=0;v<i.agents.length;v++){var m=new l;i.agents[v].capabilities.platform.deviceType==="TV"?m.setIcon("TV_"+(i.agents[v]._id+1)+".png"):i.agents[v].capabilities.platform.deviceType.toLowerCase()==="desktop"?m.setIcon("LAPTOP_"+(i.agents[v]._id+1)+".png"):i.agents[v].capabilities.platform.deviceType==="Tablet"?m.setIcon("TABLET_"+(i.agents[v]._id+1)+".png"):i.agents[v].capabilities.platform.deviceType.toLowerCase()==="mobile"&&m.setIcon("MOVIL_"+(i.agents[v]._id+1)+".png"),m.setID(i.agents[v].id);if(v===0){var g=new f;g.setName("AddDevice"),g.addItem(o),this.addItem(g),n.appendChild(g.render())}var y=new f;y.setName(i.agents[v].id+"layouts"),y.addItem(t),r.setActiveLayout(i.agents[v].capabilities.layoutStatus),y.addItem(r),this.addItem(y),n.appendChild(y.render());var w=new f;w.setName(i.agents[v].id+"cameras"),w.addItem(t),u.setCamsViewStatus(i.agents[v].id),u.setCamsSoundStatus(i.agents[v].id),w.addItem(u),this.addItem(w),n.appendChild(w.render());var E=new f;E.setName(i.agents[v].id+"twitter"),E.addItem(t),C.setViewerViewStatus(i.agents[v].id),C.setViewerHTStatus(i.agents[v].id),C.setMapViewStatus(i.agents[v].id),E.addItem(C),this.addItem(E),n.appendChild(E.render());var S=new f;S.setName(i.agents[v].id+"radio"),S.addItem(t),b.setRadioViewStatus(i.agents[v].id),S.addItem(b),this.addItem(S),n.appendChild(S.render());var x=new f;x.setName(i.agents[v].id+"graphics"),x.addItem(t),a.setTableViewStatus(i.agents[v].id),a.setTableDataStatus(i.agents[v].id),a.setGraphsViewStatus(i.agents[v].id),x.addItem(a),this.addItem(x),n.appendChild(x.render()),t.addDevice(m)}var T=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,N=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,k=document.querySelector("#fullTemp").children;for(var v=2;v<N;v++)k[v].replaceChild(t.render(),k[v].children[0])}else{mediascape.AdaptationToolkit.uiComponents.ctrlPanel.selfID=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getAgentId();var m=new l;e.detail.profile.deviceType==="TV"?m.setIcon("TV_"+(d[0]._id+1)+".png"):e.detail.profile.deviceType.toLowerCase()==="desktop"?m.setIcon("LAPTOP_"+(d[0]._id+1)+".png"):e.detail.profile.deviceType==="Tablet"?m.setIcon("TABLET_"+(d[0]._id+1)+".png"):e.detail.profile.deviceType.toLowerCase()==="mobile"&&m.setIcon("MOVIL_"+(d[0]._id+1)+".png");if(t.devices.length===0){m.setID(e.detail.agentid);var g=new f;g.setName("AddDevice"),g.addItem(o),this.addItem(g),n.appendChild(g.render());var y=new f;y.setName(e.detail.agentid+"layouts"),y.addItem(t),r.setActiveLayout(d[0].capabilities.layoutStatus),y.addItem(r),this.addItem(y),n.appendChild(y.render());var w=new f;w.setName(e.detail.agentid+"cameras"),w.addItem(t),u.setCamsViewStatus(e.detail.agentid),u.setCamsSoundStatus(e.detail.agentid),w.addItem(u),this.addItem(w),n.appendChild(w.render());var E=new f;E.setName(e.detail.agentid+"twitter"),E.addItem(t),C.setViewerViewStatus(e.detail.agentid),C.setViewerHTStatus(e.detail.agentid),C.setMapViewStatus(e.detail.agentid),E.addItem(C),this.addItem(E),n.appendChild(E.render());var S=new f;S.setName(e.detail.agentid+"radio"),S.addItem(t),b.setRadioViewStatus(e.detail.agentid),S.addItem(b),this.addItem(S),n.appendChild(S.render());var x=new f;x.setName(e.detail.agentid+"graphics"),x.addItem(t),a.setTableViewStatus(e.detail.agentid),a.setTableDataStatus(e.detail.agentid),a.setGraphsViewStatus(e.detail.agentid),x.addItem(a),this.addItem(x),n.appendChild(x.render())}else{m.setID(e.detail.agentid);var y=new f;y.setName(e.detail.agentid+"layouts"),y.addItem(t),r.setActiveLayout(d[0].capabilities.layoutStatus),y.addItem(r),this.addItem(y),n.appendChild(y.render());var w=new f;w.setName(e.detail.agentid+"cameras"),w.addItem(t),u.setCamsViewStatus(e.detail.agentid),u.setCamsSoundStatus(e.detail.agentid),w.addItem(u),this.addItem(w),n.appendChild(w.render());var E=new f;E.setName(e.detail.agentid+"twitter"),E.addItem(t),C.setViewerViewStatus(e.detail.agentid),C.setViewerHTStatus(e.detail.agentid),C.setMapViewStatus(e.detail.agentid),E.addItem(C),this.addItem(E),n.appendChild(E.render());var S=new f;S.setName(e.detail.agentid+"radio"),S.addItem(t),b.setRadioViewStatus(e.detail.agentid),S.addItem(b),this.addItem(S),n.appendChild(S.render());var x=new f;x.setName(e.detail.agentid+"graphics"),x.addItem(t),a.setTableViewStatus(e.detail.agentid),a.setTableDataStatus(e.detail.agentid),a.setGraphsViewStatus(e.detail.agentid),x.addItem(a),this.addItem(x),n.appendChild(x.render())}t.addDevice(m);var T=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,N=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,k=document.querySelector("#fullTemp").children;for(var v=2;v<N;v++)if(T[v].name.indexOf("cameras")>-1&&T[v].name.indexOf(e.detail.agentid)===-1){var L=new f;L.setName(T[v].name),L.addItem(t),u.setCamsViewStatus(T[v].name.split("cameras")[0]),u.setCamsSoundStatus(T[v].name.split("cameras")[0]),L.addItem(u),this.removeItem(T[v].name),this.addItemPos(L,v),n.replaceChild(L.render(),k[v])}else k[v].replaceChild(t.render(),k[v].children[0]);mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSection(mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeSection,undefined)}mediascape.AdaptationToolkit.uiComponents.ctrlPanel.hide()}else{t.removeDevice(e.detail.agentid);var T=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,N=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,k=document.querySelector("#fullTemp").children,A=0;for(var v=2;v<N;v++)if(T[v-A].name.indexOf(e.detail.agentid)===0)mediascape.AdaptationToolkit.uiComponents.ctrlPanel.removeItem(T[v-A].name),T=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,n.removeChild(k[v-A]),A+=1;else{if(T[v-A].name.indexOf("cameras")>-1){var L=new f;L.setName(T[v-A].name),L.addItem(t),u.setCamsViewStatus(T[v-A].name.split("cameras")[0]),u.setCamsSoundStatus(T[v-A].name.split("cameras")[0]),L.addItem(u),this.removeItem(T[v-A].name),this.addItemPos(L,v-A),n.replaceChild(L.render(),k[v-A])}k[v-A].replaceChild(t.render(),k[v-A].children[0])}mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSection(mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeSection,undefined)}},document.addEventListener("agentChange",this.onAgentChange.bind(this)),this.onCtxUpdate=function(e){console.log(e);var t=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,n=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,r=document.querySelector("#fullTemp").children;if(e.detail.context.lastChange!==undefined)if(e.detail.context.lastChange.diff!==null){var i=e.detail.context.lastChange.diff;for(var s=0;s<i.length;s++)for(var o=2;o<n;o++){var u="#viewCheck"+i[s].compId;if(i[s].property==="show")t[o].name.indexOf(e.detail.agentid)===0&&r[o].querySelector(u)!==null?i[s].newValue===!1?r[o].querySelector(u).setAttribute("val",!1):i[s].newValue===!0&&r[o].querySelector(u).setAttribute("val",!0):t[o].name.indexOf(e.detail.agentid)===0&&r[o].querySelector("#radioViewBut"+i[s].compId)!==null&&(i[s].newValue===!1?(r[o].querySelector("#radioViewBut"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/Radio_btn_play.png"),r[o].querySelector("#radioEq"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/Radio-animacion-off-estatico.png")):i[s].newValue===!0&&(r[o].querySelector("#radioViewBut"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/Radio_btn_pausa.png"),r[o].querySelector("#radioEq"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/animacion-ecualizador_transp.gif")));else if(i[s].property==="customCmd"){if(i[s].newValue==="hide"||i[s].newValue==="show"){var u="#viewCheck"+i[s].compId;t[o].name.indexOf(e.detail.agentid)===0&&r[o].querySelector(u)!==null?i[s].newValue==="hide"?r[o].querySelector(u).setAttribute("val",!1):i[s].newValue==="show"&&r[o].querySelector(u).setAttribute("val",!0):t[o].name.indexOf(e.detail.agentid)===0&&r[o].querySelector("#radioViewBut"+i[s].compId)!==null&&(i[s].newValue==="hide"?(r[o].querySelector("#radioViewBut"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/Radio_btn_play.png"),r[o].querySelector("#radioEq"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/Radio-animacion-off-estatico.png")):i[s].newValue==="show"&&(r[o].querySelector("#radioViewBut"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/Radio_btn_pausa.png"),r[o].querySelector("#radioEq"+i[s].compId).setAttribute("src","../resources/configPanel/img/radio/animacion-ecualizador_transp.gif")))}if(i[s].newValue==="mutePlayer"||i[s].newValue==="soundPlayer"){var u="#soundCheck"+i[s].compId;t[o].name.indexOf(e.detail.agentid)===0&&r[o].querySelector(u)!==null&&(i[s].newValue==="mutePlayer"?r[o].querySelector(u).setAttribute("val",!1):i[s].newValue==="soundPlayer"&&r[o].querySelector(u).setAttribute("val",!0))}if(i[s].newValue==="offSound"||i[s].newValue==="onSound"){var u="#soundCheck"+i[s].compId;t[o].name.indexOf(e.detail.agentid)===0&&r[o].querySelector(u)!==null&&(i[s].newValue==="offSound"?r[o].querySelector(u).setAttribute("val",!1):i[s].newValue==="onSound"&&r[o].querySelector(u).setAttribute("val",!0))}if(i[s].newValue==="resultTablePresent"||i[s].newValue==="resultTablePast"||i[s].newValue==="donostia"||i[s].newValue==="bilbo"||i[s].newValue==="gasteiz"||i[s].newValue==="irunea")if(t[o].name===e.detail.agentid+"graphics")if(i[s].newValue==="resultTablePresent")r[o].querySelector("#presentLI").className="active",r[o].querySelector("#pastLI").className="",r[o].querySelector("#presentPanel").className="col-md-12 fade in tab-pane active",r[o].querySelector("#pastPanel").className="col-md-12 fade in tab-pane ";else if(i[s].newValue==="resultTablePast")r[o].querySelector("#presentLI").className="",r[o].querySelector("#pastLI").className="active",r[o].querySelector("#presentPanel").className="col-md-12 fade in tab-pane ",r[o].querySelector("#pastPanel").className="col-md-12 fade in tab-pane active";else{var a=r[o].querySelectorAll(".pastilla_ciudad");for(var f=0;f<a.length;f++)a[f].id===i[s].newValue?a[f].className="col-md-12 pastilla_ciudad active":a[f].className="col-md-12 pastilla_ciudad"}t[o].name===e.detail.agentid+"twitter"&&r[o].querySelector("#htSelect")!==null&&(r[o].querySelector("#htSelect").value=i[s].newValue)}}}else if(e.detail.context.lastChange.key==="layoutEvent")for(var o=2;o<n;o++)if(t[o].name===e.detail.agentid+"layouts"){var l=t[o].items[1].layouts;for(var s=0;s<l.length;s++)l[s].name===e.detail.context.lastChange.value?r[o].querySelector("#"+e.detail.context.lastChange.value+"Layout").className="active":r[o].querySelector("#"+l[s].name+"Layout").className=""}},document.addEventListener("contextUpdate",this.onCtxUpdate.bind(this)),this.render=function(e){var t=document.createElement("div");return t.className="fullwidth-template",t.id="fullTemp",t.style.position="absolute",t.style.top="0",t.style.zIndex="99999",t.style.backgroundColor="rgba(255, 255, 255, 0.5)",this.activeSection=e,this.items.forEach(function(n){n instanceof s||n.name===e?(t.appendChild(n.render()),t.lastElementChild.style.display="block"):(t.appendChild(n.render()),t.lastElementChild.style.display="none")}),t},this.changeSection=function(e,t){var n=this;this.activeDevice+this.activeSection!==t+e&&(this.items.forEach(function(r,i){if(e==="AddDevice")r.name===e&&(document.querySelector("#fullTemp").children[i].style.display="block"),r.name===n.activeDevice+n.activeSection&&(document.querySelector("#fullTemp").children[i].style.display="none");else if(e!=="AddDevice"&&t!==undefined){if(r.name===t+e){document.querySelector("#fullTemp").children[i].style.display="block";var s=document.querySelector("#fullTemp").children[i].children[0].children;for(var o=0;o<s.length;o++)s[o].id===t&&(s[o].className="col-md-"+12/s.length+" col-xs-"+12/s.length+" boxdevice active"),s[o].id===n.activeDevice&&(s[o].className="col-md-"+12/s.length+" col-xs-"+12/s.length+" boxdevice")}r.name===n.activeDevice+n.activeSection&&(document.querySelector("#fullTemp").children[i].style.display="none")}else{if(r.name===n.selfID+e){document.querySelector("#fullTemp").children[i].style.display="block";var s=document.querySelector("#fullTemp").children[i].children[0].children;for(var o=0;o<s.length;o++)s[o].id===n.selfID&&(s[o].className="col-md-"+12/s.length+" col-xs-"+12/s.length+" boxdevice active"),s[o].id===n.activeDevice&&n.activeDevice!==n.selfID&&(s[o].className="col-md-"+12/s.length+" col-xs-"+12/s.length+" boxdevice")}(r.name===n.activeDevice+n.activeSection||r.name==="AddDevice")&&n.activeSection!==e&&(document.querySelector("#fullTemp").children[i].style.display="none")}}),this.activeSection!==""&&this.activeDevice!==""&&(document.querySelector("#"+this.activeSection).className=""),this.activeSection==="AddDevice"&&(document.querySelector("#"+this.activeSection).className="options"),e!==""&&(document.querySelector("#"+e).className="active"),t!==undefined?(this.activeSection=e,this.activeDevice=t):(this.activeSection=e,this.activeDevice=this.selfID),this.activeSection===""?document.querySelector("#fullTemp").style.width="auto":document.querySelector("#fullTemp").style.width="100%")},this.changeLayout=function(e,t){var n=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,i=document.querySelector("#fullTemp").children;for(var s=2;s<r;s++)if(n[s].name===e+"layouts"){var o=n[s].items[1].layouts;for(var u=0;u<o.length;u++)o[u].name===t?i[s].querySelector("#"+t+"Layout").className="active":i[s].querySelector("#"+o[u].name+"Layout").className=""}},this.changeHashtag=function(e,t){var n=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,i=document.querySelector("#fullTemp").children;for(var s=2;s<r;s++)n[s].name===e+"twitter"&&(i[s].querySelector("#htSelect").value=t)},this.changeTableYear=function(e,t){var n=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,i=document.querySelector("#fullTemp").children;for(var s=2;s<r;s++)n[s].name===e+"graphics"&&(t===2015?(i[s].querySelector("#presentLI").className="active",i[s].querySelector("#pastLI").className="",i[s].querySelector("#presentPanel").className="col-md-12 fade in tab-pane active",i[s].querySelector("#pastPanel").className="col-md-12 fade in tab-pane "):t===2011&&(i[s].querySelector("#presentLI").className="",i[s].querySelector("#pastLI").className="active",i[s].querySelector("#presentPanel").className="col-md-12 fade in tab-pane ",i[s].querySelector("#pastPanel").className="col-md-12 fade in tab-pane active"))},this.changeTablePlace=function(e,t){var n=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,i=document.querySelector("#fullTemp").children;for(var s=2;s<r;s++)if(n[s].name===e+"graphics"){var o=i[s].querySelectorAll(".pastilla_ciudad");for(var u=0;u<o.length;u++)o[u].id===t?o[u].className="col-md-12 pastilla_ciudad active":o[u].className="col-md-12 pastilla_ciudad"}},this.changeSoundSwVal=function(e,t,n){var r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,i=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,s=document.querySelector("#fullTemp").children;for(var o=2;o<i;o++)r[o].name===e+"cameras"&&s[o].querySelector("#soundCheck"+t).setAttribute("val",n)},this.changeViewSwVal=function(e,t,n){var r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,i=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,s=document.querySelector("#fullTemp").children;for(var o=2;o<i;o++)r[o].name.indexOf(e)===0&&s[o].querySelector("#viewCheck"+t)!==null&&s[o].querySelector("#viewCheck"+t).setAttribute("val",n)},this.changeRadioViewImgVal=function(e,t,n){var r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items,i=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.items.length,s=document.querySelector("#fullTemp").children;for(var o=2;o<i;o++)r[o].name.indexOf(e)===0&&s[o].querySelector("#radioViewBut"+t)!==null&&(n===!1?(s[o].querySelector("#radioViewBut"+t).setAttribute("src","../resources/configPanel/img/radio/Radio_btn_play.png"),s[o].querySelector("#radioEq"+t).setAttribute("src","../resources/configPanel/img/radio/Radio-animacion-off-estatico.png")):n===!0&&(s[o].querySelector("#radioViewBut"+t).setAttribute("src","../resources/configPanel/img/radio/Radio_btn_pausa.png"),s[o].querySelector("#radioEq"+t).setAttribute("src","../resources/configPanel/img/radio/animacion-ecualizador_transp.gif")))},this.hide=function(){document.querySelector("#fullTemp").style.display="none",document.querySelector("#menuButtonP").style.display="none",this.showing=!1,this.activeSection===""?document.querySelector("#fullTemp").style.width="auto":document.querySelector("#fullTemp").style.width="100%"},this.show=function(){document.querySelector("#fullTemp").style.display="block",document.querySelector("#menuButtonP").style.display="",this.showing=!0,this.activeSection===""?document.querySelector("#fullTemp").style.width="auto":document.querySelector("#fullTemp").style.width="100%"},this.controlPanel()},i=function(){this.text="",this.icon="",this.aSection="",this.setText=function(e){this.text=e},this.setIcon=function(e){this.icon=e},this.setSection=function(e){this.aSection=e},this.render=function(){var e=document.createElement("li");e.addEventListener("click",this.onclick.bind(this)),e.id=this.aSection,this.aSection==="AddDevice"&&(e.className="options");var t=document.createElement("a"),n=document.createElement("span"),r=document.createElement("i");r.className=this.icon,n.appendChild(r);var i=document.createElement("strong");return i.innerHTML=this.text,n.appendChild(i),t.appendChild(n),e.appendChild(t),e},this.onclick=function(e){console.log(this.aSection),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSection(this.aSection,undefined)}},s=function(){this.items=[],this.addItem=function(e){this.items.push(e)},this.render=function(){var e=document.createElement("div");e.className="col-md-2 col-sm-2 menu-sidebar fixed";var t=new o,n=t.render();e.appendChild(n);var r=document.createElement("div");r.className="sidebar-menu";var i=document.createElement("ul"),s=new u;i.appendChild(s.render()),this.items.forEach(function(e){i.appendChild(e.render())});var f=new a;return i.appendChild(f.render()),r.appendChild(i),e.appendChild(r),e}},o=function(){this.num="",this.setNum=function(e){this.num=e},this.render=function(){var e=document.createElement("div");e.className="mydevice";var t=document.createElement("p");return t.innerHTML="device <strong id='devNum'>"+this.num+"</strong>",e.appendChild(t),e}},u=function(){this.render=function(){var e=document.createElement("li");e.className="options";var t=document.createElement("a"),n=document.createElement("span"),r=document.createElement("i");r.className="zmdi zmdi-chevron-left",n.appendChild(r);var i=document.createElement("strong");return i.innerHTML="Hide",n.appendChild(i),t.appendChild(n),e.appendChild(t),e.onclick=function(e){mediascape.AdaptationToolkit.uiComponents.ctrlPanel.hide()},e}},a=function(){this.render=function(){var e=document.createElement("li");e.className="vicomtechlogo-li";var t=document.createElement("img");t.src="../resources/configPanel/img/mediascape_logo.png";var n=document.createElement("img");return n.className="vicomtechlogo",n.src="../resources/configPanel/img/LogoVicomtech.png",e.appendChild(t),e.appendChild(n),e.onclick=function(e){mediascape.AdaptationToolkit.uiComponents.toggleFullScreen()},e}},f=function(){this.items=[],this.name="",this.setName=function(e){this.name=e},this.addItem=function(e){this.items.push(e)},this.render=function(){var e=document.createElement("div");return this.name==="AddDevice"?e.className="col-md-10 col-md-offset-2 template-content section-add-device":e.className="col-md-10 col-md-offset-2 template-content",this.items.forEach(function(t){e.appendChild(t.render())}),e.style.display="none",e}},l=function(){this.icon="",this.setIcon=function(e){this.icon=e},this.setID=function(e){this.id=e},this.render=function(){var e=document.createElement("div");e.addEventListener("click",this.onclick.bind(this));var t=document.createElement("a");t.href="#";var n=document.createElement("img");return n.src="../resources/configPanel/img/devices/"+this.icon,t.appendChild(n),e.appendChild(t),e},this.onclick=function(e){mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSection(mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeSection,this.id)}},c=function(){this.devices=[],this.addDevice=function(e){this.devices.push(e)},this.removeDevice=function(e){for(var t=0;t<this.devices.length;t++)this.devices[t].id===e&&this.devices.splice(t,1)},this.render=function(){var e=document.createElement("div");e.className="all-boxdevices";var t=this;return this.devices.forEach(function(n,r){var i=document.createElement("div");i.id=n.id,i.className="col-md-"+12/t.devices.length+" col-xs-"+12/t.devices.length+" boxdevice",i.appendChild(n.render()),e.appendChild(i)}),e}},h=function(){this.image="",this.name="",this.setImage=function(e){this.image=e},this.setName=function(e){this.name=e},this.render=function(e){var t=document.createElement("div");t.className="col-md-6 boxlayout";var n=document.createElement("a");n.href="#",n.id=this.name+"Layout",this.name===e&&(n.className="active");var r=document.createElement("img");return r.src=this.image,r.addEventListener("click",this.onclick.bind(this)),n.appendChild(r),t.appendChild(n),t},this.onclick=function(e){var t=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice;mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.changeAgentlayout(t,this.name),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeLayout(t,this.name)}},p=function(){this.layouts=[],this.activeLayout="",this.addLayout=function(e){this.layouts.push(e)},this.setActiveLayout=function(e){this.activeLayout=e},this.render=function(){var e=document.createElement("div");e.className="template-content-center",e.id="layoutCont";var t=document.createElement("div");t.className="col-md-12 layout-columns";var n=this;return this.layouts.forEach(function(e){t.appendChild(e.render(n.activeLayout))}),e.appendChild(t),e}},d=function(e){this.render=function(){var t=document.createElement("div");t.className="template-content-center add-device-content";var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=document.createElement("div");r.className="qr-code-content",r.id="qr-code-content",n<767?leftMargin=35*n/100:leftMargin=25*n/100;var i=document.createElement("div");i.id="animated-example",i.className="animated bounceInUp qr-code-toy";var s=document.createElement("img");return s.src="../resources/configPanel/img/QR-manos_grande.png",i.appendChild(s),t.appendChild(r),t.appendChild(i),mediascape.association.doAssociation("qr","qr-code-content",e,!0,30*n/100,30*n/100,leftMargin,50),t}},v=function(){this.setImage=function(e){this.image=e},this.setID=function(e){this.id=e},this.setName=function(e){this.name=e},this.setViewStatus=function(e){this.viewStatus=e},this.setSoundStatus=function(e){this.soundStatus=e},this.render=function(){var e=document.createElement("div");e.className="col-md-12 camara";var t=document.createElement("div");t.className="col-md-6 col-sm-6 camara-logo-partidos";var n=document.createElement("img");n.src=this.image,t.appendChild(n);var r=document.createElement("div");r.className="col-md-6 col-sm-6 camara-all-switch";var i=document.createElement("div");i.className="col-md-12";var s=document.createElement("div");s.className="col-md-3 col-sm-3 iconos-camara";var o=document.createElement("i");o.className="zmdi zmdi-videocam zmdi-hc-2x",s.appendChild(o);var u=document.createElement("paper-switch");u.id="viewCheck"+this.id,u.className="col-md-8 col-sm-8 check-switch-camara",u.setAttribute("val",this.viewStatus),u.addEventListener("click",this.viewclick.bind(this),!0),i.appendChild(s),i.appendChild(u);var a=document.createElement("div");a.className="col-md-12";var f=document.createElement("div");f.className="col-md-3 col-sm-3 iconos-camara";var l=document.createElement("i");l.className="zmdi zmdi-volume-up zmdi-hc-2x",f.appendChild(l);var c=document.createElement("paper-switch");return c.id="soundCheck"+this.id,c.className="col-md-8 col-sm-8 check-switch-vol",c.setAttribute("val",this.soundStatus),c.addEventListener("click",this.soundclick.bind(this),!0),a.appendChild(f),a.appendChild(c),r.appendChild(i),r.appendChild(a),e.appendChild(t),e.appendChild(r),e},this.viewclick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("viewClick"),a[0].show===!0?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"hide"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!1),setTimeout(function(){a[0].customCmd.lastIndexOf("mutePlayer")===-1&&a[0].customCmd.lastIndexOf("soundPlayer")===-1?document.querySelector("#"+u.name).ismuted==="false"&&(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,u.id,"offSound"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,u.id,!1)):a[0].customCmd.lastIndexOf("mutePlayer")<a[0].customCmd.lastIndexOf("soundPlayer")&&(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,u.id,"offSound"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,u.id,!1))},1e3)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"show"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!0),setTimeout(function(){a[0].customCmd.lastIndexOf("offSound")===-1&&a[0].customCmd.lastIndexOf("mutePlayer")===-1&&a[0].customCmd.lastIndexOf("soundPlayer")===-1?document.querySelector("#"+u.name).ismuted==="false"&&(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,u.id,"soundPlayer"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,u.id,!0)):a[0].customCmd.lastIndexOf("offSound")>a[0].customCmd.lastIndexOf("mutePlayer")?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,u.id,"onSound"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,u.id,!0)):a[0].customCmd.lastIndexOf("offSound")!==-1&&a[0].customCmd.lastIndexOf("mutePlayer")===-1&&document.querySelector("#"+u.name).ismuted!=="false"?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,u.id,"onSound"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,u.id,!0)):a[0].customCmd.lastIndexOf("offSound")===-1&&a[0].customCmd.lastIndexOf("mutePlayer")===-1&&a[0].customCmd.lastIndexOf("soundPlayer")!==-1&&(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,u.id,"onSound"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,u.id,!0))},1e3))},this.soundclick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("soundClick"),a[0].show===!0&&(a[0].customCmd.lastIndexOf("mutePlayer")===-1&&a[0].customCmd.lastIndexOf("soundPlayer")===-1?document.querySelector("#"+u.name).ismuted==="false"?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"mutePlayer"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"soundPlayer"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,this.id,!0)):a[0].customCmd.lastIndexOf("mutePlayer")<a[0].customCmd.lastIndexOf("soundPlayer")?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"mutePlayer"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"soundPlayer"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeSoundSwVal(r,this.id,!0)))}},m=function(){this.cameras=[],this.addCamera=function(e){this.cameras.push(e)},this.render=function(){var e=document.createElement("div");e.className="template-content-center ",e.id="camerasCont";var t=document.createElement("div");t.className="col-md-12 layout-columns";var n=document.createElement("div");n.className="col-md-6";var r=document.createElement("div");r.className="contenido-camaras content-camara";for(var i=0;i<Math.round(this.cameras.length/2);i++)r.appendChild(this.cameras[i].render());n.appendChild(r);var s=document.createElement("div");s.className="col-md-6";var o=document.createElement("div");o.className="contenido-camaras content-camara";for(var i=Math.round(this.cameras.length/2);i<this.cameras.length;i++)o.appendChild(this.cameras[i].render());return s.appendChild(o),t.appendChild(n),t.appendChild(s),e.appendChild(t),e},this.setCamsViewStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this;for(var o=0;o<this.cameras.length;o++){var u=this.cameras[o].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===u)return e}),b[0].show===!0?this.cameras[o].setViewStatus(!0):this.cameras[o].setViewStatus(!1)}},this.setCamsSoundStatus=function(e){console.log("DENTRO");var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this;for(var o=0;o<this.cameras.length;o++){var u=this.cameras[o].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===u)return e}),b[0].customCmd.lastIndexOf("mutePlayer")===-1&&b[0].customCmd.lastIndexOf("soundPlayer")===-1&&b[0].customCmd.lastIndexOf("offSound")===-1&&b[0].customCmd.lastIndexOf("onSound")===-1?document.querySelector("#"+this.cameras[o].name).ismuted==="false"&&b[0].show===!0?this.cameras[o].setSoundStatus(!0):this.cameras[o].setSoundStatus(!1):b[0].customCmd.lastIndexOf("offSound")===-1&&b[0].customCmd.lastIndexOf("onSound")===-1?b[0].customCmd.lastIndexOf("mutePlayer")<b[0].customCmd.lastIndexOf("soundPlayer")&&b[0].customCmd.lastIndexOf("mutePlayer")!==-1&&b[0].customCmd.lastIndexOf("soundPlayer")!==-1&&b[0].show===!0?this.cameras[o].setSoundStatus(!0):b[0].customCmd.lastIndexOf("mutePlayer")<b[0].customCmd.lastIndexOf("soundPlayer")&&b[0].customCmd.lastIndexOf("mutePlayer")!==-1&&b[0].customCmd.lastIndexOf("soundPlayer")!==-1&&b[0].show===!1?this.cameras[o].setSoundStatus(!1):b[0].customCmd.lastIndexOf("mutePlayer")===-1&&b[0].customCmd.lastIndexOf("soundPlayer")!==-1&&b[0].show===!0?this.cameras[o].setSoundStatus(!0):b[0].customCmd.lastIndexOf("mutePlayer")===-1&&b[0].customCmd.lastIndexOf("soundPlayer")!==-1&&b[0].show===!1?this.cameras[o].setSoundStatus(!1):b[0].customCmd.lastIndexOf("mutePlayer")!==-1&&b[0].customCmd.lastIndexOf("soundPlayer")===-1?this.cameras[o].setSoundStatus(!1):b[0].show===!0&&this.cameras[o].setSoundStatus(!0):b[0].customCmd.lastIndexOf("offSound")>b[0].customCmd.lastIndexOf("mutePlayer")?this.cameras[o].setSoundStatus(!1):b[0].customCmd.lastIndexOf("offSound")!==-1&&b[0].customCmd.lastIndexOf("mutePlayer")===-1&&document.querySelector("#"+s.name).ismuted!=="false"&&this.cameras[o].setSoundStatus(!1)}}},g=function(){this.setID=function(e){this.id=e},this.setViewStatus=function(e){this.viewStatus=e},this.setHTStatus=function(e){this.HTStatus=e},this.render=function(){var e=document.createElement("div");e.className="col-md-10 twitter-hashtag";var t=document.createElement("div");t.className="col-md-3 col-xs-3 seleccionImg";var n=document.createElement("img");n.src="../resources/configPanel/img/hastag_consombra.png",t.appendChild(n);var r=document.createElement("div");r.className="col-md-6 col-xs-9 seleccion-hashtag";var i=document.createElement("p");i.className="titulo-seccion",i.innerHTML="Hashtag selection";var s=document.createElement("p");s.innerHTML="Select the hashtag to show tweets about it";var o=document.createElement("select");o.className="form-control select-hashtag",o.addEventListener("change",this.sendHTclick.bind(this),!0),o.id="htSelect";var u=["","Elecciones"," elecciones"," Hauteskundeak"," hauteskundeak"," eleccion"," #elecciones24m"," #24m"," #L6elecciones","#eleccionesA3"," #eleccion2015"," hauteskundeak"," elecciones"," @hauteskundeak"," #hauteskundeak2015"," #Elecciones2015"," #hauteskundeak15"," #Elecciones15"," #M24Donostia"," #eleccionesVG"," @Navarra2015"," #Navarra24M"," #24M"," #M24Donostia"," #EleccionesNA15"," #Navarra24M"," @PPopular"," @PSOE"," @vox_es"," @UPyD"," @ahorapodemos"," @PartidoPACMA"," @Equo"," @CiudadanosCs"," @webpcpe"," @RecortesCero"," @phumanista_esp"," #UPyD"," #PSOE"," #PP"," #BILDU"," #Podemos"," #HagamosHistoria24M"," #VOX"," #AhoraVOX"," #Ciudadanos"," #UPN"," @PPvasco"," @UPyDEuskadi"," @Cs_Euskadi"," @IrabaziEuskadi"," @PES_PSE"," @EzkerBatua"," @ealkartasuna"," @plaZFeminista"," @PodemosEuskadi_"," @ehbildu"," @IkuneICP"," @eajpnv"," @PacmaEuskadi"," @UdalBerri"," @GastoriaVG"," @hegasum"," @IUEzker"," @upn_navarra"," @libertadnavarra"," @SainNavarra"," @RCN_NOK"," Kike Fernndez"," @KikeFdzdePinedo"," @arabaehbildu"," @ehbilduaraba"," Miren Larrion"," @miren_larrion"," @ehbildugasteiz"," @EA_Araba"," Ramiro Gonzlez"," @ramirogonza"," @eajpnvaraba"," @pnvjuntasaraba"," Gorka Urtaran"," @pnvgasteiz"," @gorka__urtaran"," Cristina Gonzlez"," @CristinaGnlz"," @psealava"," @PSEporAlava"," Peio Lpez De Munain"," @porvitoria"," @peiomunain_xvg"," Javier De Andrs"," @JavierdAndres"," @PP_Juntas_Alava"," Javier Maroto"," @JavierMaroto"," Koldo Martin"," @KoldoPodemos"," @PodemosVitoria"," Ana Unibaso"," @IkuneICP"," Niko Gutirrez"," @Nik0Gutierrez"," Ignacio Oate"," @Ignacionate"," Miguel Angel Carrera"," @MikelK10"," Rodrigo Zamora"," @Rodri_Zamora_Al"," Jos Daman Garcia-Moreno"," @josedamian1980"," #IrabaziAlaba"," @iu_araba"," @EquoAraba"," scar Fernndez"," @oskar_fm"," @IrabaziGasteiz"," @EQUO_VG"," @EBgasteiz"," Esa Martn"," @esaumartin"," @vox_alava"," #AhoraVOX"," Adolfo Gago"," @toohope"," Vanesa Costa"," Nerea Icuza"," @icuza"," Esther Saez de Argandoa"," @unicaire"," @GastoriaVG"," Jorge Hinojal"," @JorgeHiSo"," @shgjorge"," @hegasum"," Diana Plaza"," @RecortesCero"," Xabier Olano"," @Xabier_Olano_"," @ehbildugipuzkoa"," @alternatiba"," @EA_Gipuzkoa"," #gipuzkoarrokgaraile"," Juankar Izagirre"," @AlkateSS"," @HiriBizia"," @SortuDonostia"," @EA_Donostia"," #BILDU"," @ehbildu"," Markel Olano"," @eajpnvgipuzkoa"," @markelolano"," @markelolano2015"," Eneko Goia"," @enekogoia2015"," @DonostiaPNV"," @pnvdonostia"," @eajpnv"," Denis Itxaso"," @DenisItxaso"," @PSEGIPUZKOA"," Ernesto Gasco"," @gasco63"," Juan Carlos Cano"," @PPGipuzkoa"," @CanoAristoy"," Miren Albistur"," @MirenAlbistur"," @PPdonostiarras"," Juantxo Iturria"," @juantxo_iturria"," #BadaGaraia"," #GipuzkoaAldatu"," @podemosDonostia"," Amaia Martn"," @sybillacumas"," @Irabazidonostia"," #Podemos"," #HagamosHistoria24M"," Arantza Gonzlez"," @arantzagg"," @IRABAZIGipuzkoa"," @Irabazidonostia"," @IUDonostia"," @eQuoGipuzkoa"," Manuel Aguirre"," @Mccguirre"," Arantza Aranzabal"," @aranaranzabal"," #donostiaUPyD"," @votaUPyD"," Jonathan Calvo"," @joncalrue"," Nicols de Miguel"," @NicodeMig"," Josebe Iturrioz"," @JosebeIturrioz"," #AldaketaGorpuzteko"," @plaZFeminista"," Saioa Escolar"," @Pacma_Gipuzkoa"," @PacmaGipuzkoa"," @PacmaEuskadi"," Josu Unanue"," @unanuejosu"," @ehbildubizkaia"," #bizkaitarrokgaraile"," Aitziber Ibarbarriaga"," @AitziIbaiba"," @ehbildubilbo"," @SortuBilbo"," #BILDU"," @EA_Bizkaia"," Unai Rementeria"," @urementeria"," Juan Mara Aburto"," @juanmariaburto"," @AzalgorriBilbao"," @eajpnvbilbao @eajpnv"," Carlos Totorica"," @PSEBizkaia"," #CarlosTotorica"," Alfonso Gil"," @AlfonsoGil"," @PSEBilbao"," @GroupPES_Bilbao"," Javier Ruiz"," @JavierRuiz_PP"," @PPBizkaia"," Luis Eguiluz"," @LuisEguiluz_pp"," @PPdeBilbao"," Asun Merino"," @AsunPodemos"," @PodemosBizkaia"," Francisco Samir Lahdou"," @PodemosBilbao"," @PodemosBilbaoE"," Xabier Jimnez"," @Eljoventopo"," #IrabaziBizkaia"," @BilboIrabaziz"," @IUBilbao"," @EquoBizkaia"," Roque Adrada"," @RoqueAdrada"," Javier Gabilondo"," @JavierGabilondo"," Santiago Sinz"," @Sainz_Robles"," @Ciudadanos"," David Pasarn"," @davidpasarin"," Patricia Gmez"," @vox_vizcaya"," Urko de Azumendi"," @urkobilbao2015"," @vox_bilbao"," Carmen Muoz"," @CarmenMunozL"," #BilbaoEnComun"," @UdalBerri"," @Equo"," @iunida"," @ALTER_info"," JOSE MANUEL VZQUEZ RIOS"," @phumanista_esp"," Kepa Lozano"," @KEPALOZANO"," Goizane Rodrguez"," @JusticiaPAT"," Joseba Arroita"," @IkuneICP"," Sergio Saenz"," @webpcpe"," #24mvotapcpe"," Uxue Barkos"," @uxuebarkos"," Itziar Gomez"," @itziargomez"," @GeroaBaiIrunea"," @geroabai"," #orainbai"," @EAJPNVNafarroa"," Javier Esparza"," @JavierJesparza"," @_navarrisimo"," #Navarrisimo"," #adelantenavarros"," Enrique Maya"," #Navarrisimo"," #UPN"," @upn_navarra"," Ana Beltran"," @abeltran_ana"," @PPNavarra"," Pablo Zalba"," @PabloZalba"," #Pamplona"," #Navarra"," @PPNavarra"," #DespiertaPamplona"," Mara Chivite"," @mavichina"," @PSNPSOE"," Maite Esporrin"," @maiteesporrin"," @PamplonaPSN"," @psnpsoe"," #VotaPSOE"," #VotaPSNPSOE"," #EsporrinAlcaldesa"," #ActivemosPamplona"," Adolfo Araiz"," @AdolfoAraiz"," @EHbilduNafarroa"," #Nafarrokgaraile"," #nafarrokgaraile"," Joseba Asiron"," @josebaasiron"," @EAnafarroa"," Laura Prez Ruano"," @laperua"," @Podemosnavarra"," #EsAhora"," #CambiaNavarra"," Diego Paos"," @diegopanos"," #CambiaNavarra"," @Cs_Navarra_"," Iaki Arana"," #NavarraPideCambio"," Miguel Zarranz"," @miguelzarranz"," @UPyD_Navarra"," Damaso Crespo"," @upyd_navarra"," #LIBRES"," Jose Miguel Nuin"," @josemiguelnuin"," @IzdaNavarra @EzkerraN"," Mikel Iriarte"," @libertadnavarra"," David Marzo"," @davidMarzo"," @EquoNavarfarroa"," #LaAlternativaVerde"," #AukeraVerdea"," @EquoNavarra"," Maria Yazmina Larumbe"," @PacmaNavarra"," Daniel Fernndez"," #SuVozTuVoto"," Luis Miguel Latasa"," @SainNavarra"," @PartidoSAIn"," Samuel Valderrey"," @SamuelValderrey"," #VOTASAIn"," Ramon Morcillo"," @RCN_NOK"," #marihuana"," Edurne Eguino"," @SoyEdurneNaiz"," @EdurneEguino"," @IUPamplona"];for(var a=0;a<u.length;a++){var f=document.createElement("option");f.innerHTML=u[a],f.value=u[a],f.addEventListener("click",this.sendHTclick.bind(this),!0),o.appendChild(f)}o.value=this.HTStatus,r.appendChild(i),r.appendChild(s),r.appendChild(o);var l=document.createElement("paper-switch");return l.id="viewCheck"+this.id,l.className="col-md-3 check-switch-twitter",l.setAttribute("val",this.viewStatus),l.addEventListener("click",this.viewClick.bind(this),!0),e.appendChild(t),e.appendChild(r),e.appendChild(l),e},this.sendHTclick=function(e){var t=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice;mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(t,this.id,e.srcElement.value),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeHashtag(t,e.srcElement.value)},this.viewClick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("viewClick"),a[0].show===!0?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"hide"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"show"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!0))}},y=function(){this.setID=function(e){this.id=e},this.setViewStatus=function(e){this.viewStatus=e},this.render=function(){var e=document.createElement("div");e.className="col-md-10 twitter-topic";var t=document.createElement("div");t.className="col-md-3 col-xs-3 seleccionImg";var n=document.createElement("img");n.src="../resources/configPanel/img/twitter_consombra.png",t.appendChild(n);var r=document.createElement("div");r.className="col-md-6 col-xs-9 seleccion-hashtag";var i=document.createElement("p");i.className="titulo-seccion",i.innerHTML="Map and trending topic";var s=document.createElement("p");s.innerHTML="Here you can activate a map showing the trending party of each region",r.appendChild(i),r.appendChild(s);var o=document.createElement("paper-switch");return o.id="viewCheck"+this.id,o.className="col-md-3 check-switch-twitter",o.setAttribute("val",this.viewStatus),o.addEventListener("click",this.viewClick.bind(this),!0),e.appendChild(t),e.appendChild(r),e.appendChild(o),e},this.viewClick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("viewClick"),a[0].show===!0?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"hide"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"show"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!0))}},w=function(){this.viewerComp=[],this.mapComp=[],this.addViewerComp=function(e){this.viewerComp.push(e)},this.addMapComp=function(e){this.mapComp.push(e)},this.render=function(){var e=document.createElement("div");e.className="template-content-center",e.id="twCont";var t=document.createElement("div");return t.className="col-md-12 layout-columns twitter-selector-container",t.appendChild(this.viewerComp[0].render()),t.appendChild(this.mapComp[0].render()),e.appendChild(t),e},this.setViewerViewStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this,o=this.viewerComp[0].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===o)return e}),b[0].show===!0?this.viewerComp[0].setViewStatus(!0):this.viewerComp[0].setViewStatus(!1)},this.setViewerHTStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=["","Elecciones"," elecciones"," Hauteskundeak"," hauteskundeak"," eleccion"," #elecciones24m"," #24m"," #L6elecciones","#eleccionesA3"," #eleccion2015"," hauteskundeak"," elecciones"," @hauteskundeak"," #hauteskundeak2015"," #Elecciones2015"," #hauteskundeak15"," #Elecciones15"," #M24Donostia"," #eleccionesVG"," @Navarra2015"," #Navarra24M"," #24M"," #M24Donostia"," #EleccionesNA15"," #Navarra24M"," @PPopular"," @PSOE"," @vox_es"," @UPyD"," @ahorapodemos"," @PartidoPACMA"," @Equo"," @CiudadanosCs"," @webpcpe"," @RecortesCero"," @phumanista_esp"," #UPyD"," #PSOE"," #PP"," #BILDU"," #Podemos"," #HagamosHistoria24M"," #VOX"," #AhoraVOX"," #Ciudadanos"," #UPN"," @PPvasco"," @UPyDEuskadi"," @Cs_Euskadi"," @IrabaziEuskadi"," @PES_PSE"," @EzkerBatua"," @ealkartasuna"," @plaZFeminista"," @PodemosEuskadi_"," @ehbildu"," @IkuneICP"," @eajpnv"," @PacmaEuskadi"," @UdalBerri"," @GastoriaVG"," @hegasum"," @IUEzker"," @upn_navarra"," @libertadnavarra"," @SainNavarra"," @RCN_NOK"," Kike Fernndez"," @KikeFdzdePinedo"," @arabaehbildu"," @ehbilduaraba"," Miren Larrion"," @miren_larrion"," @ehbildugasteiz"," @EA_Araba"," Ramiro Gonzlez"," @ramirogonza"," @eajpnvaraba"," @pnvjuntasaraba"," Gorka Urtaran"," @pnvgasteiz"," @gorka__urtaran"," Cristina Gonzlez"," @CristinaGnlz"," @psealava"," @PSEporAlava"," Peio Lpez De Munain"," @porvitoria"," @peiomunain_xvg"," Javier De Andrs"," @JavierdAndres"," @PP_Juntas_Alava"," Javier Maroto"," @JavierMaroto"," Koldo Martin"," @KoldoPodemos"," @PodemosVitoria"," Ana Unibaso"," @IkuneICP"," Niko Gutirrez"," @Nik0Gutierrez"," Ignacio Oate"," @Ignacionate"," Miguel Angel Carrera"," @MikelK10"," Rodrigo Zamora"," @Rodri_Zamora_Al"," Jos Daman Garcia-Moreno"," @josedamian1980"," #IrabaziAlaba"," @iu_araba"," @EquoAraba"," scar Fernndez"," @oskar_fm"," @IrabaziGasteiz"," @EQUO_VG"," @EBgasteiz"," Esa Martn"," @esaumartin"," @vox_alava"," #AhoraVOX"," Adolfo Gago"," @toohope"," Vanesa Costa"," Nerea Icuza"," @icuza"," Esther Saez de Argandoa"," @unicaire"," @GastoriaVG"," Jorge Hinojal"," @JorgeHiSo"," @shgjorge"," @hegasum"," Diana Plaza"," @RecortesCero"," Xabier Olano"," @Xabier_Olano_"," @ehbildugipuzkoa"," @alternatiba"," @EA_Gipuzkoa"," #gipuzkoarrokgaraile"," Juankar Izagirre"," @AlkateSS"," @HiriBizia"," @SortuDonostia"," @EA_Donostia"," #BILDU"," @ehbildu"," Markel Olano"," @eajpnvgipuzkoa"," @markelolano"," @markelolano2015"," Eneko Goia"," @enekogoia2015"," @DonostiaPNV"," @pnvdonostia"," @eajpnv"," Denis Itxaso"," @DenisItxaso"," @PSEGIPUZKOA"," Ernesto Gasco"," @gasco63"," Juan Carlos Cano"," @PPGipuzkoa"," @CanoAristoy"," Miren Albistur"," @MirenAlbistur"," @PPdonostiarras"," Juantxo Iturria"," @juantxo_iturria"," #BadaGaraia"," #GipuzkoaAldatu"," @podemosDonostia"," Amaia Martn"," @sybillacumas"," @Irabazidonostia"," #Podemos"," #HagamosHistoria24M"," Arantza Gonzlez"," @arantzagg"," @IRABAZIGipuzkoa"," @Irabazidonostia"," @IUDonostia"," @eQuoGipuzkoa"," Manuel Aguirre"," @Mccguirre"," Arantza Aranzabal"," @aranaranzabal"," #donostiaUPyD"," @votaUPyD"," Jonathan Calvo"," @joncalrue"," Nicols de Miguel"," @NicodeMig"," Josebe Iturrioz"," @JosebeIturrioz"," #AldaketaGorpuzteko"," @plaZFeminista"," Saioa Escolar"," @Pacma_Gipuzkoa"," @PacmaGipuzkoa"," @PacmaEuskadi"," Josu Unanue"," @unanuejosu"," @ehbildubizkaia"," #bizkaitarrokgaraile"," Aitziber Ibarbarriaga"," @AitziIbaiba"," @ehbildubilbo"," @SortuBilbo"," #BILDU"," @EA_Bizkaia"," Unai Rementeria"," @urementeria"," Juan Mara Aburto"," @juanmariaburto"," @AzalgorriBilbao"," @eajpnvbilbao @eajpnv"," Carlos Totorica"," @PSEBizkaia"," #CarlosTotorica"," Alfonso Gil"," @AlfonsoGil"," @PSEBilbao"," @GroupPES_Bilbao"," Javier Ruiz"," @JavierRuiz_PP"," @PPBizkaia"," Luis Eguiluz"," @LuisEguiluz_pp"," @PPdeBilbao"," Asun Merino"," @AsunPodemos"," @PodemosBizkaia"," Francisco Samir Lahdou"," @PodemosBilbao"," @PodemosBilbaoE"," Xabier Jimnez"," @Eljoventopo"," #IrabaziBizkaia"," @BilboIrabaziz"," @IUBilbao"," @EquoBizkaia"," Roque Adrada"," @RoqueAdrada"," Javier Gabilondo"," @JavierGabilondo"," Santiago Sinz"," @Sainz_Robles"," @Ciudadanos"," David Pasarn"," @davidpasarin"," Patricia Gmez"," @vox_vizcaya"," Urko de Azumendi"," @urkobilbao2015"," @vox_bilbao"," Carmen Muoz"," @CarmenMunozL"," #BilbaoEnComun"," @UdalBerri"," @Equo"," @iunida"," @ALTER_info"," JOSE MANUEL VZQUEZ RIOS"," @phumanista_esp"," Kepa Lozano"," @KEPALOZANO"," Goizane Rodrguez"," @JusticiaPAT"," Joseba Arroita"," @IkuneICP"," Sergio Saenz"," @webpcpe"," #24mvotapcpe"," Uxue Barkos"," @uxuebarkos"," Itziar Gomez"," @itziargomez"," @GeroaBaiIrunea"," @geroabai"," #orainbai"," @EAJPNVNafarroa"," Javier Esparza"," @JavierJesparza"," @_navarrisimo"," #Navarrisimo"," #adelantenavarros"," Enrique Maya"," #Navarrisimo"," #UPN"," @upn_navarra"," Ana Beltran"," @abeltran_ana"," @PPNavarra"," Pablo Zalba"," @PabloZalba"," #Pamplona"," #Navarra"," @PPNavarra"," #DespiertaPamplona"," Mara Chivite"," @mavichina"," @PSNPSOE"," Maite Esporrin"," @maiteesporrin"," @PamplonaPSN"," @psnpsoe"," #VotaPSOE"," #VotaPSNPSOE"," #EsporrinAlcaldesa"," #ActivemosPamplona"," Adolfo Araiz"," @AdolfoAraiz"," @EHbilduNafarroa"," #Nafarrokgaraile"," #nafarrokgaraile"," Joseba Asiron"," @josebaasiron"," @EAnafarroa"," Laura Prez Ruano"," @laperua"," @Podemosnavarra"," #EsAhora"," #CambiaNavarra"," Diego Paos"," @diegopanos"," #CambiaNavarra"," @Cs_Navarra_"," Iaki Arana"," #NavarraPideCambio"," Miguel Zarranz"," @miguelzarranz"," @UPyD_Navarra"," Damaso Crespo"," @upyd_navarra"," #LIBRES"," Jose Miguel Nuin"," @josemiguelnuin"," @IzdaNavarra @EzkerraN"," Mikel Iriarte"," @libertadnavarra"," David Marzo"," @davidMarzo"," @EquoNavarfarroa"," #LaAlternativaVerde"," #AukeraVerdea"," @EquoNavarra"," Maria Yazmina Larumbe"," @PacmaNavarra"," Daniel Fernndez"," #SuVozTuVoto"," Luis Miguel Latasa"," @SainNavarra"," @PartidoSAIn"," Samuel Valderrey"," @SamuelValderrey"," #VOTASAIn"," Ramon Morcillo"," @RCN_NOK"," #marihuana"," Edurne Eguino"," @SoyEdurneNaiz"," @EdurneEguino"," @IUPamplona"],s=n.filter(function(e){if(e.id===r)return e}),o=this,u=this.viewerComp[0].id;b=s[0].capabilities.componentsStatus.filter(function(e){if(e.compId===u)return e});if(b[0].customCmd.length===0)this.viewerComp[0].setHTStatus("");else{var a=-1;for(var f=0;f<i.length;f++)b[0].customCmd.lastIndexOf(i[f])>a&&(a=b[0].customCmd.lastIndexOf(i[f]));a!==-1?this.viewerComp[0].setHTStatus(b[0].customCmd[a]):this.viewerComp[0].setHTStatus("")}},this.setMapViewStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this,o=this.mapComp[0].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===o)return e}),b[0].show===!0?this.mapComp[0].setViewStatus(!0):this.mapComp[0].setViewStatus(!1)}},E=function(){this.setID=function(e){this.id=e},this.setViewStatus=function(e){this.viewStatus=e},this.render=function(){var e=document.createElement("div");e.className="col-md-12 layout-columns";var t=document.createElement("div");t.className="col-md-6 clm_2 izda";var n=document.createElement("div");n.className="contenido-radio";var r=document.createElement("div");r.className="radio_row1";var i=document.createElement("div");i.className="w-row";var s=document.createElement("div");s.className="col-xs-4 col-sm-6 col-md-4";var o=document.createElement("img");o.className="radio_btn_pausa",o.id="radioViewBut"+this.id,o.width="150",this.viewStatus===!0?o.setAttribute("src","../resources/configPanel/img/radio/Radio_btn_pausa.png"):o.setAttribute("src","../resources/configPanel/img/radio/Radio_btn_play.png"),o.addEventListener("click",this.viewClick.bind(this)),s.appendChild(o);var u=document.createElement("div");u.className="col-xs-8 col-sm-6 col-md-8";var a=document.createElement("div");a.className="radio_nombre_emisora";var f=document.createElement("strong");f.className="radio_nombre_emisora_txt",f.innerHTML="Radio Euskadi",a.appendChild(f);var l=document.createElement("div");l.className="radio_ecualizador_centrar";var c=document.createElement("img");c.className="radio_ecualizador_img",c.id="radioEq"+this.id,this.viewStatus===!0?c.setAttribute("src","../resources/configPanel/img/radio/animacion-ecualizador_transp.gif"):c.setAttribute("src","../resources/configPanel/img/radio/Radio-animacion-off-estatico.png"),l.appendChild(c),u.appendChild(a),u.appendChild(l),i.appendChild(s),i.appendChild(u);var h=document.createElement("div");h.className="separador_horizontal";var p=document.createElement("div");p.className="radio_logo_emisora";var d=document.createElement("div");d.className="radio_logo_centrar";var v=document.createElement("img");v.src="../resources/configPanel/img/radio/logo_eitb.png",d.appendChild(v),p.appendChild(d),r.appendChild(i),r.appendChild(h),r.appendChild(p),n.appendChild(r),t.appendChild(n);var m=document.createElement("div");m.className="col-md-6 clm_2";var g=document.createElement("div");g.className="contenido-radio";var y=document.createElement("div");y.className="emisoras";var b=document.createElement("div");b.className="emisora_logo";var w=document.createElement("div");w.className="logo_emisora_p";var E=document.createElement("img");E.className="logo_emisora_img",E.src="../resources/configPanel/img/radio/logo_ser_blanco.png",w.appendChild(E),b.appendChild(w);var S=document.createElement("div");S.className="emisora_logo";var x=document.createElement("div");x.className="logo_emisora_p";var T=document.createElement("img");T.className="logo_emisora_img",T.src="../resources/configPanel/img/radio/logo_bbc_blanco.png",x.appendChild(T),S.appendChild(x);var N=document.createElement("div");N.className="emisora_logo";var C=document.createElement("div");C.className="logo_emisora_p";var k=document.createElement("img");return k.className="logo_emisora_img",k.src="../resources/configPanel/img/radio/logo_eitb_blanco.png",C.appendChild(k),N.appendChild(C),y.appendChild(b),y.appendChild(S),y.appendChild(N),g.appendChild(y),m.appendChild(g),e.appendChild(t),e.appendChild(m),e},this.viewClick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("viewClick"),a[0].show===!0?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"hide"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeRadioViewImgVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"show"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeRadioViewImgVal(r,this.id,!0))}},S=function(){this.radioComponent=[],this.addComponent=function(e){this.radioComponent.push(e)},this.render=function(){var e=document.createElement("div");return e.className="template-content-center",e.id="radioCont",e.appendChild(this.radioComponent[0].render()),e},this.setRadioViewStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this,o=this.radioComponent[0].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===o)return e}),b[0].show===!0?this.radioComponent[0].setViewStatus(!0):this.radioComponent[0].setViewStatus(!1)}},x=function(){this.setID=function(e){this.id=e},this.setViewStatus=function(e){this.viewStatus=e},this.setPlaceStat=function(e){this.activePlace=e},this.setYearStat=function(e){this.activeYear=e},this.render=function(){var e=document.createElement("div");e.className="contenido_graphics";var t=document.createElement("div");t.className="col-md-12 data-information-section";var n=document.createElement("div");n.className="col-md-9 txt_titular",n.innerHTML="Table data information";var r=document.createElement("paper-switch");r.id="viewCheck"+this.id,r.className="col-md-3 check-switch-graphics",r.setAttribute("val",this.viewStatus),r.addEventListener("click",this.viewclick.bind(this),!0),t.appendChild(n),t.appendChild(r);var i=document.createElement("div");i.className="col-md-12 tabs-graficos";var s=document.createElement("ul");s.className="nav nav-tabs",s.role="tablist";var o=document.createElement("li");o.id="pastLi",o.role="presentation",this.activeYear==="2011"?o.className="active":o.className="",o.addEventListener("click",this.pastClick.bind(this),!0),o.innerHTML='<a href="#2011" aria-controls="2011" role="tab" data-toggle="tab"><img src="../resources/configPanel/img/graphics/icon_chart.png"/><br><span class="year-text">2011</span></a>';var u=document.createElement("li");u.id="presentLi",u.role="presentation",this.activeYear==="2015"?u.className="active":u.className="",u.addEventListener("click",this.presentClick.bind(this),!0),u.innerHTML='<a href="#2012" aria-controls="2015" role="tab" data-toggle="tab"><img src="../resources/configPanel/img/graphics/icon_chart.png"/><br><span class="year-text">2015</span></a>',s.appendChild(o),s.appendChild(u);var a=document.createElement("div");a.className="tab-content";var f=document.createElement("div");this.activeYear==="2011"?f.className="col-md-12 fade in tab-pane active ":f.className="col-md-12 fade in tab-pane",f.id="pastPanel",f.role="tabpanel";var l=document.createElement("div");l.id="bilbo",this.activePlace===l.id?l.className="col-md-12 pastilla_ciudad active":l.className="col-md-12 pastilla_ciudad",l.addEventListener("click",this.placeClick.bind(this));var c=document.createElement("div");c.className="txt_ciudad",c.innerHTML="Bilbao",l.appendChild(c);var h=document.createElement("div");h.id="donostia",h.addEventListener("click",this.placeClick.bind(this)),this.activePlace===h.id?h.className="col-md-12 pastilla_ciudad active":h.className="col-md-12 pastilla_ciudad";var p=document.createElement("div");p.className="txt_ciudad",p.innerHTML="Donostia - San Sebastian",h.appendChild(p);var d=document.createElement("div");d.id="gasteiz",d.addEventListener("click",this.placeClick.bind(this)),this.activePlace===d.id?d.className="col-md-12 pastilla_ciudad active":d.className="col-md-12 pastilla_ciudad";var v=document.createElement("div");v.className="txt_ciudad",v.innerHTML="Vitoria / Gasteiz",d.appendChild(v);var m=document.createElement("div");m.id="irunea",m.addEventListener("click",this.placeClick.bind(this)),this.activePlace===m.id?m.className="col-md-12 pastilla_ciudad active":m.className="col-md-12 pastilla_ciudad";var g=document.createElement("div");g.className="txt_ciudad",g.innerHTML="Irua / Pamplona",m.appendChild(g),f.appendChild(l),f.appendChild(h),f.appendChild(d),f.appendChild(m);var y=document.createElement("div");this.activeYear==="2015"?y.className="col-md-12 fade in tab-pane active ":y.className="col-md-12 fade in tab-pane",y.id="presentPanel",y.role="tabpanel";var b=document.createElement("div");b.id="bilbo",b.addEventListener("click",this.placeClick.bind(this)),this.activePlace===b.id?b.className="col-md-12 pastilla_ciudad active":b.className="col-md-12 pastilla_ciudad";var w=document.createElement("div");w.className="txt_ciudad",w.innerHTML="Bilbao",b.appendChild(w);var E=document.createElement("div");E.id="donostia",E.addEventListener("click",this.placeClick.bind(this)),this.activePlace===E.id?E.className="col-md-12 pastilla_ciudad active":E.className="col-md-12 pastilla_ciudad";var S=document.createElement("div");S.className="txt_ciudad",S.innerHTML="Donostia - San Sebastian",E.appendChild(S);var x=document.createElement("div");x.id="gasteiz",x.addEventListener("click",this.placeClick.bind(this)),this.activePlace===x.id?x.className="col-md-12 pastilla_ciudad active":x.className="col-md-12 pastilla_ciudad";var T=document.createElement("div");T.className="txt_ciudad",T.innerHTML="Vitoria / Gasteiz",x.appendChild(T);var N=document.createElement("div");N.id="irunea",N.addEventListener("click",this.placeClick.bind(this)),this.activePlace===N.id?N.className="col-md-12 pastilla_ciudad active":N.className="col-md-12 pastilla_ciudad";var C=document.createElement("div");return C.className="txt_ciudad",C.innerHTML="Irua / Pamplona",N.appendChild(C),y.appendChild(b),y.appendChild(E),y.appendChild(x),y.appendChild(N),a.appendChild(f),a.appendChild(y),i.appendChild(s),i.appendChild(a),e.appendChild(t),e.appendChild(i),e},this.presentClick=function(e){var t=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice;mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(t,this.id,"resultTablePresent"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeTableYear(t,2015)},this.pastClick=function(e){var t=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice;mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(t,this.id,"resultTablePast"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeTableYear(t,2011)},this.placeClick=function(e){var t=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice;mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(t,this.id,e.currentTarget.id),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeTablePlace(t,e.currentTarget.id)},this.viewclick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("viewClick"),a[0].show===!0?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"hide"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"show"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!0))}},T=function(){this.place="",this.setPlace=function(e){this.place=e},this.setID=function(e){this.id=e},this.setViewStatus=function(e){this.viewStatus=e},this.render=function(){var e=document.createElement("div");e.className="col-md-12 emisora";var t=document.createElement("div");t.className="col-md-8 col-sm-8 col-xs-8 cityName";var n=document.createElement("p");n.className="text_ciudad",n.innerHTML=this.place;var r=document.createElement("br");n.appendChild(r);var i=document.createElement("span");i.className="comparative",i.innerHTML="COMPARATIVE",n.appendChild(i),t.appendChild(n);var s=document.createElement("paper-switch");return s.id="viewCheck"+this.id,s.className="col-md-4 col-sm-4 check-switch-graphics",s.setAttribute("val",this.viewStatus),s.addEventListener("click",this.viewclick.bind(this),!0),s.style.position="absolute",e.appendChild(t),e.appendChild(s),e},this.viewclick=function(e){function s(e){if(e.id===i)return e}e.preventDefault();var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=mediascape.AdaptationToolkit.uiComponents.ctrlPanel.activeDevice,i=r,o=n.filter(s),u=this,a=o[0].capabilities.componentsStatus.filter(function(e,t){if(e.compId===u.id)return e});console.log("viewClick"),a[0].show===!0?(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"hide"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!1)):(mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.setRemoteAgentComponentStatus(r,this.id,"show"),mediascape.AdaptationToolkit.uiComponents.ctrlPanel.changeViewSwVal(r,this.id,!0))}},N=function(){this.tableComp=[],this.graphComps=[],this.addTableComp=function(e){this.tableComp.push(e)},this.addGraphComp=function(e){this.graphComps.push(e)},this.render=function(){var e=document.createElement("div");e.className="template-content-center",e.id="graphicCont";var t=document.createElement("div");t.className="col-md-12 layout-columns";var n=document.createElement("div");n.className="col-md-6 clm_2_graph izda",n.appendChild(this.tableComp[0].render());var r=document.createElement("div");r.className="col-md-6 clm_2_graph";var i=document.createElement("div");i.className="contenido_graphics content-emisoras";for(var s=0;s<this.graphComps.length;s++)i.appendChild(this.graphComps[s].render());return r.appendChild(i),t.appendChild(n),t.appendChild(r),e.appendChild(t),e},this.setTableViewStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this,o=this.tableComp[0].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===o)return e}),b[0].show===!0?this.tableComp[0].setViewStatus(!0):this.tableComp[0].setViewStatus(!1)},this.setTableDataStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this,o=this.tableComp[0].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===o)return e});if(b[0].customCmd.lastIndexOf("resultTablePast")===-1&&b[0].customCmd.lastIndexOf("resultTablePresent")===-1&&b[0].customCmd.lastIndexOf("donostia")===-1&&b[0].customCmd.lastIndexOf("bilbo")===-1&&b[0].customCmd.lastIndexOf("gasteiz")===-1&&b[0].customCmd.lastIndexOf("irunea")===-1)this.tableComp[0].setPlaceStat("irunea"),this.tableComp[0].setYearStat("2015");else if(b[0].customCmd.lastIndexOf("resultTablePast")<b[0].customCmd.lastIndexOf("resultTablePresent")&&b[0].customCmd.lastIndexOf("donostia")===-1&&b[0].customCmd.lastIndexOf("bilbo")===-1&&b[0].customCmd.lastIndexOf("gasteiz")===-1&&b[0].customCmd.lastIndexOf("irunea")===-1)this.tableComp[0].setPlaceStat("irunea"),this.tableComp[0].setYearStat("2015");else if(b[0].customCmd.lastIndexOf("resultTablePast")>b[0].customCmd.lastIndexOf("resultTablePresent")&&b[0].customCmd.lastIndexOf("donostia")===-1&&b[0].customCmd.lastIndexOf("bilbo")===-1&&b[0].customCmd.lastIndexOf("gasteiz")===-1&&b[0].customCmd.lastIndexOf("irunea")===-1)this.tableComp[0].setPlaceStat("irunea"),this.tableComp[0].setYearStat("2011");else{var u=[];u.push([b[0].customCmd.lastIndexOf("donostia"),"donostia"]),u.push([b[0].customCmd.lastIndexOf("bilbo"),"bilbo"]),u.push([b[0].customCmd.lastIndexOf("gasteiz"),"gasteiz"]),u.push([b[0].customCmd.lastIndexOf("irunea"),"irunea"]);var a=[];a=u.sort(function(e,t){return e[0]>t[0]?1:-1}),this.tableComp[0].setPlaceStat(u[3][1]),b[0].customCmd.lastIndexOf("resultTablePast")===-1&&b[0].customCmd.lastIndexOf("resultTablePresent")===-1?this.tableComp[0].setYearStat("2015"):b[0].customCmd.lastIndexOf("resultTablePast")<b[0].customCmd.lastIndexOf("resultTablePresent")?this.tableComp[0].setYearStat("2015"):b[0].customCmd.lastIndexOf("resultTablePast")>b[0].customCmd.lastIndexOf("resultTablePresent")&&this.tableComp[0].setYearStat("2011")}},this.setGraphsViewStatus=function(e){var t=mediascape.AdaptationToolkit.Adaptation.multiDeviceAdaptation.getLocalContext(),n=t.agents,r=e,i=n.filter(function(e){if(e.id===r)return e}),s=this;for(var o=0;o<this.graphComps.length;o++){var u=this.graphComps[o].id;b=i[0].capabilities.componentsStatus.filter(function(e){if(e.compId===u)return e}),b[0].show===!0?this.graphComps[o].setViewStatus(!0):this.graphComps[o].setViewStatus(!1)}}};window.ControlPanel=r}),function init(){if(typeof define=="undefined"){var e=document.createElement("script");e.onload=function(){init()},e.src="../resources/libs/require.js",document.head.appendChild(e);return}require.config({baseUrl:"/js/",shim:{socketio:{exports:"io"},bootstrap:{deps:["jquery"]},bootstrap_swicth:{deps:["jquery","bootstrap"]}},paths:{underscore:"../resources/libs/underscore-min",namedwebsockets:"mediascape/lib/namedwebsockets",jquery:"http://code.jquery.com/jquery-2.1.4.min",msv:"http://www.mcorp.no/lib/msv-2.0",mcorp:"http://www.mcorp.no/lib/mcorp-2.0",mediaSync:"mediascape/MediaSync/mediasync",d3:"../resources/libs/d3.v3.min",data2015:"../resources/libs/2015",qrcode:"mediascape/lib/qrcode.min",qrcodelib:"../resources/libs/qrcodelib",webcodecam:"../resources/libs/WebCodeCam.min",socketio:"/socket.io/socket.io",ui:"../resources/libs/jquery-ui",shake:"../resources/libs/shake",association:"/resources/association/association",domReady:"/resources/libs/domReady",swiper:"https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.0/js/swiper.min",coords2:"/resources/libs/coords2",tags:"/resources/libs/tags",configPanel:"../resources/configPanel/configPanel",loadingPanel:"../resources/libs/loadingPanel",classifie:"../resources/configPanel/js/classie",bootstrap:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min",bootstrap_swicth:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.2/js/bootstrap-switch.min",webcomponetsPolyfill:"https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.17/webcomponents-lite.min"},waitSeconds:25}),define("mediascape",["mediascape/AdaptationToolkit/AdaptationToolkit","mediascape/Discovery/discovery","mediascape/Sharedstate/sharedstate","mediascape/Mappingservice/mappingservice","mediascape/Agentcontext/agentcontext","mediascape/Applicationcontext/applicationcontext","mediascape/DiscoveryForAgentContext/discoveryforagentcontext","mediascape/DeviceProfile/deviceProfile","association","mediascape/MediaSync/mediasync"],function(){var e={},t={},n=Array.prototype.slice.apply(arguments);e.init=function(t){mediascapeOptions={},_this=Object.create(e);var r=["sharedState","mappingService","applicationContext","mediaSync"];for(var i=0;i<n.length;++i){var s=n[i].__moduleName;r.indexOf(s)===-1?e[s]=new n[i](e,"gq"+i,e):e[s]=n[i]}var o=new CustomEvent("mediascape-modules-ready",{detail:{loaded:!0}});return document.dispatchEvent(o),_this},e.version="0.0.1";if(window.ms){var r=window.mediascape.__waiting;delete window.mediascape,r&&e.init.apply(this,r)}return window.mediascape=e,e}),require(["mediascape","configPanel","swiper"],function(e,t,n){console.log("mediascape require"),document.readyState==="complete"?e.init():setTimeout(e.init,2e3)})}(),define("mediascape.js",function(){});var loadingPanel=function(e,t,n){var r=document.createElement("div");r.id="loadingPanel",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.zIndex="10001",r.style.background="black";var i=document.createElement("img");i.id="loaderimg",i.src=e,i.style.position="absolute",i.style.top="25%",i.style.left="25%",i.style.width="50%",i.style.animationDelay="0s",r.appendChild(i),i.addEventListener("click",function(){mediascape.AdaptationToolkit.uiComponents.toggleFullScreen()}),document.body.appendChild(r),setTimeout(function(){document.body.removeChild(r)},t*1e3)};document.addEventListener("keydown",function(e){e.keyCode==13&&mediascape.AdaptationToolkit.uiComponents.toggleFullScreen()},!1),define("loadingPanel",function(){});